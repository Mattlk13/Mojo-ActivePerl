<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:support@ActiveState.com" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#">&#x6570;&#x636E;&#x7C7B;&#x578B;</a>
    <ul>
      <li><a href="#Mojo::Webqq::User">Mojo::Webqq::User &#x4E2A;&#x4EBA;</a></li>
      <li><a href="#Mojo::Webqq::Friend">Mojo::Webqq::Friend &#x597D;&#x53CB;</a></li>
      <li><a href="#Mojo::Webqq::Group">Mojo::Webqq::Group &#x7FA4;&#x7EC4;</a></li>
      <li><a href="#Mojo::Webqq::Group::Member">Mojo::Webqq::Group::Member &#x7FA4;&#x6210;&#x5458;</a></li>
      <li><a href="#Mojo::Webqq::Discuss">Mojo::Webqq::Discuss &#x8BA8;&#x8BBA;&#x7EC4;</a></li>
      <li><a href="#Mojo::Webqq::Discuss::Member">Mojo::Webqq::Discuss::Member &#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;</a></li>
    </ul>
  </li>
  <li><a href="#1">&#x6D88;&#x606F;&#x7C7B;&#x578B;</a>
    <ul>
      <li><a href="#Mojo::Webqq::Message::Recv::Message">Mojo::Webqq::Message::Recv::Message &#x63A5;&#x6536;&#x5230;&#x7684;&#x597D;&#x53CB;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Send::Message">Mojo::Webqq::Message::Send::Message &#x53D1;&#x9001;&#x7684;&#x597D;&#x53CB;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Recv::GroupMessage">Mojo::Webqq::Message::Recv::GroupMessage &#x63A5;&#x6536;&#x5230;&#x7684;&#x7FA4;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Send::GroupMessage">Mojo::Webqq::Message::Send::GroupMessage &#x53D1;&#x9001;&#x7684;&#x7FA4;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Recv::DiscussMessage">Mojo::Webqq::Message::Recv::DiscussMessage &#x63A5;&#x6536;&#x5230;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Send::DiscussMessage">Mojo::Webqq::Message::Send::DiscussMessage &#x53D1;&#x9001;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Recv::SessMessage">Mojo::Webqq::Message::Recv::SessMessage &#x63A5;&#x6536;&#x5230;&#x7684;&#x4E34;&#x65F6;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Send::SessMessage">Mojo::Webqq::Message::Send::SessMessage &#x53D1;&#x9001;&#x7684;&#x4E34;&#x65F6;&#x6D88;&#x606F;</a></li>
      <li><a href="#Mojo::Webqq::Message::Send::Status">Mojo::Webqq::Message::Send::Status &#x53D1;&#x9001;&#x6D88;&#x606F;&#x72B6;&#x6001;</a></li>
    </ul>
  </li>
  <li><a href="#2">&#x5BA2;&#x6237;&#x7AEF;&#x5C5E;&#x6027;</a></li>
  <li><a href="#3">&#x5BA2;&#x6237;&#x7AEF;&#x65B9;&#x6CD5;</a>
    <ul>
      <li><a href="#new">new()</a></li>
      <li><a href="#on">on()</a></li>
      <li><a href="#login">login()</a></li>
      <li><a href="#relogin">relogin() &#x91CD;&#x65B0;&#x767B;&#x5F55;</a></li>
      <li><a href="#timer-seconds-callback">timer($seconds,$callback) &#x5B9A;&#x65F6;&#x6267;&#x884C;</a></li>
      <li><a href="#interval-seconds-callback">interval($seconds,$callback) &#x95F4;&#x9694;&#x6267;&#x884C;</a></li>
      <li><a href="#run">run() &#x542F;&#x52A8;&#x4E3B;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;</a></li>
      <li><a href="#multi_run">multi_run() &#x542F;&#x52A8;&#x4E3B;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;(&#x591A;&#x5E10;&#x53F7;)</a></li>
      <li><a href="#ready">ready() &#x53EA;&#x51C6;&#x5907;&#x4E0D;&#x8FD0;&#x884C;</a></li>
      <li><a href="#stop-auto-noexit">stop([&quot;auto&quot;|&quot;noexit&quot;]) &#x505C;&#x6B62;&#x6536;&#x53D1;&#x6D88;&#x606F;</a></li>
      <li><a href="#add_job-job_name-time-callback">add_job($job_name,$time,$callback); &#x6307;&#x5B9A;&#x65F6;&#x523B;&#x6267;&#x884C;</a></li>
      <li><a href="#spawn-opt">spawn(%opt) &#x6267;&#x884C;&#x5916;&#x90E8;&#x547D;&#x4EE4;</a></li>
      <li><a href="#mail-opt-callback">mail(%opt,[$callback]) &#x975E;&#x963B;&#x585E;&#x53D1;&#x9001;&#x90AE;&#x4EF6;</a></li>
      <li><a href="#update_friend">update_friend() &#x66F4;&#x65B0;&#x597D;&#x53CB;&#x4FE1;&#x606F;</a></li>
      <li><a href="#update_group-group">update_group([$group]) &#x66F4;&#x65B0;&#x7FA4;&#x4FE1;&#x606F;</a></li>
      <li><a href="#update_discuss-discuss">update_discuss([$discuss]) &#x66F4;&#x65B0;&#x8BA8;&#x8BBA;&#x7EC4;&#x4FE1;&#x606F;</a></li>
      <li><a href="#update_recent">update_recent() &#x66F4;&#x65B0;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;&#x4FE1;&#x606F;</a></li>
      <li><a href="#each_friend-sub">each_friend(sub{...}) &#x904D;&#x5386;&#x597D;&#x53CB;</a></li>
      <li><a href="#friends">friends() &#x83B7;&#x53D6;&#x597D;&#x53CB;&#x5BF9;&#x8C61;&#x5217;&#x8868;</a></li>
      <li><a href="#each_group-sub">each_group(sub{...}) &#x904D;&#x5386;&#x7FA4;</a></li>
      <li><a href="#groups">groups() &#x83B7;&#x53D6;&#x7FA4;&#x5BF9;&#x8C61;&#x5217;&#x8868;</a></li>
      <li><a href="#each_group_member-sub">each_group_member(sub{...}) &#x904D;&#x5386;&#x7FA4;&#x6210;&#x5458;</a></li>
      <li><a href="#each_discuss-sub">each_discuss(sub{...}) &#x904D;&#x5386;&#x8BA8;&#x8BBA;&#x7EC4;</a></li>
      <li><a href="#discusss">discusss() &#x83B7;&#x53D6;&#x8BA8;&#x8BBA;&#x7EC4;&#x5217;&#x8868;</a></li>
      <li><a href="#each_discuss_member-sub">each_discuss_member(sub{...}) &#x904D;&#x5386;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;</a></li>
      <li><a href="#each_recent-sub">each_recent(sub{...}) &#x904D;&#x5386;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;</a></li>
      <li><a href="#recents">recents() &#x83B7;&#x53D6;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;&#x5217;&#x8868;</a></li>
      <li><a href="#send_message-friend-content-callback">send_message($friend,$content,[$callback]) &#x53D1;&#x9001;&#x597D;&#x53CB;&#x6D88;&#x606F;</a></li>
      <li><a href="#send_group_message-group-content-callback">send_group_message($group,$content,[$callback]) &#x53D1;&#x9001;&#x7FA4;&#x6D88;&#x606F;</a></li>
      <li><a href="#send_discuss_message-discuss-content-callback">send_discuss_message($discuss,$content,[$callback]) &#x53D1;&#x9001;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;</a></li>
      <li><a href="#send_sess_message-group_member-discuss_member-content-callback">send_sess_message($group_member|$discuss_member,$content,[$callback]) &#x53D1;&#x9001;&#x7FA4;&#x6216;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E34;&#x65F6;&#x6D88;&#x606F;</a></li>
      <li><a href="#reply_message-msg-content-callback">reply_message($msg,$content,[$callback]) &#x5BF9;&#x6536;&#x5230;&#x7684;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x56DE;&#x590D;</a></li>
      <li><a href="#http_get-httpget">http_get http&#x963B;&#x585E;&#x6216;&#x975E;&#x963B;&#x585E;get&#x8BF7;&#x6C42;</a></li>
      <li><a href="#http_post-httppost">http_post http&#x963B;&#x585E;&#x6216;&#x975E;&#x963B;&#x585E;post&#x8BF7;&#x6C42;</a></li>
      <li><a href="#print">print &#x6253;&#x5370;&#x5185;&#x5BB9;&#xFF0C;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x8BC6;&#x522B;&#x8F93;&#x51FA;&#x7EC8;&#x7AEF;&#x7F16;&#x7801;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x4E71;&#x7801;</a></li>
    </ul>
  </li>
  <li><a href="#4">&#x5BA2;&#x6237;&#x7AEF;&#x4E8B;&#x4EF6;</a>
    <ul>
      <li><a href="#reveive_message">reveive_message &#x63A5;&#x6536;&#x6D88;&#x606F;&#x4E8B;&#x4EF6;</a></li>
      <li><a href="#send_message">send_message &#x53D1;&#x9001;&#x6D88;&#x606F;&#x4E8B;&#x4EF6;</a></li>
      <li><a href="#login1">login &#x767B;&#x5F55;&#x6210;&#x529F;&#x4E8B;&#x4EF6;</a></li>
      <li><a href="#relogin1">relogin &#x91CD;&#x65B0;&#x767B;&#x5F55;&#x6210;&#x529F;&#x4E8B;&#x4EF6;</a></li>
      <li><a href="#input_img_verifycode">input_img_verifycode &#x7B49;&#x5F85;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x7801;</a></li>
      <li><a href="#input_qrcode">input_qrcode &#x7B49;&#x5F85;&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;</a></li>
      <li><a href="#ready1">ready &#x51C6;&#x5907;&#x5C31;&#x7EEA;</a></li>
      <li><a href="#run1">run &#x5373;&#x5C06;&#x5F00;&#x59CB;&#x8FD0;&#x884C;</a></li>
      <li><a href="#plugin_call">plugin_call &#x63D2;&#x4EF6;&#x6267;&#x884C;</a></li>
      <li><a href="#plugin_load">plugin_load &#x63D2;&#x4EF6;&#x52A0;&#x8F7D;</a></li>
      <li><a href="#after_load_plugin">after_load_plugin &#x6240;&#x6709;&#x63D2;&#x4EF6;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;</a></li>
      <li><a href="#new_friend">new_friend &#x65B0;&#x589E;&#x597D;&#x53CB;</a></li>
      <li><a href="#lose_friend">lose_friend &#x4E22;&#x5931;&#x597D;&#x53CB;</a></li>
      <li><a href="#new_group">new_group &#x65B0;&#x589E;&#x7FA4;</a></li>
      <li><a href="#lose_group">lose_group &#x9000;&#x51FA;&#x7FA4;</a></li>
      <li><a href="#new_group_member">new_group_member &#x65B0;&#x589E;&#x7FA4;&#x6210;&#x5458;</a></li>
      <li><a href="#lose_group_member">lose_group_member &#x7FA4;&#x6210;&#x5458;&#x9000;&#x51FA;</a></li>
      <li><a href="#new_discuss">new_discuss &#x65B0;&#x589E;&#x8BA8;&#x8BBA;&#x7EC4;</a></li>
      <li><a href="#lose_discuss">lose_discuss &#x9000;&#x51FA;&#x8BA8;&#x8BBA;&#x7EC4;</a></li>
      <li><a href="#new_discuss_member">new_discuss_member &#x65B0;&#x589E;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;</a></li>
      <li><a href="#lose_discuss_member">lose_discuss_member &#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x9000;&#x51FA;</a></li>
      <li><a href="#receive_pic">receive_pic &#x63A5;&#x6536;&#x56FE;&#x7247;</a></li>
      <li><a href="#receive_friend_pic">receive_friend_pic &#x63A5;&#x6536;&#x597D;&#x53CB;&#x56FE;&#x7247;</a></li>
      <li><a href="#receive_sess_pic">receive_sess_pic &#x63A5;&#x6536;&#x964C;&#x751F;&#x4EBA;&#x56FE;&#x7247;</a></li>
      <li><a href="#receive_group_pic">receive_group_pic &#x63A5;&#x6536;&#x5230;&#x7FA4;&#x56FE;&#x7247;</a></li>
      <li><a href="#first_talk">first_talk &#x67D0;&#x4EBA;&#x7B2C;&#x4E00;&#x6B21;&#x6D88;&#x606F;</a></li>
      <li><a href="#before_send_message">before_send_message &#x6D88;&#x606F;&#x5373;&#x5C06;&#x53D1;&#x9001;</a></li>
      <li><a href="#friend_property_change">friend_property_change &#x597D;&#x53CB;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</a></li>
      <li><a href="#group_property_change">group_property_change &#x7FA4;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</a></li>
      <li><a href="#group_member_property_change">group_member_property_change &#x7FA4;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</a></li>
      <li><a href="#discuss_property_change">discuss_property_change &#x8BA8;&#x8BBA;&#x7EC4;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</a></li>
      <li><a href="#discuss_member_property_change">discuss_member_property_change &#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</a></li>
      <li><a href="#model_update_fail">model_update_fail &#x66F4;&#x65B0;&#x597D;&#x53CB;&#x3001;&#x7FA4;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x4FE1;&#x606F;&#x5931;&#x8D25;</a></li>
      <li><a href="#receive_raw_message">receive_raw_message &#x63A5;&#x6536;&#x5230;&#x539F;&#x59CB;&#x6D88;&#x606F;&#x5185;&#x5BB9;</a></li>
    </ul>
  </li>
  <li><a href="#5">&#x5173;&#x4E8E;&#x63D2;&#x4EF6;</a>
    <ul>
      <li><a href="#load">load</a></li>
      <li><a href="#call">call</a></li>
    </ul>
  </li>
  <li><a href="#6">&#x63D2;&#x4EF6;&#x5217;&#x8868;</a>
    <ul>
      <li><a href="#Mojo::Webqq::Plugin::ShowMsg">Mojo::Webqq::Plugin::ShowMsg</a></li>
      <li><a href="#Mojo::Webqq::Plugin::StockInfo">Mojo::Webqq::Plugin::StockInfo</a></li>
      <li><a href="#Mojo::Webqq::Plugin::MsgSync">Mojo::Webqq::Plugin::MsgSync</a></li>
      <li><a href="#Mojo::Webqq::Plugin::IRCShell">Mojo::Webqq::Plugin::IRCShell</a></li>
      <li><a href="#Mojo::Webqq::Plugin::Perldoc">Mojo::Webqq::Plugin::Perldoc</a></li>
      <li><a href="#Mojo::Webqq::Plugin::Perlcode">Mojo::Webqq::Plugin::Perlcode</a></li>
      <li><a href="#Mojo::Webqq::Plugin::ProgramCode">Mojo::Webqq::Plugin::ProgramCode</a>
        <ul>
          <li><a href="#php">php</a></li>
          <li><a href="#c">c</a></li>
          <li><a href="#cpp">cpp</a></li>
          <li><a href="#java">java</a></li>
        </ul>
      </li>
      <li><a href="#Mojo::Webqq::Plugin::MobileInfo">Mojo::Webqq::Plugin::MobileInfo</a></li>
      <li><a href="#Mojo::Webqq::Plugin::KnowledgeBase">Mojo::Webqq::Plugin::KnowledgeBase</a></li>
      <li><a href="#Mojo::Webqq::Plugin::FuckDaShen">Mojo::Webqq::Plugin::FuckDaShen</a></li>
      <li><a href="#Mojo::Webqq::Plugin::Translation">Mojo::Webqq::Plugin::Translation</a></li>
      <li><a href="#Mojo::Webqq::Plugin::Riddle">Mojo::Webqq::Plugin::Riddle</a></li>
      <li><a href="#Mojo::Webqq::Plugin::ShowQRcode">Mojo::Webqq::Plugin::ShowQRcode</a></li>
      <li><a href="#Mojo::Webqq::Plugin::GasPrice">Mojo::Webqq::Plugin::GasPrice</a></li>
      <li><a href="#Mojo::Webqq::Plugin::GroupManage">Mojo::Webqq::Plugin::GroupManage</a></li>
      <li><a href="#Mojo::Webqq::Plugin::PostQRcode">Mojo::Webqq::Plugin::PostQRcode</a></li>
      <li><a href="#Mojo::Webqq::Plugin::PostImgVerifycode">Mojo::Webqq::Plugin::PostImgVerifycode</a></li>
      <li><a href="#Mojo::Webqq::Plugin::SmartReply">Mojo::Webqq::Plugin::SmartReply</a></li>
      <li><a href="#Mojo::Webqq::Plugin::Openqq">Mojo::Webqq::Plugin::Openqq</a></li>
    </ul>
  </li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Mojo::Webqq - A Webqq Client Framework base on Mojolicious</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>    <span class="comment">#æ³¨æ: </span>
    <span class="comment">#ç¨åºåé¨æ°æ®å¨é¨ä½¿ç¨UTF8ç¼ç ï¼å æ­¤äºæ¬¡å¼åæºä»£ç ä¹è¯·å°½éä½¿ç¨UTF8ç¼ç è¿è¡ç¼åï¼å¦åéè¦èªå·±åç¼ç å¤ç</span>
    <span class="comment">#å¨ç»ç«¯ä¸æ§è¡ç¨åºï¼ä¼èªå¨æ£æ¥ç»ç«¯çç¼ç è¿è¡è½¬æ¢ï¼ä»¥é²æ­¢ä¹±ç </span>
    <span class="comment">#å¦æå¨æäºIDEçæ§å¶å°ä¸­æ¥çæ§è¡ç»æï¼ç¨åºæ æ³èªå¨æ£æµè¾åºç¼ç ï¼å¯è½ä¼åºç°ä¹±ç ï¼å¯ä»¥æå¨è®¾ç½®è¾åºç¼ç </span>
    <span class="comment">#æå¨è®¾ç½®è¾åºç¼ç åèææ¡£ä¸­å³äº log_encoding çè¯´æ</span>
    
    <span class="comment">#å¸å·å¯è½è¿å¥ä¿æ¤æ¨¡å¼çåå :</span>
    <span class="comment">#å¤æ¬¡åè¨ä¸­åå«ç½å</span>
    <span class="comment">#ç­æ¶é´åå¤æ¬¡åè¨ä¸­åå«ææè¯æ±</span>
    <span class="comment">#ç­æ¶é´å¤æ¬¡åéç¸ååå®¹</span>
    <span class="comment">#é¢ç¹å¼å°ç»é</span>
    
    <span class="comment">#æ¨èææºå®è£[QQå®å¨ä¸­å¿]APPï¼æ¹ä¾¿éæ¶ææ¡èªå·±å¸å·çæåµ</span>
    <span class="comment">#éè¿æ¬ç¨åºç»å½QQä¹åè¯·åå³é­å¸å·çå¯ä¿åè½</span>
    
    <span class="keyword">use</span> <span class="variable">Mojo::Webqq</span><span class="operator">;</span>
    <span class="keyword">use</span> <span class="variable">Mojo::Util</span> <span class="string">qw(md5_sum)</span><span class="operator">;</span>
    
    <span class="keyword">my</span> <span class="variable">$qq</span> <span class="operator">=</span> <span class="number">12345678</span><span class="operator">;</span>           <span class="comment">#ç»å½çQQå·</span>
    <span class="keyword">my</span> <span class="variable">$pwd</span> <span class="operator">=</span> <span class="string">"your password"</span><span class="operator">;</span>   <span class="comment">#ä½¿ç¨å¸å·å¯ç æ¹å¼ç»å½æ¶éè¦</span>
    <span class="keyword">my</span> <span class="variable">$pwd_md5</span> <span class="operator">=</span> <span class="variable">md5_sum</span><span class="operator">(</span><span class="variable">$pwd</span><span class="operator">);</span> <span class="comment">#å¾å°åå§å¯ç ç32ä½é¿åº¦md5</span>
    
    <span class="comment">#åå§åä¸ä¸ªå®¢æ·ç«¯å¯¹è±¡ï¼è®¾ç½®ç»å½çqqå·</span>
    <span class="keyword">my</span> <span class="variable">$client</span><span class="operator">=</span><span class="variable">Mojo::Webqq</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span>
        <span class="string">ua_debug</span>    <span class="operator">=&gt;</span>  <span class="number">0</span><span class="operator">,</span>         <span class="comment">#æ¯å¦æå°è¯¦ç»çdebugä¿¡æ¯</span>
        <span class="string">log_level</span>   <span class="operator">=&gt;</span>  <span class="string">"info"</span>     <span class="comment">#æ¥å¿æå°çº§å«ï¼debug|info|warn|error|fatal</span>
        <span class="string">qq</span>          <span class="operator">=&gt;</span>  <span class="variable">$qq</span><span class="operator">,</span>       <span class="comment">#å¿éï¼ç»å½çqqå¸å·ï¼ç¨äºå¸å·å¯ç ç»å½æä¿å­ç»å½cookieä½¿ç¨</span>
        <span class="string">pwd</span>         <span class="operator">=&gt;</span>  <span class="variable">$pwd_md5</span><span class="operator">,</span>  <span class="comment">#å¯éï¼å¦æéæ©å¸å·å¯ç ç»å½æ¹å¼ï¼å¿é¡»æå®å¸å·å¯ç çmd5å¼</span>
        <span class="string">login_type</span>  <span class="operator">=&gt;</span>  <span class="string">"qrlogin"</span><span class="operator">,</span> <span class="comment">#"qrlogin"è¡¨ç¤ºäºç»´ç ç»å½ï¼"login"è¡¨ç¤ºå¸å·å¯ç ç»å½</span>
    <span class="operator">);</span>
    <span class="comment">#æ³¨æ: è¾è®¯å¯è½å·²ç»å³é­äºå¸å·å¯ç çç»å½æ¹å¼ï¼è¿ç§æåµä¸åªè½ä½¿ç¨äºç»´ç æ«æç»å½</span>
    
    <span class="comment">#å®¢æ·ç«¯è¿è¡ç»å½</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">login</span><span class="operator">();</span> <span class="comment">#è¯·å³é­å¸å·çå¯ä¿åè½ï¼ä¸æ¯æå¯ä¿ç»å½</span>
    
    <span class="comment">#å®¢æ·ç«¯å è½½ShowMsgæä»¶ï¼ç¨äºæå°åéåæ¥æ¶çæ¶æ¯å°ç»ç«¯</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"ShowMsg"</span><span class="operator">);</span>
    
    <span class="comment">#è®¾ç½®æ¥æ¶æ¶æ¯äºä»¶çåè°å½æ°ï¼å¨åè°å½æ°ä¸­å¯¹æ¶æ¯ä»¥ç¸ååå®¹è¿è¡åå¤</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_message</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
        <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">reply</span><span class="operator">(</span><span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">content</span><span class="operator">);</span> <span class="comment">#å·²ä»¥ç¸ååå®¹åå¤æ¥æ¶å°çæ¶æ¯</span>
        <span class="comment">#ä½ ä¹å¯ä»¥ä½¿ç¨$msg-&gt;dump() æ¥æå°æ¶æ¯ç»æ</span>
    <span class="operator">});</span>
    
    <span class="comment">#readyäºä»¶è§¦åæ¶ è¡¨ç¤ºå®¢æ·ç«¯ä¸ååå¤å°±ç»ªï¼å·²ç»æåç»å½ãå·²ç»å è½½å®ä¸ªäºº/å¥½å/ç¾¤ä¿¡æ¯ç­</span>
    <span class="comment">#ä½ çä»£ç å»ºè®®å°½éåå¨ ready äºä»¶ä¸­</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">ready</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$client</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
    
        <span class="comment">#ä½ çä»£ç åå¨æ­¤å¤ </span>
    
    <span class="operator">});</span>
    
    <span class="comment">#å®¢æ·ç«¯å¼å§è¿è¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">run</span><span class="operator">();</span>
    
    <span class="comment">#runç¸å½äºæ§è¡ä¸ä¸ªæ­»å¾ªç¯ï¼ä¸ä¼è·³åºå¾ªç¯ä¹å¤</span>
    <span class="comment">#æä»¥runåºè¯¥æ»æ¯æ¾å¨ä»£ç æåæ§è¡ï¼å¹¶ä¸ä¸è¦å¨runä¹ååæ·»å ä»»ä½èªå·±çä»£ç äº</span>
</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>&#x901A;&#x8FC7;&#x8BE5;&#x9879;&#x76EE;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x57FA;&#x672C;&#x7684;&#x767B;&#x5F55;&#x3001;&#x63A5;&#x6536;&#x548C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#xFF0C;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x63D2;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#x5B9E;&#x73B0;&#x66F4;&#x591A;&#x9644;&#x52A0;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>

<p>&#x7FA4;&#x7BA1;&#x7406;&#x3001;&#x804A;&#x5929;&#x8BB0;&#x5F55;&#x7EDF;&#x8BA1;&#x3001;QQ&#x6D88;&#x606F;&#x62A5;&#x8B66;&#x3001;QQ&#x673A;&#x5668;&#x4EBA;&#x3001;&#x5728;QQ&#x7FA4;&#x4E2D;&#x6267;&#x884C;Perl&#x4EE3;&#x7801;&#xFF0C;&#x67E5;&#x8BE2;Perldoc&#x6587;&#x6863;&#x3001;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x3001;QQ&#x548C;IRC&#x8054;&#x901A;&#x7B49;&#x7B49;</p>

<p>&#x539F;&#x5148;&#x7684;<a>Webqq::Client</a>&#x6A21;&#x5757;&#x91C7;&#x7528;&#x7684;&#x662F;LWP+AnyEvent&#x5B9E;&#x73B0;&#x963B;&#x585E;&#x548C;&#x975E;&#x963B;&#x585E;&#x8BF7;&#x6C42;</p>

<p>&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x6DF7;&#x4E71;&#xFF0C;&#x5B58;&#x5728;&#x8BF8;&#x591A;bug&#xFF0C;&#x6613;&#x7528;&#x6027;&#x548C;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x8F83;&#x5DEE;</p>

<p>&#x6B64;&#x9879;&#x76EE;&#x662F;<a>Webqq::Client</a>&#x6A21;&#x5757;&#x7684;&#x91CD;&#x6784;&#xFF0C;&#x57FA;&#x4E8E;<a href="../../../site/lib/Mojolicious.html">Mojolicious</a>&#x6846;&#x67B6;&#xFF0C;&#x5177;&#x4F53;&#x66F4;&#x591A;&#x826F;&#x597D;&#x7279;&#x6027;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>

<p>&#x57FA;&#x4E8E;<a href="../../../site/lib/Mojo/Base.html">Mojo::Base</a>&#x66F4;&#x597D;&#x7684;&#x5BF9;&#x8C61;&#x6A21;&#x578B;&#x3001;&#x57FA;&#x4E8E;<a href="../../../site/lib/Mojo/EventEmitter.html">Mojo::EventEmitter</a>&#x7075;&#x6D3B;&#x7684;&#x4E8B;&#x4EF6;&#x7BA1;&#x7406;&#x673A;&#x5236;&#x3001;</p>

<p>&#x57FA;&#x4E8E;<a href="../../../site/lib/Mojo/UserAgent.html">Mojo::UserAgent</a>&#x7EDF;&#x4E00;&#x7684;&#x963B;&#x585E;&#x548C;&#x975E;&#x963B;&#x585E;HTTP&#x8BF7;&#x6C42;&#x3001;&#x57FA;&#x4E8E;<a href="../../../site/lib/Mojo/Log.html">Mojo::Log</a>&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x6846;&#x67B6; &#x7B49;&#x7B49;</p>

<p>&#x63A8;&#x8350;&#x4F60;&#x5728;&#x4F7F;&#x7528;&#x672C;&#x6A21;&#x5757;&#x7684;&#x540C;&#x65F6;&#x4E5F;&#x66F4;&#x591A;&#x7684;&#x4E86;&#x89E3;<a href="../../../site/lib/Mojolicious.html">Mojolicious</a></p>

<h1 id="">&#x6570;&#x636E;&#x7C7B;&#x578B;</h1>

<p>&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x542B; &#x4E2A;&#x4EBA;&#x3001;&#x597D;&#x53CB;&#x3001;&#x7FA4;&#x7EC4;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x3001;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA; &#x51E0;&#x5927;&#x7C7B;&#x578B;&#xFF0C;&#x6BCF;&#x79CD;&#x7C7B;&#x578B;&#x90FD;&#x4E13;&#x95E8;&#x8BBE;&#x8BA1;&#x4E86;&#x7C7B;</p>

<p>&#x8FD9;&#x4E9B;&#x7C7B;&#x90FD;&#x7EE7;&#x627F;<a>Mojo::Webqq::Model::Base</a>&#x5177;&#x6709;dump&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5747;&#x7531;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x548C;&#x7EF4;&#x62A4;</p>

<p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x53EA;&#x8BFB;&#x64CD;&#x4F5C;</p>

<h2 id="Mojo::Webqq::User">Mojo::Webqq::User &#x4E2A;&#x4EBA;</h2>

<pre><code>    &#x5C5E;&#x6027;:

    birthday        #&#x751F;&#x65E5;
    phone           #&#x7535;&#x8BDD;
    occupation      #&#x804C;&#x4E1A;
    college         #&#x5927;&#x5B66;
    type            #&#x56FA;&#x5B9A;&#x503C;&quot;user&quot;
    qq              #qq&#x5E10;&#x53F7;
    id              #&#x672C;&#x6B21;&#x767B;&#x5F55;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#xFF0C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x65F6;&#x9700;&#x8981;&#x7528;&#x5230;&#xFF0C;id&#x548C;qq&#x53F7;&#x662F;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6982;&#x5FF5;
    blood           #&#x8840;&#x578B;
    constel         #&#x661F;&#x5EA7;
    homepage        #&#x4E3B;&#x9875;
    state           #&#x5728;&#x7EBF;&#x72B6;&#x6001; online|away|busy|callme|silent|hidden
    country         #&#x56FD;&#x5BB6;
    city            #&#x57CE;&#x5E02;
    nick            #&#x6635;&#x79F0;    
    displayname     #&#x5F53;&#x524D;&#x548C;&#x6635;&#x79F0;&#x5B8C;&#x5168;&#x4E00;&#x6837;
    shengxiao       #&#x751F;&#x6548;
    email           #&#x90AE;&#x7BB1;
    client_type     #&#x56FA;&#x5B9A;&#x503C;&quot;web&quot;
    province        #&#x7701;&#x4EFD;
    gender          #&#x6027;&#x522B;
    mobile          #&#x624B;&#x673A;
    signature       #&#x4E2A;&#x6027;&#x7B7E;&#x540D;

    &#x65B9;&#x6CD5;&#xFF1A;
    dump
    is_me           #&#x5224;&#x65AD;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x81EA;&#x5DF1;
    </code></pre>

<p>&#x5B9E;&#x9645;&#x60F3;&#x8981;&#x83B7;&#x53D6;&#x8BE5;&#x5BF9;&#x8C61;&#x4FE1;&#x606F;&#x65F6;&#xFF0C;&#x662F;&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x7684; user &#x5C5E;&#x6027;&#x6765;&#x83B7;&#x53D6;</p>

<pre><code>    $client-&gt;user       #&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x4E00;&#x4E2A;Mojo::Webqq::User&#x5BF9;&#x8C61;
    $client-&gt;user-&gt;nick #&#x83B7;&#x53D6;&#x5E10;&#x53F7;&#x6635;&#x79F0;
    $client-&gt;user-&gt;id   #&#x83B7;&#x53D6;&#x5E10;&#x53F7;id
    $client-&gt;user-&gt;dump</code></pre>

<h2 id="Mojo::Webqq::Friend">Mojo::Webqq::Friend &#x597D;&#x53CB;</h2>

<pre><code>    å±æ§ï¼
    
    <span class="string">qq              #å¥½åçqqå·ç 
    id              #</span>å¥½åç<span class="variable">id</span>ï¼ä»å¨æ¬æ¬¡ç»å½æé´å¯ä¸ï¼å¤æ¬¡ç»å½å¯è½ä¼åçååï¼è®°ä½ <span class="variable">id</span>ä¸æ¯<span class="keyword">qq</span>å·
    <span class="variable">type</span>            <span class="comment">#åºå®å¼"friend"</span>
    <span class="variable">category</span>        <span class="comment">#å¥½åæå±çåç»</span>
    <span class="variable">nick</span>            <span class="comment">#å¥½åæµç§°</span>
    <span class="variable">markname</span>        <span class="comment">#å¥½åå¤æ³¨åç§°</span>
    <span class="variable">displayname</span>     <span class="comment">#å¦æè®¾ç½®äºmarkname å°±è¿åmarkname å¦åè¿ånick</span>
    <span class="variable">is_vip</span>          <span class="comment">#æ¯å¦æ¯vipä¼å</span>
    <span class="variable">vip_level</span>       <span class="comment">#vipç­çº§</span>
    <span class="keyword">state</span>           <span class="comment">#å¥½åç¶åµ online|away|busy|silent|offline</span>
    <span class="variable">client_type</span>     <span class="comment">#å¥½åå®¢æ·ç«¯ç±»å pc|mobile|iphone|unknown</span>
    
    æ¹æ³<span class="operator">:</span>
    <span class="keyword">send</span>            <span class="comment">#ç»å¥½åå¯¹è±¡åéæ¶æ¯</span>
    <span class="variable">is_friend</span>       <span class="comment">#å¤æ­å¯¹è±¡æ¯å¦æ¯å¥½å</span>
    <span class="keyword">dump</span>
    
    ä»£ç ç¤ºä¾ï¼
    
    <span class="keyword">my</span> <span class="variable">$friend</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_friend</span><span class="operator">(</span><span class="string">nick</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">);</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">print</span><span class="operator">(</span><span class="string">"å¥½ååç»ä¸º: "</span><span class="operator">,</span><span class="variable">$friend</span><span class="operator">-&gt;</span><span class="variable">category</span><span class="operator">,</span><span class="string">"\n"</span><span class="operator">);</span> <span class="comment">#ä½¿ç¨$client-&gt;print()å¯ä»¥èªå¨æ£æµç»ç«¯ç¼ç ï¼é²æ­¢ä¹±ç </span>
    <span class="variable">$friend</span><span class="operator">-&gt;</span><span class="variable">dump</span><span class="operator">();</span>
    
    <span class="variable">$friend</span><span class="operator">-&gt;</span><span class="variable">send</span><span class="operator">(</span><span class="string">"hello world"</span><span class="operator">);</span> <span class="comment">#æ¯$client-&gt;send_message($friend,"hello world")æ´ç®æ´</span>
    
    <span class="comment">#éåå¥½å</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">each_friend</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$friend</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="operator">...;</span>
    <span class="operator">});</span>
    
    <span class="keyword">for</span> <span class="keyword">my</span> <span class="variable">$friend</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">friends</span><span class="operator">){</span>
        <span class="operator">...;</span>
    <span class="operator">}</span>
</code></pre>

<h2 id="Mojo::Webqq::Group">Mojo::Webqq::Group &#x7FA4;&#x7EC4;</h2>

<pre><code>    å±æ§ï¼
    
    <span class="variable">gid</span>             <span class="comment">#ç¾¤çidï¼ä»å¨æ¬æ¬¡ç»å½æé´å¯ä¸ï¼å¤æ¬¡ç»å½å¯è½ä¼åçåå</span>
    <span class="variable">gtype</span>           <span class="comment">#create|attend|manage åå«è¡¨ç¤ºåå»ºçç¾¤|å å¥çç¾¤|ç®¡ççç¾¤</span>
    <span class="variable">type</span>            <span class="comment">#åºå®å¼"group"</span>
    <span class="variable">gnumber</span>         <span class="comment">#ç¾¤å·ç </span>
    <span class="variable">gname</span>           <span class="comment">#ç¾¤åç§°</span>
    <span class="variable">gmemo</span>           <span class="comment">#ç¾¤è¯´æ</span>
    <span class="variable">gcreatetime</span>     <span class="comment">#ç¾¤åå»ºæ¶é´</span>
    <span class="variable">glevel</span>          <span class="comment">#ç¾¤ç­çº§</span>
    <span class="variable">gowner</span>          <span class="comment">#ç¾¤æ¥æèçid</span>
    <span class="variable">gmarkname</span>       <span class="comment">#ç¾¤å¤æ³¨åç§°</span>
    <span class="variable">displayname</span>     <span class="comment">#å¦æè®¾ç½®äºgmarkname å°±è¿ågmarkname å¦åè¿ågname</span>
    <span class="variable">member</span>          <span class="comment">#ç¾¤æåï¼æ­¤å±æ§æ¯ä¸ä¸ªæ°ç»å¼ç¨ï¼æ°ç»ä¸­æ¯ä¸ªåç´ æ¯ä¸ä¸ªMojo::Webqq::Group::Memberçå¯¹è±¡</span>
    
    æ¹æ³ï¼
    <span class="variable">search_group_member</span>     <span class="comment">#æ ¹æ®ç¾¤æåå±æ§æç´¢ï¼æ éä¸ä¸æè¿åç¬¬ä¸ä¸ªç¾¤æåå¯¹è±¡ï¼åè¡¨ä¸ä¸æè¿åå¨é¨ï¼æç´¢å¤±è´¥è¿åundef</span>
    <span class="variable">each_group_member</span>       <span class="comment">#å¨ç¾¤ä¸­éåææçç¾¤æå</span>
    <span class="variable">invite_friend</span>           <span class="comment">#éè¯·å¥½åå¥ç¾¤</span>
    <span class="variable">kick_group_member</span>       <span class="comment">#è¸¢åºç¾¤æå</span>
    <span class="variable">set_group_admin</span>         <span class="comment">#è®¾ç½®ç¾¤æåä¸ºç®¡çå</span>
    <span class="variable">remove_group_admin</span>      <span class="comment">#åæ¶ç¾¤æåçç®¡çåèº«ä»½</span>
    <span class="variable">set_group_member_card</span>   <span class="comment">#è®¾ç½®ç¾¤åç</span>
    <span class="variable">shutup_group_member</span>     <span class="comment">#å¯¹ç¾¤æåè¿è¡ç¦è¨</span>
    <span class="variable">speakup_group_member</span>    <span class="comment">#åæ¶ç¾¤æåç¦è¨</span>
    <span class="variable">members</span>                 <span class="comment">#è¿åç¾¤æåå¯¹è±¡åè¡¨  </span>
    <span class="keyword">send</span>                    <span class="comment">#ç»ç¾¤å¯¹è±¡åéæ¶æ¯</span>
    <span class="variable">me</span>                      <span class="comment">#è¿åèªå·±å¨ç¾¤æåä¸­çå¯¹è±¡ (Mojo::Webqq::Group::Member)</span>
    <span class="variable">is_group</span>                <span class="comment">#å¤æ­å¯¹è±¡æ¯å¦æ¯ä¸ä¸ªç¾¤</span>
    <span class="keyword">dump</span>                    <span class="comment">#æå°ç¾¤å¯¹è±¡ç»æï¼æ¹ä¾¿è°è¯</span>
    
    ç¤ºä¾ä»£ç ï¼
    <span class="keyword">my</span> <span class="variable">$group</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_group</span><span class="operator">(</span><span class="string">gname</span><span class="operator">=&gt;</span><span class="string">"PERLå­¦ä¹ äº¤æµç¾¤"</span><span class="operator">);</span> <span class="comment">#è¿åä¸ä¸ªMojo::Webqq::Groupå¯¹è±¡</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">send</span><span class="operator">(</span><span class="string">"hello world"</span><span class="operator">);</span> <span class="comment">#å¨æå®çç¾¤ä¸­åéæ¶æ¯</span>
    
    <span class="keyword">my</span> <span class="variable">$member</span> <span class="operator">=</span> <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">search_group_member</span><span class="operator">(</span><span class="string">id</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">,</span><span class="string">nick</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">);</span> <span class="comment">#è¿åä¸ä¸ªMojo::Webqq::Group::Memberå¯¹è±¡</span>
    <span class="variable">$member</span><span class="operator">-&gt;</span><span class="variable">send</span><span class="operator">(</span><span class="string">"hello world"</span><span class="operator">);</span> <span class="comment">#ç»ç¾¤ä¸­æå®çç¾¤æååéä¸´æ¶æ¶æ¯</span>
    
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">each_group_member</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$member</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="operator">...;</span>
    <span class="operator">});</span>
    
    <span class="keyword">for</span> <span class="keyword">my</span> <span class="variable">$group</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">groups</span><span class="operator">){</span>
        <span class="operator">...;</span>
    <span class="operator">}</span>
    
    <span class="comment">#è·åèªå·±å¨ç¾¤ä¸­çæ¾ç¤ºåç§°</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">me</span><span class="operator">-&gt;</span><span class="variable">displayname</span> 
    
    <span class="comment">#éè¯·å¥½åå å¥ç¾¤ï¼</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">invite_friend</span><span class="operator">(</span> <span class="variable">$friend1</span> <span class="operator">[</span><span class="operator">,</span><span class="variable">$friend2</span><span class="operator">,...</span><span class="operator">]</span> <span class="operator">);</span> 
    
    <span class="comment">#è¸¢åºç¾¤æåï¼éè¦ç®¡çåæé</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">kick_group_member</span><span class="operator">(</span><span class="variable">$member1</span> <span class="operator">[</span><span class="operator">,</span><span class="variable">$member2</span><span class="operator">,...</span><span class="operator">]</span><span class="operator">);</span>
    
    <span class="comment">#è®¾ç½®æå®æåä¸ºç®¡çåï¼éè¦ç¾¤ä¸»èº«ä»½</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">set_group_admin</span><span class="operator">(</span><span class="variable">$member1</span> <span class="operator">[</span><span class="operator">,</span><span class="variable">$member2</span><span class="operator">,...</span><span class="operator">]</span><span class="operator">);</span>
    
    <span class="comment">#åæ¶æå®æåçç®¡çåèº«ä»½ï¼éè¦ç¾¤ä¸»èº«ä»½</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">remove_group_admin</span><span class="operator">(</span><span class="variable">$member1</span> <span class="operator">[</span><span class="operator">,</span><span class="variable">$member2</span><span class="operator">,...</span><span class="operator">]</span><span class="operator">);</span>
    
    <span class="comment">#å¯¹æå®çç¾¤æåè¿è¡ç¦è¨ï¼ç¦è¨æ¶é´åä½ä¸ºç§ï¼å»ºè®®å°½éæ¯åéçæ´æ°åï¼æå°60ç§</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">shutup_group_member</span><span class="operator">(</span><span class="number">60</span><span class="operator">,</span><span class="variable">$member1</span> <span class="operator">[</span><span class="operator">,</span><span class="variable">$member2</span><span class="operator">,...</span><span class="operator">]</span><span class="operator">);</span>
    
    <span class="comment">#å¯¹æå®çç¾¤æååæ¶ç¦è¨æä½</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">speakup_group_member</span><span class="operator">(</span><span class="variable">$member1</span> <span class="operator">[</span><span class="operator">,</span><span class="variable">$member2</span><span class="operator">,...</span><span class="operator">]</span><span class="operator">);</span>
    
    <span class="comment">#è®¾ç½®èªå·±çç¾¤åç</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">set_group_member_card</span><span class="operator">(</span><span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">me</span><span class="operator">,</span> <span class="variable">$card</span><span class="operator">);</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">me</span><span class="operator">-&gt;</span><span class="variable">set_card</span><span class="operator">(</span><span class="variable">$card</span><span class="operator">);</span>
    
    <span class="comment">#åæ¶ç¾¤åç</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">me</span><span class="operator">-&gt;</span><span class="variable">set_card</span><span class="operator">(</span><span class="keyword">undef</span><span class="operator">);</span>
    
    <span class="comment">#è®¾ç½®ç¾¤æåçç¾¤åçï¼éè¦ç®¡çåæé</span>
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">set_group_member_card</span><span class="operator">(</span><span class="variable">$member</span><span class="operator">,</span><span class="variable">$card</span><span class="operator">);</span> 
</code></pre>

<h2 id="Mojo::Webqq::Group::Member">Mojo::Webqq::Group::Member &#x7FA4;&#x6210;&#x5458;</h2>

<pre><code>    &#x5C5E;&#x6027;&#xFF1A;

    nick            #&#x7FA4;&#x6210;&#x5458;&#x6635;&#x79F0;
    type            #&#x56FA;&#x5B9A;&#x503C;&quot;group_member&quot;
    province        #&#x7701;&#x4EFD;
    gender          #&#x6027;&#x522B;
    id              #&#x552F;&#x4E00;id&#xFF0C;&#x4EC5;&#x5728;&#x672C;&#x6B21;&#x767B;&#x5F55;&#x671F;&#x95F4;&#x552F;&#x4E00;&#xFF0C;&#x591A;&#x6B21;&#x767B;&#x5F55;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;
    country         #&#x56FD;&#x5BB6;
    city            #&#x57CE;&#x5E02;
    card            #&#x7FA4;&#x540D;&#x7247;
    displayname     #&#x8BBE;&#x7F6E;&#x4E86;card&#x5C31;&#x8FD4;&#x56DE;card&#x5426;&#x5219;&#x8FD4;&#x56DE;nick
    state           #&#x72B6;&#x6001;
    client_type     #&#x5BA2;&#x6237;&#x7AEF;&#x7C7B;&#x578B;
    qq              #qq&#x53F7;&#x7801;&#xFF0C;&#x5F53;&#x524D;&#x83B7;&#x53D6;qq&#x53F7;&#x7B2C;&#x4E00;&#x6B21;&#x90FD;&#x9700;&#x8981;&#x5B9E;&#x65F6;&#x8C03;&#x7528;api&#x83B7;&#x53D6;&#xFF0C;&#x6548;&#x7387;&#x8F83;&#x4F4E;&#xFF0C;&#x5E94;&#x907F;&#x514D;&#x4F7F;&#x7528;
    qage            #q&#x9F84;
    join_time       #&#x5165;&#x7FA4;&#x65F6;&#x95F4;
    last_speak_time #&#x6700;&#x540E;&#x53D1;&#x8A00;&#x65F6;&#x95F4;
    level           #&#x7B49;&#x7EA7; &#x704C;&#x6C34;|&#x4F20;&#x8BF4;|&#x6F5C;&#x6C34; &#x7B49;
    role            #&#x89D2;&#x8272; admin|owner|member
    bad_record      #&#x662F;&#x5426;&#x5305;&#x542B;&#x4E0D;&#x826F;&#x8BB0;&#x5F55; 0|1
    gid             #&#x6240;&#x5728;&#x7FA4;&#x7684;id
    gtype           #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x7C7B;&#x578B;
    gnumber         #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x7FA4;&#x53F7;&#x7801;
    gname           #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x540D;&#x79F0;
    gmemo           #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x8BF4;&#x660E;
    gcreatetime     #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x521B;&#x5EFA;&#x65F6;&#x95F4;
    glevel          #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x7B49;&#x7EA7;
    gowner          #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x62E5;&#x6709;&#x8005;id
    gmarkname       #&#x6240;&#x5728;&#x7FA4;&#x7684;&#x5907;&#x6CE8;&#x540D;&#x79F0;

    &#x65B9;&#x6CD5;:
    send            #&#x7ED9;&#x7FA4;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x6D88;&#x606F; $member-&gt;send(&quot;hello world&quot;)
    dump
    is_me           #&#x5224;&#x65AD;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x7FA4;&#x4E2D;&#x7684;&#x81EA;&#x5DF1;
    is_group_member #&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x7FA4;&#x5BF9;&#x8C61;
    set_card        #&#x8BBE;&#x7F6E;&#x7FA4;&#x540D;&#x7247;&#xFF0C;&#x8BBE;&#x7F6E;&#x5176;&#x4ED6;&#x7FA4;&#x6210;&#x5458;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650;
    group           #&#x83B7;&#x53D6;&#x6210;&#x5458;&#x6240;&#x5C5E;&#x7684;&#x7FA4;&#x5BF9;&#x8C61;</code></pre>

<h2 id="Mojo::Webqq::Discuss">Mojo::Webqq::Discuss &#x8BA8;&#x8BBA;&#x7EC4;</h2>

<pre><code>    &#x5C5E;&#x6027;&#xFF1A;

    did         #&#x8BA8;&#x8BBA;&#x7EC4;id
    type        #&#x56FA;&#x5B9A;&#x503C;&quot;discuss&quot;
    dname       #&#x8BA8;&#x8BBA;&#x7EC4;&#x540D;&#x79F0;
    displayname #&#x5F53;&#x524D;&#x8FD4;&#x56DE;&#x7684;&#x548C;dname&#x4E00;&#x6837;
    downer      #&#x8BA8;&#x8BBA;&#x7EC4;&#x5EFA;&#x7ACB;&#x8005;id
    member      #&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#xFF0C;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x5F15;&#x7528;&#xFF0C;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x4E00;&#x4E2A;Mojo::Webqq::Discuss::Member&#x5BF9;&#x8C61;

    &#x65B9;&#x6CD5;:

    search_discuss_member   #&#x641C;&#x7D22;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;
    each_discuss_member     #&#x904D;&#x5386;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;
    members                 #&#x8FD4;&#x56DE;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x5217;&#x8868;
    send                    #&#x7ED9;&#x8BA8;&#x8BBA;&#x7EC4;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x6D88;&#x606F;
    me                      #&#x83B7;&#x53D6;&#x81EA;&#x5DF1;&#x5728;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E2D;&#x7684;&#x5BF9;&#x8C61; (Mojo::Webqq::Discuss::Member)
    dump
    is_discuss          </code></pre>

<h2 id="Mojo::Webqq::Discuss::Member">Mojo::Webqq::Discuss::Member &#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;</h2>

<pre><code>    &#x5C5E;&#x6027;&#xFF1A;

    nick
    type                    #&#x56FA;&#x5B9A;&#x503C;&quot;discuss_member&quot;
    id
    qq
    ruin
    state
    client_type
    dname
    displayname             #&#x5F53;&#x524D;&#x548C;dname&#x4E00;&#x6837;
    did
    downer

    &#x65B9;&#x6CD5;&#xFF1A;
    send                    #&#x7ED9;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x53D1;&#x9001;&#x4E34;&#x65F6;&#x6D88;&#x606F;
    dump
    is_me                   #&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E2D;&#x7684;&#x81EA;&#x5DF1;
    is_discuss_member
    discuss                 #&#x83B7;&#x53D6;&#x6210;&#x5458;&#x6240;&#x5C5E;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x5BF9;&#x8C61;</code></pre>

<h1 id="1">&#x6D88;&#x606F;&#x7C7B;&#x578B;</h1>

<p>&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x4E3B;&#x8981;&#x5305;&#x542B;&#x597D;&#x53CB;&#x6D88;&#x606F;&#x3001;&#x7FA4;&#x6D88;&#x606F;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;&#x3001;&#x7FA4;&#x4E34;&#x65F6;&#x6D88;&#x606F;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E34;&#x65F6;&#x6D88;&#x606F;</p>

<p>&#x6240;&#x6709;&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x90FD;&#x7EE7;&#x627F;Mojo::Webqq::Message::Base&#xFF0C;&#x5177;&#x5907;dump&#x65B9;&#x6CD5;</p>

<p>&#x6D88;&#x606F;&#x7684;&#x5BF9;&#x8C61;&#x5747;&#x7531;&#x7CFB;&#x7EDF;&#x521B;&#x5EFA;&#x548C;&#x7EF4;&#x62A4;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x6D88;&#x606F;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x53EA;&#x8BFB;&#x64CD;&#x4F5C;&#x5373;&#x53EF;</p>

<h2 id="Mojo::Webqq::Message::Recv::Message">Mojo::Webqq::Message::Recv::Message &#x63A5;&#x6536;&#x5230;&#x7684;&#x597D;&#x53CB;&#x6D88;&#x606F;</h2>

<pre><code>    å±æ§<span class="operator">:</span>
    
    <span class="variable">type</span>            <span class="comment">#å¸¸é"message"</span>
    <span class="variable">msg_class</span>       <span class="comment">#å¸¸é"recv"</span>
    <span class="variable">msg_from</span>        <span class="comment">#æ¶æ¯çæ¥æºï¼æ¯å¦æ¥èªæä¸ªæä»¶ï¼å¯èªç±å®ä¹ï¼é»è®¤"none"</span>
    <span class="variable">ttl</span>             <span class="comment">#é»è®¤å¼5 å½ttlåä¸º0ä¼è¢«æ¶æ¯éåä¸¢å¼</span>
    <span class="variable">allow_plugin</span>    <span class="comment">#é»è®¤1</span>
    <span class="variable">msg_id</span>          <span class="comment">#æ¶æ¯id</span>
    <span class="variable">sender_id</span>       <span class="comment">#åéèid</span>
    <span class="variable">receiver_id</span>     <span class="comment">#æ¥æ¶èid</span>
    <span class="variable">sender</span>          <span class="comment">#åéèå¯¹è±¡ï¼Mojo::Webqq::Friend</span>
    <span class="variable">receiver</span>        <span class="comment">#æ¥æ¶èå¯¹è±¡ï¼Mojo::Webqq::User</span>
    <span class="variable">msg_time</span>        <span class="comment">#æ¶æ¯åéæ¶é´</span>
    <span class="variable">content</span>         <span class="comment">#æ¶æ¯åå®¹</span>
    <span class="variable">text</span>            <span class="comment">#çº¯ææ¬æ¶æ¯åå®¹ï¼ä¸åå«è¡¨æå¾çç­</span>
    <span class="variable">raw_content</span>     <span class="comment">#æ¶æ¯åå§åå®¹ ä¸ä¸ªæ°ç»å¼ç¨</span>
    
    æ¹æ³ï¼
    <span class="keyword">dump</span>            <span class="comment">#æå°æ¶æ¯ç»æï¼ä¸»è¦ç¨äºè°è¯</span>
    <span class="variable">to_json_hash</span>    <span class="comment">#å°æ¶æ¯è½¬æ¢ä¸ºjsonå¼å®¹çhashï¼æ¹ä¾¿åå¤é¨ç³»ç»äº¤äº</span>
                    <span class="comment">#å¸¸è§çæ¥æ¶ååéæ¶æ¯é½æ¯æè¯¥æ¹æ³ï¼ä¸æä¸åèµè¿°</span>
    <span class="variable">is_at</span>           <span class="comment">#æ¶æ¯æ¯å¦è¾ç¹æäººï¼å¸¸è§çæ¥æ¶ååéæ¶æ¯é½æ¯æè¯¥æ¹æ³ï¼ä¸æä¸åèµè¿°</span>
    <span class="variable">faces</span>           <span class="comment">#è¿åæ¶æ¯ä¸­çè¡¨æåå®¹</span>
    <span class="variable">images</span>          <span class="comment">#è·åå°æ¶æ¯ä¸­å¾çåå®¹åæ§è¡æå®åè°ï¼éåå¯¹å·ä½æä¸ªæ¶æ¯è¿è¡å¾çå¤ç</span>
                    <span class="comment">#åè receive_pic äºä»¶ï¼å¯ä»¥è®¾ç½®å¨å±æ¥æ¶å¾ççå¤çåè°</span>
    <span class="variable">reply</span>           <span class="comment">#å¯¹æ¶æ¯è¿è¡åå¤</span>
                    <span class="comment">#å¦æmsg_classä¸ºrecvï¼ç¸å½äºåéåå®¹ç»æ¶æ¯åéèï¼å¦æmsg_classä¸ºsendï¼ç¸å½äºåéåå®¹ç»æ¶æ¯çæ¥æ¶è</span>
    
    ç¤ºä¾ä»£ç <span class="operator">:</span>
    <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">sender</span><span class="operator">-&gt;</span><span class="variable">nick</span><span class="operator">;</span> <span class="comment">#ä»æ¥æ¶å°çå¥½åæ¶æ¯ä¸­ è·åå¥½åçæµç§° æ´å¤å¥½åç¸å³çå±æ§ï¼åèMojo::Webqq::Friend</span>
    
    <span class="keyword">use</span> <span class="variable">Mojo::JSON</span> <span class="string">qw(encode_json)</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">$json_hash</span> <span class="operator">=</span> <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">to_json_hash</span><span class="operator">();</span>    <span class="comment">#è·åå°ç»è¿utf8 decodeçhashå¼ç¨</span>
    <span class="keyword">my</span> <span class="variable">$json_text</span> <span class="operator">=</span> <span class="variable">encode_json</span><span class="operator">(</span><span class="variable">$json_hash</span><span class="operator">);</span> <span class="comment">#å°hashè½¬æ¢ä¸ºjsonå­ç¬¦ä¸²</span>
    
    <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">dump</span><span class="operator">();</span>
    <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">reply</span><span class="operator">(</span><span class="string">"hello world"</span><span class="operator">);</span> <span class="comment">#æ¯$client-&gt;reply_message($msg,"hello world")æ´ç®æ´</span>
    
    <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">is_at</span><span class="operator">();</span>          <span class="comment">#å¤æ­åéææ¥æ¶çæ¶æ¯ä¸­æ¯å¦æè¾ç¹èªå·±</span>
    <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">is_at</span><span class="operator">(</span><span class="variable">$member</span><span class="operator">);</span>   <span class="comment">#å¤æ­åéææ¥æ¶çæ¶æ¯ä¸­æ¯å¦æè¾ç¹æä¸ªæå</span>
    <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">is_at</span><span class="operator">(</span><span class="variable">$friend</span><span class="operator">);</span>   <span class="comment">#å¤æ­åéææ¥æ¶çæ¶æ¯ä¸­æ¯å¦æè¾ç¹æä¸ªå¥½å</span>
    
    <span class="keyword">my</span> <span class="variable">@faces</span> <span class="operator">=</span> <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">faces</span><span class="operator">();</span> <span class="comment">#("[å¾®ç¬]","[æµæ³ª]","[å®³ç¾]")</span>
    
    <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">images</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$image_path</span><span class="operator">,</span><span class="variable">$sender</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
    <span class="operator">});</span>
    
    <span class="comment">#å¨å±å¾çå¤çäºä»¶</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_pic</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$image_path</span><span class="operator">,</span><span class="variable">$sender</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="Mojo::Webqq::Message::Send::Message">Mojo::Webqq::Message::Send::Message &#x53D1;&#x9001;&#x7684;&#x597D;&#x53CB;&#x6D88;&#x606F;</h2>

<pre><code>    &#x5C5E;&#x6027;:

    type            #&#x5E38;&#x91CF;&quot;message&quot;
    msg_class       #&#x5E38;&#x91CF;&quot;send&quot;
    msg_from        #&#x6D88;&#x606F;&#x7684;&#x6765;&#x6E90;&#xFF0C;&#x6BD4;&#x5982;&#x6765;&#x81EA;&#x67D0;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x53EF;&#x81EA;&#x7531;&#x5B9A;&#x4E49;&#xFF0C;&#x9ED8;&#x8BA4;&quot;none&quot;
    ttl             #&#x9ED8;&#x8BA4;&#x503C;5 &#x5F53;ttl&#x51CF;&#x4E3A;0&#x4F1A;&#x88AB;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E22;&#x5F03;
    allow_plugin    #&#x9ED8;&#x8BA4;1
    msg_id          #&#x6D88;&#x606F;id
    sender_id       #&#x53D1;&#x9001;&#x8005;id
    receiver_id     #&#x63A5;&#x6536;&#x8005;id
    sender          #&#x53D1;&#x9001;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;Mojo::Webqq::User
    receiver        #&#x63A5;&#x6536;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;Mojo::Webqq::Friend
    msg_time        #&#x6D88;&#x606F;&#x53D1;&#x9001;&#x65F6;&#x95F4;
    content         #&#x6D88;&#x606F;&#x5185;&#x5BB9;
    text            #&#x7EAF;&#x6587;&#x672C;&#x6D88;&#x606F;&#x5185;&#x5BB9;&#xFF0C;&#x4E0D;&#x5305;&#x542B;&#x8868;&#x60C5;&#x56FE;&#x7247;&#x7B49;
    raw_content     #&#x6D88;&#x606F;&#x539F;&#x59CB;&#x5185;&#x5BB9; &#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x5F15;&#x7528;</code></pre>

<p>&#x548C;&#x63A5;&#x6536;&#x7684;&#x597D;&#x53CB;&#x6D88;&#x606F;&#x5177;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;</p>

<p>msg_class &#x662F;&#x5E38;&#x91CF;&quot;send&quot;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6BCF;&#x4E2A;&#x6D88;&#x606F;&#x7684;msg_class&#x5C5E;&#x6027;&#x6765;&#x5224;&#x65AD;&#x6D88;&#x606F;&#x662F;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x8FD8;&#x662F;&#x63A5;&#x6536;&#x6D88;&#x606F;</p>

<p>&#x5BF9;&#x4E8E;&#x597D;&#x53CB;&#x6D88;&#x606F;&#xFF0C;sender&#x662F;&#x81EA;&#x5DF1;(Mojo::Webqq::User) receiver&#x662F;&#x597D;&#x53CB;(Mojo::Webqq::Friend)</p>

<p>&#x5BF9;&#x4E8E;&#x7FA4;&#x6D88;&#x606F;&#xFF0C;sender&#x662F;&#x7FA4;&#x4E2D;&#x7684;&#x81EA;&#x5DF1;(Mojo::Webqq::Group::Member) receiver&#x662F;&#x7FA4;&#x6210;&#x5458;(Mojo::Webqq::Group::Member)</p>

<p>&#x5BF9;&#x4E8E;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;&#xFF0C;sender&#x662F;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E2D;&#x81EA;&#x5DF1;(Mojo::Webqq::Discuss::Member) receiver&#x662F;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;(Mojo::Webqq::Discuss::Member)</p>

<p>&#x5BF9;&#x4E8E;&#x4E34;&#x65F6;&#x6D88;&#x606F;&#xFF0C;sender&#x662F;&#x8BA8;&#x8BBA;&#x7EC4;&#x6216;&#x7FA4;&#x4E2D;&#x7684;&#x81EA;&#x5DF1; receiver&#x662F;&#x8BA8;&#x8BBA;&#x7EC4;&#x6216;&#x7FA4;&#x4E2D;&#x7684;&#x6210;&#x5458;</p>

<p>&#x5176;&#x4ED6;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x4E5F;&#x90FD;&#x5B58;&#x5728;&#x7C7B;&#x4F3C;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;</p>

<h2 id="Mojo::Webqq::Message::Recv::GroupMessage">Mojo::Webqq::Message::Recv::GroupMessage &#x63A5;&#x6536;&#x5230;&#x7684;&#x7FA4;&#x6D88;&#x606F;</h2>

<pre><code>    &#x5C5E;&#x6027;:

    type            #&#x5E38;&#x91CF;&quot;group_message&quot;
    msg_class       #&#x5E38;&#x91CF;&quot;recv&quot;
    msg_from        #&#x6D88;&#x606F;&#x7684;&#x6765;&#x6E90;&#xFF0C;&#x6BD4;&#x5982;&#x6765;&#x81EA;&#x67D0;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x53EF;&#x81EA;&#x7531;&#x5B9A;&#x4E49;&#xFF0C;&#x9ED8;&#x8BA4;&quot;none&quot;
    ttl             #&#x9ED8;&#x8BA4;&#x503C;5 &#x5F53;ttl&#x51CF;&#x4E3A;0&#x4F1A;&#x88AB;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E22;&#x5F03;
    allow_plugin    #&#x9ED8;&#x8BA4;1
    msg_id          #&#x6D88;&#x606F;id
    group_id        #&#x7FA4;gid
    sender_id       #&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x7FA4;&#x6210;&#x5458;id
    receiver_id     #&#x63A5;&#x6536;&#x8005;id&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x81EA;&#x5DF1;&#x7684;id
    sender          #&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x7FA4;&#x6210;&#x5458;&#x5BF9;&#x8C61; Mojo::Webqq::Group::Member
    eeceiver        #&#x7FA4;&#x4E2D;&#x7684;&#x81EA;&#x5DF1; Mojo::Webqq::Group::Member&#x5BF9;&#x8C61;
    group           #&#x7FA4;&#x5BF9;&#x8C61; Mojo::Webqq::Group
    msg_time        #&#x6D88;&#x606F;&#x65F6;&#x95F4;
    content         #&#x6D88;&#x606F;&#x5185;&#x5BB9;
    text            #&#x7EAF;&#x6587;&#x672C;&#x6D88;&#x606F;&#x5185;&#x5BB9;&#xFF0C;&#x4E0D;&#x5305;&#x542B;&#x8868;&#x60C5;&#x56FE;&#x7247;&#x7B49;
    raw_content</code></pre>

<h2 id="Mojo::Webqq::Message::Send::GroupMessage">Mojo::Webqq::Message::Send::GroupMessage &#x53D1;&#x9001;&#x7684;&#x7FA4;&#x6D88;&#x606F;</h2>

<h2 id="Mojo::Webqq::Message::Recv::DiscussMessage">Mojo::Webqq::Message::Recv::DiscussMessage &#x63A5;&#x6536;&#x5230;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;</h2>

<pre><code>    &#x5C5E;&#x6027;&#xFF1A;

    type            #&#x5E38;&#x91CF;&quot;discuss_message&quot;
    msg_class       #&#x5E38;&#x91CF;&quot;recv&quot;
    msg_from        #&#x6D88;&#x606F;&#x7684;&#x6765;&#x6E90;&#xFF0C;&#x6BD4;&#x5982;&#x6765;&#x81EA;&#x67D0;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x53EF;&#x81EA;&#x7531;&#x5B9A;&#x4E49;&#xFF0C;&#x9ED8;&#x8BA4;&quot;none&quot;
    ttl             #&#x9ED8;&#x8BA4;&#x503C;5 &#x5F53;ttl&#x51CF;&#x4E3A;0&#x4F1A;&#x88AB;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E22;&#x5F03;
    allow_plugin    #&#x9ED8;&#x8BA4;1
    msg_id          #&#x6D88;&#x606F;id
    discuss_id      #&#x8BA8;&#x8BBA;&#x7EC4;did
    sender_id       #&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;id
    receiver_id     #&#x81EA;&#x5DF1;&#x7684;id
    sender          #&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x5BF9;&#x8C61; Mojo::Webqq::Discuss::Member
    receiver        #&#x8BA8;&#x8BBA;&#x7EC4;&#x4E2D;&#x7684;&#x81EA;&#x5DF1; Mojo::Webqq::Group::Member&#x5BF9;&#x8C61;
    discuss         #&#x7FA4;&#x5BF9;&#x8C61; Mojo::Webqq::Discuss
    msg_time        #&#x6D88;&#x606F;&#x65F6;&#x95F4;
    content         
    text            #&#x7EAF;&#x6587;&#x672C;&#x6D88;&#x606F;&#x5185;&#x5BB9;&#xFF0C;&#x4E0D;&#x5305;&#x542B;&#x8868;&#x60C5;&#x56FE;&#x7247;&#x7B49;
    raw_content  </code></pre>

<h2 id="Mojo::Webqq::Message::Send::DiscussMessage">Mojo::Webqq::Message::Send::DiscussMessage &#x53D1;&#x9001;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;</h2>

<h2 id="Mojo::Webqq::Message::Recv::SessMessage">Mojo::Webqq::Message::Recv::SessMessage &#x63A5;&#x6536;&#x5230;&#x7684;&#x4E34;&#x65F6;&#x6D88;&#x606F;</h2>

<pre><code>    &#x5C5E;&#x6027;&#xFF1A;

    type            #&#x5E38;&#x91CF;&quot;sess_message&quot;
    msg_class       #&#x5E38;&#x91CF;&quot;recv&quot;
    msg_from        #&#x6D88;&#x606F;&#x7684;&#x6765;&#x6E90;&#xFF0C;&#x6BD4;&#x5982;&#x6765;&#x81EA;&#x67D0;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x53EF;&#x81EA;&#x7531;&#x5B9A;&#x4E49;&#xFF0C;&#x9ED8;&#x8BA4;&quot;none&quot;
    ttl             #&#x9ED8;&#x8BA4;&#x503C;5 &#x5F53;ttl&#x51CF;&#x4E3A;0&#x4F1A;&#x88AB;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E22;&#x5F03;
    allow_plugin    #&#x9ED8;&#x8BA4;1
    msg_id          #&#x6D88;&#x606F;id
    group_id        #&#x7FA4;gid
    discuss_id      #&#x8BA8;&#x8BBA;&#x7EC4;did
    sender_id       #&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;id&#x6216;&#x7FA4;&#x6210;&#x5458;id
    receiver_id     #Mojo::Webqq::User&#x5BF9;&#x8C61;
    sender          #&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x6216;&#x7FA4;&#x6210;&#x5458;&#x5BF9;&#x8C61;
    group           #&#x7FA4;&#x5BF9;&#x8C61; Mojo::Webqq::Group
    discuss         #&#x8BA8;&#x8BBA;&#x7EC4;&#x5BF9;&#x8C61; Mojo::Webqq::Discuss
    receiver        #&#x7FA4;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x5BF9;&#x8C61;
    msg_time        #&#x6D88;&#x606F;&#x65F6;&#x95F4;
    content         
    text            #&#x7EAF;&#x6587;&#x672C;&#x6D88;&#x606F;&#x5185;&#x5BB9;&#xFF0C;&#x4E0D;&#x5305;&#x542B;&#x8868;&#x60C5;&#x56FE;&#x7247;&#x7B49;
    raw_content
    via             #&#x5982;&#x679C;&#x662F;&#x7FA4;&#x4E34;&#x65F6;&#x6D88;&#x606F; &#x5219;&#x662F;&quot;group&quot; &#x5982;&#x679C;&#x662F;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E34;&#x65F6;&#x6D88;&#x606F;&#x5219;&#x662F;&quot;discuss&quot;</code></pre>

<h2 id="Mojo::Webqq::Message::Send::SessMessage">Mojo::Webqq::Message::Send::SessMessage &#x53D1;&#x9001;&#x7684;&#x4E34;&#x65F6;&#x6D88;&#x606F;</h2>

<h2 id="Mojo::Webqq::Message::Send::Status">Mojo::Webqq::Message::Send::Status &#x53D1;&#x9001;&#x6D88;&#x606F;&#x72B6;&#x6001;</h2>

<pre><code>    &#x5C5E;&#x6027;&#xFF1A;

    code    #0 &#x8868;&#x793A;&#x6210;&#x529F; &#x975E;&#x96F6;&#x8868;&#x793A;&#x5931;&#x8D25;
    msg     #&quot;&#x53D1;&#x9001;&#x6210;&#x529F;&quot;|&quot;&#x53D1;&#x9001;&#x5931;&#x8D25;&quot;
    
    &#x65B9;&#x6CD5;:
    is_success

    &#x8BE5;&#x6D88;&#x606F;&#x7ED3;&#x6784;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x662F;&#x5426;&#x6210;&#x529F;</code></pre>

<h1 id="2">&#x5BA2;&#x6237;&#x7AEF;&#x5C5E;&#x6027;</h1>

<pre><code>    $client-&gt;security   #&#x662F;&#x5426;&#x5F00;&#x542F;&#x5B89;&#x5168;&#x52A0;&#x5BC6;
    $client-&gt;state      #&#x767B;&#x5F55;&#x72B6;&#x6001;
    $client-&gt;type       #&#x7C7B;&#x578B; &#x56FA;&#x5B9A;&#x503C; smartqq&#xFF0C;Mojo::Webqq&#x53EA;&#x652F;&#x6301;smartqq
    $client-&gt;ua_debug   #http&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x6253;&#x5370;debug&#x4FE1;&#x606F;
    $client-&gt;log_level  #&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x7B49;&#x7EA7; &#x9ED8;&#x8BA4;info
    $client-&gt;log_path   #&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x8DEF;&#x5F84;&#xFF0C;&#x9ED8;&#x8BA4;undef&#xFF0C;&#x6253;&#x5370;&#x5230;STDERR
    $client-&gt;version    #&#x5BA2;&#x6237;&#x7AEF;&#x7248;&#x672C;
    $client-&gt;qq         #&#x767B;&#x5F55;&#x5E10;&#x53F7;
    $client-&gt;encrypt_method        #perl|js &#x767B;&#x5F55;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x4F1A;&#x81EA;&#x52A8;&#x9009;&#x62E9;</code></pre>

<h1 id="3">&#x5BA2;&#x6237;&#x7AEF;&#x65B9;&#x6CD5;</h1>

<h2 id="new">new()</h2>

<pre><code>    <span class="string">qq              #ç»å½çqqå·ï¼å¿é
    pwd             #</span>ä½¿ç¨å¸å·å¯ç ç»å½æ¶ï¼<span class="keyword">qq</span>å·å¯¹åºå¯ç ç<span class="number">32</span>ä½<span class="variable">md5</span>
    <span class="variable">security</span>        <span class="comment">#è®¾ç½®è¯¥åæ°ï¼å°ä½¿å¾åéåæ¥æ¶æ¶æ¯ä½¿ç¨httpså å¯</span>
    <span class="keyword">state</span>           <span class="comment">#è®¾ç½®ç»å½ç¶æï¼é»è®¤æ¯onlineï¼æ¯æonline|away|busy|silent|hidden|offline</span>
    <span class="variable">ua_debug</span>        <span class="comment">#è®¾ç½®è¯¥åæ°ï¼æå°è°è¯ä¿¡æ¯</span>
    <span class="variable">keep_cookie</span>     <span class="comment">#é»è®¤ä¸º1ï¼0è¡¨ç¤ºä¸ä¿å­ç»å½cookieï¼1è¡¨ç¤ºä¿å­ç»å½cookieæ¹ä¾¿ä¸æ¬¡ç´æ¥æ¢å¤ç»å½</span>
    
    <span class="variable">log_level</span>       <span class="comment">#é»è®¤çº§å«ä¸ºinfoï¼å¯ä»¥è®¾ç½®debug|info|warn|error|fatal</span>
    <span class="variable">log_path</span>        <span class="comment">#é»è®¤å®¢æ·ç«¯è¾åºåå®¹æå°å°STDERR è®¾ç½®è¯¥åæ°å¯ä»¥å°å®¢æ·ç«¯è¾åºéå®åå°æä»¶</span>
    <span class="variable">log_encoding</span>    <span class="comment">#è¾åºæ¥å¿çç¼ç ï¼é»è®¤èªå¨æ£æµï¼å¦æåºç°ä¹±ç å¯ä»¥å°è¯æå¨è®¾ç½®ä¸ä¸è¾åºç¼ç </span>
                    <span class="comment">#ç¼ç å¿é¡»æ¯ Encode æ¨¡åæ¯æçæ ¼å¼ï¼æ¯å¦utf8 gbkç­</span>
    <span class="variable">max_recent</span>      <span class="comment">#ä¿å­çæè¿èç³»äººä¸ªæ°ï¼é»è®¤20</span>
    
    <span class="variable">login_type</span>      <span class="comment">#"qrlogin"è¡¨ç¤ºä½¿ç¨äºç»´ç ç»å½ï¼"login"è¡¨ç¤ºå¸å·å¯ç ç»å½ï¼é»è®¤ä¸º"qrlogin"</span>
    <span class="variable">encrypt_method</span>  <span class="comment">#perl|js ç³»ç»ä¼èªå¨å¤æ­ï¼ä¸è¬æåµä¸ä½ ä¸éè¦èªå·±è®¾ç½®ç»å½å å¯ç®æ³</span>
    
    <span class="variable">tmpdir</span>          <span class="comment">#ç¨åºä½¿ç¨çä¸´æ¶ç®å½ï¼ä¸»è¦ç¨äºä¿å­ä¸äºéªè¯ç ãäºç»´ç ç­æ°æ®ï¼é»è®¤ä¸ºç³»ç»ä¸´æ¶ç®å½</span>
    <span class="variable">cookie_dir</span>      <span class="comment">#ç»å½cookieçä¿å­ç®å½ï¼é»è®¤ä¸º tmpdir åæ°æè®¾ç½®çç®å½</span>
    <span class="variable">pic_dir</span>         <span class="comment">#å¾çæ¥æ¶é»è®¤å°åï¼é»è®¤ä¸º tmpdir åæ°æè®¾ç½®çç®å½</span>
    
    <span class="variable">verifycode_path</span> <span class="comment">#å¾çéªè¯ç ä¿å­è·¯å¾ï¼é»è®¤æ¯ tmpdir ç®å½ä¸åºå®æä»¶å</span>
    <span class="variable">qrcode_path</span>     <span class="comment">#äºç»´ç ä¿å­è·¯å¾ï¼é»è®¤æ¯ tmpdir ç®å½ä¸åºå®æä»¶å</span>
    
    <span class="comment">#ç¨åºä¼æ ¹æ®å®ééè¦èªå¨æéå è½½å¥½åãç¾¤ãè®¨è®ºç»ä¿¡æ¯ï¼é¦æ¬¡ç»å½å è½½è¿äºä¿¡æ¯æ¯ä¸å¿é¡»ç</span>
    <span class="comment">#å¦æä½ çç¾¤ç»æ°ééå¸¸æäººï¼é¦æ¬¡å è½½ä¼ä¸¥éå½±åè¿è¡éåº¦ï¼è¿ç§æåµä¸å»ºè®®éæ©æ§çåæ¶æäºé»è®¤å è½½è¡ä¸º</span>
    
    <span class="variable">is_init_friend</span>      <span class="comment">#æ¯å¦å¨é¦æ¬¡ç»å½æ¶åå§åå¥½åä¿¡æ¯ï¼é»è®¤å¼ 1</span>
    <span class="variable">is_init_group</span>       <span class="comment">#æ¯å¦å¨é¦æ¬¡ç»å½æ¶åå§åç¾¤ç»ä¿¡æ¯ï¼é»è®¤å¼ 1</span>
    <span class="variable">is_init_discuss</span>     <span class="comment">#æ¯å¦å¨é¦æ¬¡ç»å½æ¶åå§åè®¨è®ºç»ä¿¡æ¯ï¼é»è®¤å¼ 1</span>
    <span class="variable">is_init_recent</span>      <span class="comment">#æ¯å¦å¨é¦æ¬¡ç»å½æ¶åå§åæè¿èç³»äººä¿¡æ¯ï¼é»è®¤å¼ 0</span>
    
    <span class="comment">#ç¨åºä¼å®ææ´æ°ä¸ªäººãå¥½åãç¾¤ãè®¨è®ºç»ä¿¡æ¯ï¼ç®çæ¯ä¸ºäºå¯ä»¥æç¥æ°å¢çæåãå¤±å»çå¥½åç­</span>
    <span class="comment">#å¦æä½ å®å¨ä¸å³æ³¨è¿äºç¹æ§ï¼å¯ä»¥å³é­å®ææ´æ°</span>
    <span class="variable">is_update_user</span>      <span class="comment">#æ¯å¦å®ææ´æ°ä¸ªäººä¿¡æ¯ï¼é»è®¤å¼ 0</span>
    <span class="variable">is_update_group</span>     <span class="comment">#æ¯å¦å®ææ´æ°ç¾¤ç»ä¿¡æ¯ï¼é»è®¤å¼ 1</span>
    <span class="variable">is_update_friend</span>    <span class="comment">#æ¯å¦å®ææ´æ°å¥½åä¿¡æ¯ï¼é»è®¤å¼ 1</span>
    <span class="variable">is_update_discuss</span>   <span class="comment">#æ¯å¦å®ææ´æ°è®¨è®ºç»ä¿¡æ¯ï¼é»è®¤å¼ 1</span>
    
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="string">ua_debug</span><span class="operator">=&gt;</span><span class="number">0</span><span class="operator">,</span><span class="string">qq</span><span class="operator">=&gt;</span><span class="variable">xxxxxx</span><span class="operator">,</span><span class="string">login_type</span><span class="operator">=&gt;</span><span class="string">"qrlogin"</span><span class="operator">);</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="string">ua_debug</span><span class="operator">=&gt;</span><span class="number">0</span><span class="operator">,</span><span class="string">qq</span><span class="operator">=&gt;</span><span class="variable">xxxxxx</span><span class="operator">,</span><span class="string">pwd</span><span class="operator">=&gt;</span><span class="variable">xxxxx</span><span class="operator">,</span><span class="string">login_type</span><span class="operator">=&gt;</span><span class="string">"login"</span><span class="operator">);</span>
</code></pre>

<h2 id="on">on()</h2>

<p>&#x57FA;&#x4E8E;Mojo::EventEmitter&#x7684;&#x4E8B;&#x4EF6;&#x6CE8;&#x518C;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x652F;&#x6301;&#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x4E8B;&#x4EF6;&#x56DE;&#x8C03;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">"event1"</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{...},</span><span class="string">"event2"</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{...},);</span>
</code></pre>

<p>&#x53C2;&#x8003;&#x4E0B;&#x6587;&#x5BA2;&#x6237;&#x7AEF;&#x652F;&#x6301;&#x7684;&#x4E8B;&#x4EF6;</p>

<h2 id="login">login()</h2>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x767B;&#x5F55;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">login</span><span class="operator">(</span><span class="operator">[</span><span class="string">delay</span><span class="operator">=&gt;</span><span class="number">0</span><span class="operator">|</span><span class="number">1</span><span class="operator">]</span><span class="operator">);</span>    
    
    <span class="variable">delay</span>  å¯é<span class="operator">,</span><span class="number">0</span>è¡¨ç¤ºä¸å»¶è¿ï¼ç«å³ç»å½ <span class="number">1</span>è¡¨ç¤ºå¨<span class="variable">after_load_plugin</span>äºä»¶è§¦ååç»å½ï¼å³å¨é¨æä»¶å è½½å®æ¯ååæ§è¡ç»å½<span class="operator">,</span>é»è®¤å¼ä¸º<span class="number">0</span>
</code></pre>

<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5E10;&#x53F7;&#x5BC6;&#x7801;&#x7684;&#x767B;&#x5F55;&#x65B9;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x4F9D;&#x8D56;<a>Webqq::Encryption</a>&#x6A21;&#x5757;</p>

<p>&#x63A8;&#x8350;&#x5B89;&#x88C5;<a>Crypt::RSA</a> &#x6216;&#x8005; <a>Crypt::OpenSSL::RSA</a> + <a>Crypt::OpenSSL::Bignum</a>&#x6A21;&#x5757;</p>

<p>&#x80FD;&#x591F;&#x6781;&#x5927;&#x7684;&#x63D0;&#x5347;<a>Webqq::Encryption</a>&#x767B;&#x5F55;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x7684;&#x8BA1;&#x7B97;&#x901F;&#x5EA6;&#xFF08;Centos&#x53EF;&#x4EE5;&#x4F7F;&#x7528; yum -y install perl-Crypt-OpenSSL-* &#x6765;&#x65B9;&#x4FBF;&#x5B89;&#x88C5;&#xFF09;</p>

<h2 id="relogin">relogin() &#x91CD;&#x65B0;&#x767B;&#x5F55;</h2>

<p>&#x91CD;&#x65B0;&#x767B;&#x5F55;&#x524D;&#xFF0C;&#x4F1A;&#x5148;&#x6E05;&#x7A7A;&#x767B;&#x5F55;&#x76F8;&#x5173;cookie&#xFF0C;&#x597D;&#x53CB;&#x3001;&#x7FA4;&#x7B49;&#x6570;&#x636E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x5FC5;&#x8981;&#x65F6;&#x9ED8;&#x8BA4;&#x4F1A;&#x81EA;&#x52A8;&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x767B;&#x5F55;</p>

<pre><code>    $client-&gt;relogin()</code></pre>

<h2 id="timer-seconds-callback">timer($seconds,$callback) &#x5B9A;&#x65F6;&#x6267;&#x884C;</h2>

<p>&#x6307;&#x5B9A;&#x591A;&#x5C11;&#x79D2;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x5BF9;&#x5E94;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">timer</span><span class="operator">(</span><span class="number">10</span><span class="operator">,</span><span class="keyword">sub</span><span class="operator">{</span> <span class="keyword">print</span> <span class="string">"hello world\n"</span> <span class="operator">});</span> <span class="comment">#10såæå°hello world</span>
</code></pre>

<h2 id="interval-seconds-callback">interval($seconds,$callback) &#x95F4;&#x9694;&#x6267;&#x884C;</h2>

<p>&#x8BBE;&#x7F6E;&#x6BCF;&#x9694;&#x591A;&#x5C11;&#x79D2;&#x91CD;&#x590D;&#x6267;&#x884C;&#x5BF9;&#x5E94;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">interval</span><span class="operator">(</span><span class="number">10</span><span class="operator">,</span><span class="keyword">sub</span><span class="operator">{</span> <span class="keyword">print</span> <span class="string">"hello world\n"</span> <span class="operator">});</span> <span class="comment">#æ¯é10såæå°hello world</span>
</code></pre>

<h2 id="run">run() &#x542F;&#x52A8;&#x4E3B;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;</h2>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x5165;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#xFF0C;&#x6B63;&#x5F0F;&#x5F00;&#x59CB;&#x8FD0;&#x884C;&#xFF0C;&#x4E00;&#x822C;&#x653E;&#x5728;&#x4EE3;&#x7801;&#x7684;&#x6700;&#x540E;&#xFF0C;&#x4E0D;&#x53EF;&#x6216;&#x7F3A;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">run</span><span class="operator">();</span>
</code></pre>

<h2 id="multi_run">multi_run() &#x542F;&#x52A8;&#x4E3B;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;(&#x591A;&#x5E10;&#x53F7;)</h2>

<p>&#x767B;&#x5F55;&#x591A;&#x4E2A;qq&#x5E10;&#x53F7;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x8BE6;&#x60C5;&#x53C2;&#x89C1;ready()&#x65B9;&#x6CD5;&#x4ECB;&#x7ECD;</p>

<h2 id="ready">ready() &#x53EA;&#x51C6;&#x5907;&#x4E0D;&#x8FD0;&#x884C;</h2>

<p>&#x5F53;&#x4F60;&#x60F3;&#x8981;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x591A;&#x4E2A;qq&#x5E10;&#x53F7; $client-&gt;run()&#x4F1A;&#x963B;&#x585E;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x5E10;&#x53F7;</p>

<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x653E;&#x5F03;&#x4F7F;&#x7528;$client-&gt;run() &#x4F60;&#x4F1A;&#x9700;&#x8981;ready()&#x65B9;&#x6CD5;</p>

<pre><code>    <span class="comment">#åæ¶ç»å½å¤ä¸ªqqå¸å·</span>
    <span class="keyword">my</span> <span class="variable">$client1</span> <span class="operator">=</span> <span class="variable">Mojo::Webqq</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="string">qq</span><span class="operator">=&gt;</span><span class="variable">xxx1</span><span class="operator">);</span>
    <span class="keyword">my</span> <span class="variable">$client2</span> <span class="operator">=</span> <span class="variable">Mojo::Webqq</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="string">qq</span><span class="operator">=&gt;</span><span class="variable">xxx2</span><span class="operator">);</span>
    
    <span class="variable">$client1</span><span class="operator">-&gt;</span><span class="variable">login</span><span class="operator">();</span>
    <span class="variable">$client2</span><span class="operator">-&gt;</span><span class="variable">login</span><span class="operator">();</span>
    
    <span class="variable">$client1</span><span class="operator">-&gt;</span><span class="variable">ready</span><span class="operator">;</span>
    <span class="variable">$client2</span><span class="operator">-&gt;</span><span class="variable">ready</span><span class="operator">;</span>
    
    <span class="variable">Mojo::Webqq</span><span class="operator">-&gt;</span><span class="variable">multi_run</span><span class="operator">();</span> 
</code></pre>

<h2 id="stop-auto-noexit">stop([&quot;auto&quot;|&quot;noexit&quot;]) &#x505C;&#x6B62;&#x6536;&#x53D1;&#x6D88;&#x606F;</h2>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x7EC8;&#x6B62;&#x63A5;&#x6536;&#x548C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#xFF0C;&#x5176;&#x4ED6;&#x975E;&#x63A5;&#x6536;&#x548C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7C7B;&#x7684;&#x529F;&#x80FD;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x6267;&#x884C;</p>

<pre><code>    $client-&gt;stop([&quot;auto&quot;]) #&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#x662F;auto&#xFF0C;&#x5F53;&#x591A;&#x4E2A;qq&#x5E10;&#x53F7;&#x5BA2;&#x6237;&#x7AEF;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;stop&#x65F6;&#xFF0C;&#x6574;&#x4E2A;&#x7A0B;&#x5E8F;&#x4E5F;&#x4F1A;&#x9000;&#x51FA;(exit)
    $client-&gt;stop(&quot;noexit&quot;) #&#x5373;&#x4F7F;&#x6240;&#x6709;&#x7684;qq&#x5E10;&#x53F7;&#x90FD;stop&#x4E86;&#xFF0C;&#x6574;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x4E5F;&#x4E0D;&#x8C03;&#x7528;exit&#x9000;&#x51FA;</code></pre>

<h2 id="add_job-job_name-time-callback">add_job($job_name,$time,$callback); &#x6307;&#x5B9A;&#x65F6;&#x523B;&#x6267;&#x884C;</h2>

<p>&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x4EFB;&#x52A1;</p>

<pre><code>    <span class="comment">#æ¯æçæ¶é´æ ¼å¼ä¸º HH:MM æ HH:MM:SS</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">add_job</span><span class="operator">(</span><span class="string">"å®æ¶æé"</span><span class="operator">,</span><span class="string">"07:00"</span><span class="operator">,</span><span class="keyword">sub</span><span class="operator">{</span><span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_message</span><span class="operator">(</span><span class="variable">$friend</span><span class="operator">,</span><span class="string">"èµ·åºå¦"</span><span class="operator">);});</span>
</code></pre>

<h2 id="spawn-opt">spawn(%opt) &#x6267;&#x884C;&#x5916;&#x90E8;&#x547D;&#x4EE4;</h2>

<p>&#x5728;&#x5355;&#x72EC;&#x7684;&#x8FDB;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x6216;&#x547D;&#x4EE4;</p>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x91C7;&#x7528;&#x7684;&#x662F;&#x5355;&#x8FDB;&#x7A0B;&#x5F02;&#x6B65;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x6267;&#x884C;system/exec&#x7B49;&#x6765;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x547D;&#x4EE4;</p>

<p>&#x6216;&#x8005;&#x6267;&#x884C;&#x67D0;&#x4E9B;&#x963B;&#x585E;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6BD4;&#x5982;sleep&#x7B49; &#x5747;&#x4F1A;&#x5BFC;&#x81F4;&#x5BA2;&#x6237;&#x7AEF;&#x4E3B;&#x8FDB;&#x7A0B;&#x88AB;&#x963B;&#x585E;&#x800C;&#x5F71;&#x54CD;&#x6B63;&#x5E38;&#x63A5;&#x6536;&#x548C;&#x53D1;&#x9001;&#x6D88;&#x606F;</p>

<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x7684;spawn&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x963B;&#x585E;&#x7684;&#x4EE3;&#x7801;&#x653E;&#x7F6E;&#x5230;&#x5355;&#x72EC;&#x7684;&#x8FDB;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#xFF0C;&#x6355;&#x83B7;&#x8FDB;&#x7A0B;&#x7684;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x548C;&#x6807;&#x51C6;&#x9519;&#x8BEF;</p>

<p>&#x5728;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x8FDB;&#x7A0B;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;</p>

<p>&#x8BE5;&#x65B9;&#x6CD5;&#x5B9E;&#x9645;&#x4E0A;&#x53C2;&#x8003;<a>Mojo::Run</a>&#x6A21;&#x5757; &#x5E76;&#x5728;&#x8BE5;&#x6A21;&#x5757;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x505A;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x5B8C;&#x5584;</p>

<pre><code>    <span class="comment">#æ¯æçåæ°ï¼</span>
    <span class="variable">max_forks</span>       <span class="comment">#äº§ççæå¤§è¿ç¨æ°</span>
    <span class="variable">cmd</span>             <span class="comment">#è¦æ§è¡çå½ä»¤æä»£ç </span>
    <span class="variable">param</span>           <span class="comment">#å½ä»¤çåæ°</span>
    <span class="variable">exec_timeout</span>    <span class="comment">#å½ä»¤æä»£ç çæ§è¡è¶æ¶æ¶é´</span>
    <span class="variable">stdout_cb</span>       <span class="comment">#å½ä»¤æä»£ç æ§è¡è¿ç¨ä¸­ STDOUT ä¸æ¦ææ°æ®åä¼è§¦åæ­¤åè°</span>
    <span class="variable">stderr_cb</span>       <span class="comment">#å½ä»¤æä»£ç æ§è¡è¿ç¨ä¸­ STDERR ä¸æ¦ææ°æ®åä¼è§¦åæ­¤åè°</span>
    <span class="variable">exit_cb</span>         <span class="comment">#å½ä»¤æä»£ç æ§è¡ç»æçåè°</span>
    
    ä»£ç ç¤ºä¾ï¼
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">spawn</span><span class="operator">(</span>
        <span class="string">cmd</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span><span class="keyword">print</span> <span class="string">"hello world"</span><span class="operator">;</span><span class="keyword">return</span> <span class="string">"ok"</span><span class="operator">},</span>
        <span class="string">exec_timeout</span> <span class="operator">=&gt;</span> <span class="number">3</span><span class="operator">,</span>
        <span class="string">exit_cb</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="operator">{</span>
            <span class="keyword">my</span><span class="operator">(</span><span class="variable">$pid</span><span class="operator">,</span><span class="variable">$hash</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
            <span class="comment">#$pid æ¯æ§è¡ç¨åºçè¿ç¨å·</span>
            <span class="comment">#$hashæ¯ä¸ä¸ªæ§è¡ç»æçhashå¼ç¨ï¼ç»æå¦ä¸ï¼</span>
            <span class="comment">#{</span>
            <span class="comment">#    'cmd'                  =&gt; 'CODE',              #æ§è¡çå½ä»¤æä»£ç </span>
            <span class="comment">#    'time_stopped'         =&gt; '1441011558.30559',  #è¿ç¨åæ­¢æ¶é´</span>
            <span class="comment">#    'time_started'         =&gt; '1441011557.30242',  #è¿ç¨å¼å§æ¶é´</span>
            <span class="comment">#    'time_duration_total'  =&gt; '1.00345897674561',  #è¿ç¨æ§è¡æ»æ¶é´</span>
            <span class="comment">#    'time_duration_exec'   =&gt; '1.00317192077637',  #è¿ç¨æ§è¡æ¶é¿</span>
            <span class="comment">#    'is_timeout'           =&gt; undef,               #æ¯å¦æ¯è¶æ¶éåº</span>
            <span class="comment">#    'exit_status'          =&gt; 1,                   #è¿ç¨éåºè¿åå¼</span>
            <span class="comment">#    'exit_core'            =&gt; 0,                   #æ¯å¦æcore</span>
            <span class="comment">#    'exit_signal'          =&gt; 0,                   #è¿ç¨éåºä¿¡å·</span>
            <span class="comment">#    'param'                =&gt; undef,               #å½ä»¤æä»£ç æ§è¡åæ°</span>
            <span class="comment">#    'stderr'               =&gt; '',                  #è¿ç¨çæ åéè¯¯è¾åºç»æ</span>
            <span class="comment">#    'stdout'               =&gt; 'hello world',       #è¿ç¨çæ åè¾åºç»æ</span>
            <span class="comment">#    'result'               =&gt; [                    #ä»£ç çè¿åå¼</span>
            <span class="comment">#                                   'ok'</span>
            <span class="comment">#                              ]</span>
            <span class="comment">#}</span>
    
        <span class="operator">},</span>
    <span class="operator">);</span>
    
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">spawn</span><span class="operator">(</span>
        <span class="string">cmd</span>             <span class="operator">=&gt;</span> <span class="string">"ping www.qq.com"</span><span class="operator">,</span> <span class="comment">#æèåæ ['ping','www.qq.com']</span>
        <span class="string">exec_timeout</span>    <span class="operator">=&gt;</span> <span class="number">3</span><span class="operator">,</span>
        <span class="string">stdout_cb</span>       <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="operator">{</span>
            <span class="keyword">my</span><span class="operator">(</span><span class="variable">$pid</span><span class="operator">,</span><span class="variable">$chunk</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
            <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">print</span><span class="operator">(</span><span class="string">"ä»æ åè¾åºä¸­å®æ¶æ¶å°æ°æ®:"</span><span class="operator">,</span><span class="variable">$chunk</span><span class="operator">,</span><span class="string">"\n"</span><span class="operator">);</span>
        <span class="operator">},</span>
        <span class="string">stderr_cb</span>       <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span>
            <span class="keyword">my</span><span class="operator">(</span><span class="variable">$pid</span><span class="operator">,</span><span class="variable">$chunk</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
            <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">print</span><span class="operator">(</span><span class="string">"ä»æ åéè¯¯ä¸­å®æ¶æ¶å°æ°æ®:"</span><span class="operator">,</span><span class="variable">$chunk</span><span class="operator">,</span><span class="string">"\n"</span><span class="operator">);</span> 
        <span class="operator">},</span>
        <span class="string">exit_cb</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="operator">{</span>
            <span class="keyword">my</span><span class="operator">(</span><span class="variable">$pid</span><span class="operator">,</span><span class="variable">$res</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
            <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">print</span><span class="operator">(</span><span class="string">"ä»æ åè¾åºä¸­æ¥æ¶çå¨é¨æ°æ®:"</span><span class="operator">,</span><span class="variable">$res</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">stdout</span><span class="operator">}</span><span class="operator">,</span><span class="string">"\n"</span><span class="operator">);</span>
            <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">print</span><span class="operator">(</span><span class="string">"ä»æ åéè¯¯ä¸­æ¥æ¶çå¨é¨æ°æ®:"</span><span class="operator">,</span><span class="variable">$res</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">stderr</span><span class="operator">}</span><span class="operator">,</span><span class="string">"\n"</span><span class="operator">);</span>
        <span class="operator">}</span> 
    <span class="operator">);</span>
</code></pre>

<h2 id="mail-opt-callback">mail(%opt,[$callback]) &#x975E;&#x963B;&#x585E;&#x53D1;&#x9001;&#x90AE;&#x4EF6;</h2>

<p>&#x8BE5;&#x65B9;&#x6CD5;&#x5B9E;&#x9645;&#x4E0A;&#x662F;<a>Mojo::SMTP::Client</a>&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x4F7F;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#x8BF7;&#x786E;&#x4FDD;&#x4F60;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x4E86;<a>Mojo::SMTP::Client</a>&#x6A21;&#x5757;</p>

<pre><code>    åéé®ä»¶éè¦è®¾ç½®çåæ°ï¼
    <span class="variable">smtp</span>        <span class="comment">#smtpæå¡å¨å°åï¼ä¾å¦smtp.163.com</span>
    <span class="variable">port</span>        <span class="comment">#smtpæå¡å¨ç«¯å£ï¼é»è®¤25</span>
    <span class="variable">tls</span>         <span class="comment">#0|1 æ¯å¦ä½¿ç¨tlsï¼é»è®¤ä¸º 0</span>
    <span class="variable">tls_ca</span>      <span class="comment">#tlsè¯ä¹¦è·¯å¾</span>
    <span class="variable">tls_cert</span>    <span class="comment">#tlså¬é¥è·¯å¾</span>
    <span class="variable">tls_key</span>     <span class="comment">#tlså¯é¥è·¯å¾</span>
    <span class="variable">user</span>        <span class="comment">#smtpå¸å·</span>
    <span class="variable">pass</span>        <span class="comment">#smtpå¯ç </span>
    <span class="variable">from</span>        <span class="comment">#åéé®ç®±</span>
    <span class="variable">to</span>          <span class="comment">#æ¥æ¶é®ç®±</span>
    <span class="variable">cc</span>          <span class="comment">#æéé®ç®±</span>
    <span class="variable">subject</span>     <span class="comment">#ä¸»é¢</span>
    <span class="variable">html</span>        <span class="comment">#é®ä»¶æ­£æåå®¹ï¼htmlæ ¼å¼</span>
    <span class="variable">text</span>        <span class="comment">#é®ä»¶æ­£æåå®¹ï¼çº¯ææ¬æ ¼å¼</span>
    <span class="variable">charset</span>     <span class="comment">#ä¸»é¢ï¼é®ä»¶æ­£æçç¼ç æ ¼å¼ï¼é»è®¤UTF-8</span>
    <span class="variable">data</span>        <span class="comment">#è®¾ç½®è¯¥éé¡¹è¡¨ç¤ºä½¿ç¨MIME::Liteçæçåéæ°æ®</span>
    
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">mail</span><span class="operator">(</span><span class="string">smtp</span><span class="operator">=&gt;</span><span class="variable">smtp</span><span class="number">.163</span><span class="operator">.</span><span class="variable">com</span><span class="operator">,</span><span class="string">user</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">,</span><span class="string">pass</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">,</span><span class="string">from</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">,</span><span class="string">to</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">,</span><span class="string">subject</span><span class="operator">=&gt;</span><span class="string">"é®ä»¶æµè¯"</span><span class="operator">,</span><span class="string">text</span><span class="operator">=&gt;</span><span class="string">"hello world"</span><span class="operator">,</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$send_status</span><span class="operator">,</span><span class="variable">$err</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="keyword">if</span><span class="operator">(</span><span class="variable">$send_status</span><span class="operator">){</span><span class="keyword">print</span> <span class="string">"åéæå"</span><span class="operator">}</span> 
        <span class="keyword">else</span><span class="operator">{</span><span class="keyword">print</span> <span class="string">"åéå¤±è´¥"</span><span class="operator">}</span> 
    <span class="operator">});</span>
    
    å¶å®ä¹æ¯æé»å¡åé
    <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$send_status</span><span class="operator">,</span><span class="variable">$err</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">mail</span><span class="operator">(...);</span>
</code></pre>

<h2 id="update_friend">update_friend() &#x66F4;&#x65B0;&#x597D;&#x53CB;&#x4FE1;&#x606F;</h2>

<p>&#x66F4;&#x65B0;&#x5168;&#x90E8;&#x597D;&#x53CB;&#x4FE1;&#x606F;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x5E38;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x4E3B;&#x52A8;&#x4F7F;&#x7528;</p>

<h2 id="update_group-group">update_group([$group]) &#x66F4;&#x65B0;&#x7FA4;&#x4FE1;&#x606F;</h2>

<p>&#x66F4;&#x65B0;&#x7FA4;&#x6D88;&#x606F;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;$group(Mojo::Webqq::Group&#x5BF9;&#x8C61;) &#x5219;&#x66F4;&#x65B0;&#x6307;&#x5B9A;&#x7FA4;&#x6D88;&#x606F;&#xFF0C;&#x4E0D;&#x8BBE;&#x7F6E;&#x53C2;&#x6570;&#x66F4;&#x65B0;&#x5168;&#x90E8;&#x7FA4;&#x4FE1;&#x606F;</p>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x5E38;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x4E3B;&#x52A8;&#x4F7F;&#x7528;</p>

<h2 id="update_discuss-discuss">update_discuss([$discuss]) &#x66F4;&#x65B0;&#x8BA8;&#x8BBA;&#x7EC4;&#x4FE1;&#x606F;</h2>

<p>&#x66F4;&#x65B0;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;$discuss(Mojo::Webqq::Disucss&#x5BF9;&#x8C61;) &#x5219;&#x66F4;&#x65B0;&#x6307;&#x5B9A;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;&#xFF0C;&#x4E0D;&#x8BBE;&#x7F6E;&#x53C2;&#x6570;&#x66F4;&#x65B0;&#x5168;&#x90E8;&#x8BA8;&#x8BBA;&#x7EC4;&#x4FE1;&#x606F;</p>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x5E38;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x4E3B;&#x52A8;&#x4F7F;&#x7528;</p>

<h2 id="update_recent">update_recent() &#x66F4;&#x65B0;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;&#x4FE1;&#x606F;</h2>

<p>&#x66F4;&#x65B0;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x7531;&#x4E8E;&#x8F83;&#x5C11;&#x4F7F;&#x7528;&#x5230;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4EC5;&#x5728;&#x9996;&#x6B21;&#x767B;&#x5F55;&#x65F6;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x66F4;&#x65B0;&#x4E00;&#x6B21;</p>

<h2 id="each_friend-sub">each_friend(sub{...}) &#x904D;&#x5386;&#x597D;&#x53CB;</h2>

<p>&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;&#x597D;&#x53CB;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">each_friend</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$friend</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span> <span class="comment">#$friendæ¯ä¸ä¸ªMojo::Webqq::Friendå¯¹è±¡</span>
        <span class="operator">...;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="friends">friends() &#x83B7;&#x53D6;&#x597D;&#x53CB;&#x5BF9;&#x8C61;&#x5217;&#x8868;</h2>

<p>&#x8FD4;&#x56DE;&#x597D;&#x53CB;&#x5BF9;&#x8C61;&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x4E00;&#x4E2A;Mojo::Webqq::Friend&#x5BF9;&#x8C61;</p>

<pre><code>    <span class="keyword">my</span> <span class="variable">@friends</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">friends</span><span class="operator">();</span>
</code></pre>

<h2 id="each_group-sub">each_group(sub{...}) &#x904D;&#x5386;&#x7FA4;</h2>

<p>&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;&#x7FA4;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">each_group</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$group</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span> <span class="comment">#$groupæ¯ä¸ä¸ªMojo::Webqq::Groupå¯¹è±¡</span>
        <span class="operator">...;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="groups">groups() &#x83B7;&#x53D6;&#x7FA4;&#x5BF9;&#x8C61;&#x5217;&#x8868;</h2>

<p>&#x8FD4;&#x56DE;&#x7FA4;&#x5BF9;&#x8C61;&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x4E00;&#x4E2A;Mojo::Webqq::Group&#x5BF9;&#x8C61;</p>

<pre><code>    <span class="keyword">my</span> <span class="variable">@groups</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">groups</span><span class="operator">();</span>
</code></pre>

<h2 id="each_group_member-sub">each_group_member(sub{...}) &#x904D;&#x5386;&#x7FA4;&#x6210;&#x5458;</h2>

<p>&#x904D;&#x5386;&#x6240;&#x6709;&#x7FA4;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x7FA4;&#x6210;&#x5458;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">each_group_member</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$member</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span> <span class="comment">#$memberæ¯ä¸ä¸ªMojo::Webqq::Group::Memberå¯¹è±¡</span>
        <span class="operator">...;</span>
    <span class="operator">});</span>
    
    æ³¨æï¼æ³è¦éåæä¸ªç¾¤ä¸­çææç¾¤æåå¯ä»¥ä½¿ç¨ç¾¤å¯¹è±¡ä¸­çéåæ¹æ³ï¼
    
    <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">each_group_member</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$member</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
        <span class="operator">...;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="each_discuss-sub">each_discuss(sub{...}) &#x904D;&#x5386;&#x8BA8;&#x8BBA;&#x7EC4;</h2>

<p>&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;&#x8BA8;&#x8BBA;&#x7EC4;&#xFF0C;&#x548C;&#x904D;&#x5386;&#x597D;&#x53CB;&#x6216;&#x7FA4;&#x7C7B;&#x4F3C; &#x4E0D;&#x518D;&#x8D58;&#x8FF0;</p>

<h2 id="discusss">discusss() &#x83B7;&#x53D6;&#x8BA8;&#x8BBA;&#x7EC4;&#x5217;&#x8868;</h2>

<p>&#x8FD4;&#x56DE;&#x8BA8;&#x8BBA;&#x7EC4;&#x5BF9;&#x8C61;&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x4E00;&#x4E2A;Mojo::Webqq::Discuss&#x5BF9;&#x8C61;</p>

<pre><code>    <span class="keyword">my</span> <span class="variable">@discusss</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">discusss</span><span class="operator">;</span>
</code></pre>

<h2 id="each_discuss_member-sub">each_discuss_member(sub{...}) &#x904D;&#x5386;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;</h2>

<p>&#x904D;&#x5386;&#x6240;&#x6709;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#xFF0C;&#x548C;&#x904D;&#x5386;&#x597D;&#x53CB;&#x6216;&#x7FA4;&#x7C7B;&#x4F3C; &#x4E0D;&#x518D;&#x8D58;&#x8FF0;</p>

<h2 id="each_recent-sub">each_recent(sub{...}) &#x904D;&#x5386;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;</h2>

<h2 id="recents">recents() &#x83B7;&#x53D6;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;&#x5217;&#x8868;</h2>

<p>&#x8FD4;&#x56DE;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;&#x5BF9;&#x8C61;&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x662F;Mojo::Webqq::Friend/Mojo::Webqq::Group::Member/Mojo::Webqq::Dicuss::Member&#x5BF9;&#x8C61;</p>

<pre><code>    <span class="keyword">my</span> <span class="variable">@recents</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">recents</span><span class="operator">();</span>
</code></pre>

<h2 id="send_message-friend-content-callback">send_message($friend,$content,[$callback]) &#x53D1;&#x9001;&#x597D;&#x53CB;&#x6D88;&#x606F;</h2>

<pre><code>    <span class="keyword">my</span> <span class="variable">$friend</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_friend</span><span class="operator">(</span><span class="string">id</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">);</span><span class="comment">#$friendæ¯ä¸ä¸ªMojo::Webqq::Friendçå¯¹è±¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_message</span><span class="operator">(</span><span class="variable">$friend</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">);</span><span class="comment">#åéåå®¹å¿é¡»æ¯utf8ç¼ç </span>
    
    å¨<span class="variable">callback</span>ä¸­å¯¹åéçæ¶æ¯è¿è¡é¢å¤ç
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_message</span><span class="operator">(</span><span class="variable">$friend</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">,</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="comment">#å¯¹å³å°åéçæ¶æ¯è¿è¡é¢å¤ç</span>
        <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">msg_from</span><span class="operator">(</span><span class="string">"èªå®ä¹çæ¥æºæ è¯"</span><span class="operator">);</span>
    
        <span class="comment">#è®¾ç½®è¯¥æ¡æ¶æ¯åéå®æ¯åçåè°å½æ°</span>
        <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">cb</span><span class="operator">(</span><span class="keyword">sub</span><span class="operator">{</span>
            <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">,</span><span class="variable">$status</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
            <span class="keyword">print</span> <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">msg_id</span> <span class="operator">.</span> <span class="string">"åéå¤±è´¥\n"</span> <span class="keyword">if</span>  <span class="keyword">not</span> <span class="variable">$status</span><span class="operator">-&gt;</span><span class="variable">is_success</span><span class="operator">;</span>
        <span class="operator">});</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="send_group_message-group-content-callback">send_group_message($group,$content,[$callback]) &#x53D1;&#x9001;&#x7FA4;&#x6D88;&#x606F;</h2>

<pre><code>    <span class="keyword">my</span> <span class="variable">$group</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_group</span><span class="operator">(</span><span class="string">gname</span><span class="operator">=&gt;</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">);</span><span class="comment">#$groupæ¯ä¸ä¸ªMojo::Webqq::Groupçå¯¹è±¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_group_message</span><span class="operator">(</span><span class="variable">$group</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">);</span>
</code></pre>

<h2 id="send_discuss_message-discuss-content-callback">send_discuss_message($discuss,$content,[$callback]) &#x53D1;&#x9001;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;</h2>

<pre><code>    <span class="keyword">my</span> <span class="variable">$discuss</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_discuss</span><span class="operator">(</span><span class="string">dname</span><span class="operator">=&gt;</span><span class="string">"è®¨è®ºç»"</span><span class="operator">);</span><span class="comment">#$discussæ¯ä¸ä¸ªMojo::Webqq::Discussçå¯¹è±¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_discuss_message</span><span class="operator">(</span><span class="variable">$discuss</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">);</span>
</code></pre>

<p>&#x6CE8;&#x610F;&#xFF1A;&#x7531;&#x4E8E;&#x817E;&#x8BAF;&#x9650;&#x5236;&#xFF0C;&#x5F53;&#x524D;&#x65E0;&#x6CD5;&#x6210;&#x529F;&#x53D1;&#x9001;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F;</p>

<h2 id="send_sess_message-group_member-discuss_member-content-callback">send_sess_message($group_member|$discuss_member,$content,[$callback]) &#x53D1;&#x9001;&#x7FA4;&#x6216;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E34;&#x65F6;&#x6D88;&#x606F;</h2>

<pre><code>    <span class="comment">#ç´æ¥å¨æ´ä¸ªæ°æ®åºä¸­æç´¢æå®ç¾¤æå</span>
    <span class="keyword">my</span> <span class="variable">$group_member</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_group_member</span><span class="operator">(</span><span class="string">gname</span><span class="operator">=&gt;</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">,</span><span class="string">nick</span><span class="operator">=&gt;</span><span class="string">"å°ç°"</span><span class="operator">);</span>
    <span class="comment">#$group_memberæ¯ä¸ä¸ªMojo::Webqq::Group::Memberçå¯¹è±¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_sess_message</span><span class="operator">(</span><span class="variable">$group_member</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">);</span>
    
    <span class="comment">#åæ¾å°ç¾¤ï¼åä½¿ç¨ç¾¤æç´¢å°ç¾¤æåï¼æ¯ä¸è¿°çå¨å±æç´¢æ¹æ³æ´é«æä¸äº</span>
    <span class="keyword">my</span> <span class="variable">$group</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_group</span><span class="operator">(</span><span class="string">gname</span><span class="operator">=&gt;</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">);</span>
    <span class="keyword">my</span> <span class="variable">$member</span> <span class="operator">=</span> <span class="variable">$group</span><span class="operator">-&gt;</span><span class="variable">search_group_member</span><span class="operator">(</span><span class="string">nick</span><span class="operator">=&gt;</span><span class="string">"å°ç°"</span><span class="operator">);</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_sess_message</span><span class="operator">(</span><span class="variable">$member</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">);</span>
    
    <span class="keyword">my</span> <span class="variable">$discuss_member</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">search_discuss_member</span><span class="operator">(</span><span class="string">dname</span><span class="operator">=&gt;</span><span class="string">"è®¨è®ºç»"</span><span class="operator">,</span><span class="string">nick</span><span class="operator">=&gt;</span><span class="string">"å°ç°"</span><span class="operator">);</span>
    <span class="comment">#$discuss_memberæ¯ä¸ä¸ªMojo::Webqq::Discuss::Memberçå¯¹è±¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_sess_message</span><span class="operator">(</span><span class="variable">$discuss_member</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">);</span>
     
</code></pre>

<h2 id="reply_message-msg-content-callback">reply_message($msg,$content,[$callback]) &#x5BF9;&#x6536;&#x5230;&#x7684;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x56DE;&#x590D;</h2>

<p>send_message()/send_group_message()/send_discuss_message()/send_sess_message()</p>

<p>&#x8FD9;&#x4E00;&#x7C7B;&#x65B9;&#x6CD5;&#x9002;&#x5408;&#x5BF9;&#x7279;&#x5B9A;&#x7684;&#x5BF9;&#x8C61;&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x6D88;&#x606F;&#xFF0C;&#x4F46;&#x5F88;&#x591A;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x5BF9;&#x65B9;&#x662F;&#x8C01;</p>

<p>&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x56DE;&#x590D;&#xFF0C;&#x4F7F;&#x7528;reply_message&#x4F1A;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">reply_message</span><span class="operator">(</span><span class="variable">$msg</span><span class="operator">,</span><span class="variable">$content</span><span class="operator">);</span>
</code></pre>

<h2 id="http_get-httpget">http_get http&#x963B;&#x585E;&#x6216;&#x975E;&#x963B;&#x585E;get&#x8BF7;&#x6C42;</h2>

<p>&#x8BE5;&#x65B9;&#x6CD5;&#x4E3A;Mojo::UserAgent&#x7684;get&#x65B9;&#x6CD5;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x57FA;&#x672C;&#x548C;Mojo::UserAgent-&gt;get&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x4E5F;&#x5B58;&#x5728;&#x7EC6;&#x5FAE;&#x5DEE;&#x522B;</p>

<p>&#x963B;&#x585E;http&#x8BF7;&#x6C42;&#xFF1A;</p>

<pre><code>    <span class="comment">#æ éä¸ä¸æ  è¿åhttpè¯·æ±åå®¹ï¼è¥è¯·æ±å¤±è´¥ï¼è¿ååå®¹ä¸ºundef</span>
    <span class="keyword">my</span> <span class="variable">$http_body</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">http_get</span><span class="operator">(</span><span class="variable">$url</span><span class="operator">,</span><span class="variable">$header</span><span class="operator">);</span>
    
    <span class="comment">#åè¡¨ä¸ä¸æï¼è¿åhttpè¯·æ±åå®¹ä»¥å$ua,$tx</span>
    <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$http_body</span><span class="operator">,</span><span class="variable">$ua</span><span class="operator">,</span><span class="variable">$tx</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">http_get</span><span class="operator">(</span><span class="variable">$url</span><span class="operator">,</span><span class="variable">$header</span><span class="operator">);</span>
    
    <span class="comment">#å¯ä»¥å¨http headerè®¾ç½®ä¸äºè¯·æ±ç¸å³çéé¡¹ï¼æ¯å¦ï¼</span>
    <span class="comment">#json=&gt;1 è¡¨ç¤ºå°ååºçjsonæ°æ®è¿è¡json decodeå¾å°perlçhashå¼ç¨</span>
    <span class="comment">#retry_times=&gt;3 è¡¨ç¤ºè¯·æ±å¤±è´¥èªå¨éè¯æ¬¡æ°ï¼é»è®¤ä½¿ç¨$client-&gt;ua_retry_timesçå¼</span>
    <span class="keyword">my</span> <span class="variable">$json_decode_hash</span> <span class="operator">=</span> <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">http_get</span><span class="operator">(</span><span class="variable">$url</span><span class="operator">,</span><span class="operator">{</span><span class="string">json</span><span class="operator">=&gt;</span><span class="number">1</span><span class="operator">,</span><span class="string">retry_times</span><span class="operator">=&gt;</span><span class="number">3</span><span class="operator">,</span><span class="string">Host</span><span class="operator">=&gt;</span><span class="string">"www.qq.com"</span><span class="operator">}</span><span class="operator">);</span>
    
    <span class="comment">#http postè¯·æ±</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">http_post</span><span class="operator">(</span><span class="variable">$url</span><span class="operator">,</span><span class="variable">$header</span><span class="operator">,</span><span class="string">form</span><span class="operator">=&gt;</span><span class="variable">$post_data</span><span class="operator">);</span>
</code></pre>

<p>&#x975E;&#x963B;&#x585E;http&#x8BF7;&#x6C42;&#xFF1A;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">http_get</span><span class="operator">(</span><span class="variable">$url</span><span class="operator">,</span><span class="variable">$header</span><span class="operator">,</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$http_body</span><span class="operator">,</span><span class="variable">$ua</span><span class="operator">,</span><span class="variable">$tx</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>    
        <span class="comment">#è¯·æ±å¤±è´¥ $http_body è¿åundef</span>
    <span class="operator">});</span>
</code></pre>

<p>&#x6CE8;&#x610F;&#xFF1A;&#x7531;&#x4E8E;&#x91C7;&#x7528;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x59CB;&#x7EC8;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x975E;&#x963B;&#x585E;&#x7684;http&#x8BF7;&#x6C42;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x91C7;&#x7528;&#x963B;&#x585E;&#x7684;http&#x8BF7;&#x6C42;&#xFF0C;&#x5728;http&#x8BF7;&#x6C42;&#x5B8C;&#x6210;&#x4E4B;&#x524D;</p>

<p>&#x6574;&#x4E2A;&#x7A0B;&#x5E8F;&#x90FD;&#x662F;&#x88AB;&#x963B;&#x585E;&#x7684;&#xFF0C;&#x65E0;&#x6CD5;&#x505A;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x4E8B;&#xFF08;&#x5305;&#x62EC;&#x63A5;&#x6536;&#x548C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7B49;&#xFF09;</p>

<h2 id="http_post-httppost">http_post http&#x963B;&#x585E;&#x6216;&#x975E;&#x963B;&#x585E;post&#x8BF7;&#x6C42;</h2>

<p>&#x548C; http_get &#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#xFF0C;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;</p>

<h2 id="print">print &#x6253;&#x5370;&#x5185;&#x5BB9;&#xFF0C;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x8BC6;&#x522B;&#x8F93;&#x51FA;&#x7EC8;&#x7AEF;&#x7F16;&#x7801;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x4E71;&#x7801;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">print</span><span class="operator">(</span><span class="string">"å¦å¦åä¹ä¸ç¨æå¿æä¼ä¹±ç äº..."</span><span class="operator">);</span>
</code></pre>

<h1 id="4">&#x5BA2;&#x6237;&#x7AEF;&#x4E8B;&#x4EF6;</h1>

<p>&#x5E38;&#x89C1;&#x7684;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x6BD4;&#x5982;&#x63A5;&#x6536;&#x5230;&#x6D88;&#x606F;&#xFF0C;&#x6709;&#x4EBA;&#x52A0;&#x5165;&#x7FA4;&#x4E2D;&#x7B49;&#x7B49;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x8BBE;&#x7F6E;&#x5BF9;&#x5E94;&#x7684;&#x4E8B;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x5E76;&#x5728;&#x4E8B;&#x4EF6;&#x5B8C;&#x6210;&#x65F6;&#x8FDB;&#x884C;&#x89E6;&#x53D1;</p>

<p>&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;$client-&gt;on(event=&gt;sub{xxx})&#x7684;&#x65B9;&#x5F0F;&#x5BF9;&#x4F60;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x4E8B;&#x4EF6;&#x6CE8;&#x518C;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6C38;&#x8FDC;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;</p>

<p>&#x6CE8;&#x610F;&#xFF1A;</p>

<pre><code>    new_friend/new_group/new_discuss/new_group_member/new_discuss_member
    lose_friend/lose_group/lose_discuss/lose_group_member/lose_discuss_member</code></pre>

<p>&#x8FD9;&#x7C7B;&#x4E8B;&#x4EF6;&#x91C7;&#x7528;&#x7684;&#x662F;&#x8F83;&#x4E3A;&#x7279;&#x6B8A;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#xFF0C;&#x6BD4;&#x5982;&#x65B0;&#x589E;&#x7FA4;&#x6210;&#x5458;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x5E10;&#x53F7;&#x662F;&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650;&#xFF0C;&#x4F60;&#x4F1A;&#x6536;&#x5230;&#x76F8;&#x5173;&#x7684;&#x901A;&#x77E5;</p>

<p>&#x4F46;&#x5982;&#x679C;&#x662F;&#x975E;&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650;,&#x5219;&#x5B8C;&#x5168;&#x4E0D;&#x4F1A;&#x6536;&#x5230;&#x4EFB;&#x4F55;&#x901A;&#x77E5;&#x63D0;&#x9192;&#xFF0C;&#x4EE5;&#x65B0;&#x589E;&#x7FA4;&#x6210;&#x5458;&#x4E3A;&#x4F8B;&#xFF0C;&#x4E3A;&#x4E86;&#x7EDF;&#x4E00;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#xFF0C;&#x91C7;&#x7528;&#x4E24;&#x79CD;&#x673A;&#x5236;:</p>

<p>1&#xFF09;&#x5BA2;&#x6237;&#x7AEF;&#x5B9A;&#x671F;&#x66F4;&#x65B0;&#x597D;&#x53CB;&#x3001;&#x7FA4;&#x7EC4;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x6570;&#x636E;&#xFF0C;&#x548C;&#x539F;&#x59CB;&#x6570;&#x636E;&#x5BF9;&#x6BD4;&#x6765;&#x53D1;&#x73B0;&#x65B0;&#x589E;&#x6216;&#x8005;&#x4E22;&#x5931;&#x7684;&#x6210;&#x5458;&#xFF0C;&#x5F53;&#x524D;&#x5B9A;&#x671F;&#x66F4;&#x65B0;&#x9891;&#x7387;&#x4E3A;10&#x5206;&#x949F;</p>

<p>2&#xFF09;&#x5F53;&#x7FA4;&#x6210;&#x5458;&#x5728;&#x7FA4;&#x91CC;&#x53D1;&#x8A00;&#x65F6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x9A6C;&#x4E0A;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x641C;&#x7D22;&#x76F8;&#x5173;&#x7FA4;&#x6210;&#x5458;&#xFF0C;&#x5982;&#x679C;&#x641C;&#x7D22;&#x4E0D;&#x5230;&#x5219;&#x5224;&#x65AD;&#x4E3A;&#x65B0;&#x589E;&#x7FA4;&#x6210;&#x5458;&#xFF0C;&#x9A6C;&#x4E0A;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;</p>

<p>&#x56E0;&#x6B64;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#x5F53;&#x7FA4;&#x6210;&#x5458;&#x52A0;&#x5165;&#x540E;&#xFF0C;&#x8FC7;&#x4E86;10&#x5206;&#x949F;&#x624D;&#x4F1A;&#x89E6;&#x53D1;&#x76F8;&#x5173;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x6216;&#x8005;&#x65B0;&#x589E;&#x7FA4;&#x6210;&#x5458;&#x4E00;&#x65E6;&#x53D1;&#x8A00;&#x4E5F;&#x4F1A;&#x53D1;&#x9001;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;</p>

<p>&#x5F53;&#x524D;&#x6838;&#x5FC3;&#x4E8B;&#x4EF6;&#x7684;&#x89E6;&#x53D1;&#x987A;&#x5E8F;(&#x91C7;&#x7528;&#x5EF6;&#x8FDF;&#x767B;&#x5F55;)</p>

<pre><code>                                                                                 +-&gt;before_send_message
    plugin_load -+                                                               |-&gt;receive_message
                 |-&gt;after_load_plugin--&gt;input_img_verifycode-&gt;login-&gt;ready-&gt;run-&gt;|-&gt;send_message
    plugin_call -+                    |                                      |   |-&gt;new_friend
                                      +-input_qrcode                         |   |-&gt;receive_friend_pic
                                                             relogin&lt;-login&lt;-+   |-&gt;lose_friend
                                                                                 ...</code></pre>

<h2 id="reveive_message">reveive_message &#x63A5;&#x6536;&#x6D88;&#x606F;&#x4E8B;&#x4EF6;</h2>

<p>&#x4F20;&#x9012;&#x7ED9;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x662F;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6D88;&#x606F;&#x5BF9;&#x8C61;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_message</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span><span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">dump</span><span class="operator">});</span>
</code></pre>

<h2 id="send_message">send_message &#x53D1;&#x9001;&#x6D88;&#x606F;&#x4E8B;&#x4EF6;</h2>

<p>&#x4F20;&#x9012;&#x7ED9;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x662F; &#x63A5;&#x6536;&#x5230;&#x7684;&#x6D88;&#x606F;&#x5BF9;&#x8C61; &#x548C; &#x53D1;&#x9001;&#x72B6;&#x6001;&#x5BF9;&#x8C61;</p>

<p>&#x53D1;&#x9001;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#x662F;Mojo::Webqq::Message::Send::Status&#x7684;&#x5B9E;&#x4F8B;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">send_message</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">,</span><span class="variable">$status</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span> 
        <span class="comment">#$statusæ¯ä¸ä¸ªMojo::Webqq::Message::Send::Statusçå¯¹è±¡,ä¸»è¦ç¨äºå¤æ­æ¶æ¯æ¯å¦åéæå</span>
        <span class="keyword">print</span> <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">msg_id</span><span class="operator">,</span><span class="string">"åéæå"</span> <span class="keyword">if</span> <span class="variable">$status</span><span class="operator">-&gt;</span><span class="variable">is_success</span>  
    <span class="operator">});</span>
</code></pre>

<h2 id="login1">login &#x767B;&#x5F55;&#x6210;&#x529F;&#x4E8B;&#x4EF6;</h2>

<p>&#x767B;&#x5F55;&#x5B8C;&#x6210;&#x65F6;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#xFF0C;&#x65E0;&#x989D;&#x5916;&#x7684;&#x56DE;&#x8C03;&#x53C2;&#x6570;</p>

<h2 id="relogin1">relogin &#x91CD;&#x65B0;&#x767B;&#x5F55;&#x6210;&#x529F;&#x4E8B;&#x4EF6;</h2>

<p>&#x91CD;&#x65B0;&#x767B;&#x5F55;&#x5B8C;&#x6210;&#x65F6;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#xFF0C;&#x65E0;&#x989D;&#x5916;&#x7684;&#x56DE;&#x8C03;&#x53C2;&#x6570;</p>

<h2 id="input_img_verifycode">input_img_verifycode &#x7B49;&#x5F85;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x7801;</h2>

<p>&#x767B;&#x5F55;&#x9700;&#x8981;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x53C2;&#x6570;&#x4E3A;&#x9A8C;&#x8BC1;&#x7801;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;</p>

<h2 id="input_qrcode">input_qrcode &#x7B49;&#x5F85;&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;</h2>

<p>&#x767B;&#x5F55;&#x9700;&#x8981;&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;&#xFF0C;&#x53C2;&#x6570;&#x4E3A;&#x4E8C;&#x7EF4;&#x7801;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;</p>

<h2 id="ready1">ready &#x51C6;&#x5907;&#x5C31;&#x7EEA;</h2>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x4E8B;&#x4EF6;</p>

<h2 id="run1">run &#x5373;&#x5C06;&#x5F00;&#x59CB;&#x8FD0;&#x884C;</h2>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x4E00;&#x5207;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x5F00;&#x59CB;&#x8FDB;&#x5165;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#x4E4B;&#x524D;</p>

<h2 id="plugin_call">plugin_call &#x63D2;&#x4EF6;&#x6267;&#x884C;</h2>

<p>&#x63D2;&#x4EF6;&#x88AB;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x53C2;&#x6570;&#x4E3A;&#x63D2;&#x4EF6;&#x540D;&#x79F0;</p>

<h2 id="plugin_load">plugin_load &#x63D2;&#x4EF6;&#x52A0;&#x8F7D;</h2>

<p>&#x63D2;&#x4EF6;&#x88AB;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x65F6;&#xFF0C;&#x53C2;&#x6570;&#x4E3A;&#x63D2;&#x4EF6;&#x540D;&#x79F0;</p>

<h2 id="after_load_plugin">after_load_plugin &#x6240;&#x6709;&#x63D2;&#x4EF6;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;</h2>

<p>&#x5168;&#x90E8;&#x63D2;&#x4EF6;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x89E6;&#x53D1;&#x7684;&#x4E8B;&#x4EF6;</p>

<h2 id="new_friend">new_friend &#x65B0;&#x589E;&#x597D;&#x53CB;</h2>

<p>&#x65B0;&#x589E;&#x597D;&#x53CB;&#x65F6;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#xFF0C;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#x4E3A;&#x65B0;&#x589E;&#x7684;&#x597D;&#x53CB;&#x5BF9;&#x8C61;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">new_friend</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$friend</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="lose_friend">lose_friend &#x4E22;&#x5931;&#x597D;&#x53CB;</h2>

<p>&#x5931;&#x53BB;&#x597D;&#x53CB;&#x65F6;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#xFF0C;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#x4E3A;&#x5931;&#x53BB;&#x7684;&#x597D;&#x53CB;&#x5BF9;&#x8C61;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">lose_friend</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$friend</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="new_group">new_group &#x65B0;&#x589E;&#x7FA4;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">new_group</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$group</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="lose_group">lose_group &#x9000;&#x51FA;&#x7FA4;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">lose_group</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$group</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="new_group_member">new_group_member &#x65B0;&#x589E;&#x7FA4;&#x6210;&#x5458;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">new_group_member</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$group_member</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="lose_group_member">lose_group_member &#x7FA4;&#x6210;&#x5458;&#x9000;&#x51FA;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">lose_group_member</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$group_member</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
        
</code></pre>

<h2 id="new_discuss">new_discuss &#x65B0;&#x589E;&#x8BA8;&#x8BBA;&#x7EC4;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">new_discuss</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$discuss</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="lose_discuss">lose_discuss &#x9000;&#x51FA;&#x8BA8;&#x8BBA;&#x7EC4;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">lose_discuss</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$discuss</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="new_discuss_member">new_discuss_member &#x65B0;&#x589E;&#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">new_discuss_member</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$discuss_member</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="lose_discuss_member">lose_discuss_member &#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x9000;&#x51FA;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">lose_discuss_member</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span><span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$discuss_member</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">});</span>
</code></pre>

<h2 id="receive_pic">receive_pic &#x63A5;&#x6536;&#x56FE;&#x7247;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_pic</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span> 
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$filepath</span><span class="operator">,</span><span class="variable">$sender</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
        <span class="comment">#$filepath å¾çæä»¶çç»å¯¹è·¯å¾</span>
        <span class="comment">#$sender   åéå¾ççå¯¹è±¡ï¼å¯è½æ¯å¥½åãç¾¤æå</span>
        <span class="keyword">if</span><span class="operator">(</span><span class="variable">$sender</span><span class="operator">-&gt;</span><span class="variable">is_friend</span><span class="operator">){...;}</span>
        <span class="keyword">elsif</span><span class="operator">(</span><span class="variable">$sender</span><span class="operator">-&gt;</span><span class="variable">is_group_member</span><span class="operator">){...;}</span>
        <span class="keyword">elsif</span><span class="operator">(</span><span class="variable">$sender</span><span class="operator">-&gt;</span><span class="variable">is_discuss_member</span><span class="operator">){...;}</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="receive_friend_pic">receive_friend_pic &#x63A5;&#x6536;&#x597D;&#x53CB;&#x56FE;&#x7247;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_friend_pic</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span> 
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$filepath</span><span class="operator">,</span><span class="variable">$friend</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
        <span class="comment">#$filepath å¾çæä»¶çç»å¯¹è·¯å¾</span>
        <span class="comment">#$friend   åéå¾ççå¥½åå¯¹è±¡</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="receive_sess_pic">receive_sess_pic &#x63A5;&#x6536;&#x964C;&#x751F;&#x4EBA;&#x56FE;&#x7247;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_sess_pic</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span> 
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$filepath</span><span class="operator">,</span><span class="variable">$sender</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
        <span class="comment">#$filepath å¾çæä»¶çç»å¯¹è·¯å¾</span>
        <span class="comment">#$sender   åéå¾ççç¾¤æåæè®¨è®ºç»æå</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="receive_group_pic">receive_group_pic &#x63A5;&#x6536;&#x5230;&#x7FA4;&#x56FE;&#x7247;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_group_pic</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span> 
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$filepath</span><span class="operator">,</span><span class="variable">$sender</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
        <span class="comment">#$fh       å¾çæä»¶çåªè¯»å¥æ</span>
        <span class="comment">#$filepath å¾çæä»¶çç»å¯¹è·¯å¾</span>
        <span class="comment">#$sender   åéå¾ççç¾¤æåå¯¹è±¡</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="first_talk">first_talk &#x67D0;&#x4EBA;&#x7B2C;&#x4E00;&#x6B21;&#x6D88;&#x606F;</h2>

<p>&#x7B2C;&#x4E00;&#x6B21;&#x7684;&#x5B9A;&#x4E49;&#x4E3A;&#xFF1A;&#x6536;&#x5230;&#x67D0;&#x4E2A;&#x7528;&#x6237;&#x5728;4&#x5C0F;&#x65F6;&#x5185;&#x7B2C;&#x4E00;&#x6B21;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">first_talk</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$sender</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="comment">#$sender åéæ¶æ¯çå¥½å æè ç¾¤æå æè è®¨è®ºç»æå</span>
        <span class="comment">#$msg    æ¥æ¶å°çæ¶æ¯</span>
        <span class="variable">$sender</span><span class="operator">-&gt;</span><span class="variable">send</span><span class="operator">(</span><span class="string">"æä¹è¿ä¹ä¹ææ³èµ·æ?"</span><span class="operator">);</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="before_send_message">before_send_message &#x6D88;&#x606F;&#x5373;&#x5C06;&#x53D1;&#x9001;</h2>

<p>&#x6D88;&#x606F;&#x53D1;&#x9001;&#x4E4B;&#x524D;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x5728;&#x5373;&#x5C06;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x524D;&#x5BF9;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x9884;&#x5904;&#x7406;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">before_send_message</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="keyword">my</span> <span class="variable">$content</span> <span class="operator">=</span> <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">content</span><span class="operator">;</span>
        <span class="variable">$content</span> <span class="operator">.=</span>  <span class="string">"ææ¯å¯ç±çå°å°¾å·´"</span><span class="operator">;</span>
        <span class="variable">$msg</span><span class="operator">-&gt;</span><span class="variable">content</span><span class="operator">(</span><span class="variable">$content</span><span class="operator">);</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="friend_property_change">friend_property_change &#x597D;&#x53CB;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">friend_property_change</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$friend</span><span class="operator">,</span><span class="variable">$property</span><span class="operator">,</span><span class="variable">$old_value</span><span class="operator">,</span><span class="variable">$new_value</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="group_property_change">group_property_change &#x7FA4;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">group_property_change</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$group</span><span class="operator">,</span><span class="variable">$property</span><span class="operator">,</span><span class="variable">$old_value</span><span class="operator">,</span><span class="variable">$new_value</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="group_member_property_change">group_member_property_change &#x7FA4;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">group_member_property_change</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$member</span><span class="operator">,</span><span class="variable">$property</span><span class="operator">,</span><span class="variable">$old_value</span><span class="operator">,</span><span class="variable">$new_value</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="discuss_property_change">discuss_property_change &#x8BA8;&#x8BBA;&#x7EC4;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">discuss_property_change</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$discuss</span><span class="operator">,</span><span class="variable">$property</span><span class="operator">,</span><span class="variable">$old_value</span><span class="operator">,</span><span class="variable">$new_value</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="discuss_member_property_change">discuss_member_property_change &#x8BA8;&#x8BBA;&#x7EC4;&#x6210;&#x5458;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">discuss_member_property_change</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$member</span><span class="operator">,</span><span class="variable">$property</span><span class="operator">,</span><span class="variable">$old_value</span><span class="operator">,</span><span class="variable">$new_value</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="model_update_fail">model_update_fail &#x66F4;&#x65B0;&#x597D;&#x53CB;&#x3001;&#x7FA4;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x4FE1;&#x606F;&#x5931;&#x8D25;</h2>

<p>&#x7A0B;&#x5E8F;&#x76EE;&#x524D;&#x4F9D;&#x9760;&#x5B9A;&#x65F6;&#x66F4;&#x65B0;&#x597D;&#x53CB;&#x3001;&#x7FA4;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x7B49;&#x6570;&#x636E;&#x6765;&#x5224;&#x65AD;&#x65B0;&#x589E;&#x597D;&#x53CB;&#x3001;&#x65B0;&#x589E;&#x7FA4;&#x6210;&#x5458;&#x7B49;</p>

<p>&#x4F46;&#x5F53;&#x524D;&#x53D1;&#x73B0;&#x8FD0;&#x884C;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x53EF;&#x80FD;&#x7531;&#x4E8E;cookie&#x8FC7;&#x671F;&#x7B49;&#x539F;&#x56E0;&#x65E0;&#x6CD5;&#x518D;&#x6210;&#x529F;&#x66F4;&#x65B0;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#xFF0C;&#x8FDE;&#x7EED;&#x591A;&#x6B21;&#x66F4;&#x65B0;&#x5931;&#x8D25;&#x4F1A;&#x89E6;&#x53D1;&#x8BE5;&#x4E8B;&#x4EF6;</p>

<p>&#x4F46;&#x5E76;&#x4E0D;&#x5F71;&#x54CD;&#x6D88;&#x606F;&#x63A5;&#x6536;&#x548C;&#x53D1;&#x9001;&#xFF0C;&#x53EA;&#x662F;&#x90E8;&#x5206;&#x529F;&#x80FD;&#x53D7;&#x9650;</p>

<p>&#x5982;&#x679C;&#x4F60;&#x5F88;&#x5728;&#x610F;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5728;&#x8BE5;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x65F6;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#xFF0C;&#x4FBF;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x529F;&#x80FD;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">model_update_fail</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="variable">$client</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
        <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">relogin</span><span class="operator">();</span>
    <span class="operator">});</span>
</code></pre>

<h2 id="receive_raw_message">receive_raw_message &#x63A5;&#x6536;&#x5230;&#x539F;&#x59CB;&#x6D88;&#x606F;&#x5185;&#x5BB9;</h2>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_raw_message</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$bytes</span><span class="operator">,</span><span class="variable">$hash</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="comment">#$bytes æ¯æ¥æ¶å°çåå§æ¶æ¯ json æ ¼å¼æ°æ®ï¼æªåä»»ä½å¤ç</span>
        <span class="comment">#$hash æ¯å° $bytes è¿è¡ Mojo::JSON::decode_json ä¹åå¾å°ç perl hash ç»æ</span>
    <span class="operator">});</span>
</code></pre>

<h1 id="5">&#x5173;&#x4E8E;&#x63D2;&#x4EF6;</h1>

<h2 id="load">load</h2>

<p>&#x52A0;&#x8F7D;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x591A;&#x4E2A;&#x63D2;&#x4EF6;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5F15;&#x7528;&#xFF0C;&#x652F;&#x6301;&#x7684;&#x63D2;&#x4EF6;&#x53C2;&#x6570;&#x5305;&#x62EC;:</p>

<pre><code>    <span class="variable">priority</span>        <span class="comment">#å¯éï¼è®¾ç½®æä»¶ä¼åçº§ï¼é»è®¤æ¯0ï¼è¾é«çä¼åçº§è½å¤ä½¿å¾æä»¶ä¼åæ§è¡</span>
    <span class="variable">auto_call</span>       <span class="comment">#å¯éï¼è®¾ç½®æ¯å¦å è½½å®æåèªå¨æ§è¡ï¼é»è®¤ä¸º1</span>
    <span class="variable">call_on_load</span>    <span class="comment">#å¯éï¼å è½½å®æä»¶é©¬ä¸æ§è¡ï¼é»è®¤ä¸º0</span>
    <span class="variable">data</span>            <span class="comment">#å¯éï¼è®¾ç½®å è½½æä»¶æ¶å¯ä»¥æºå¸¦çæ°æ®ï¼å°ä¼å¨callçæ¶åä¼ éç»æä»¶æ¬èº«</span>
    
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="operator">[</span><span class="string">"plugin1"</span><span class="operator">,</span><span class="string">"plugin2"</span><span class="operator">]</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">2</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="operator">]</span><span class="operator">);</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"plugin"</span><span class="operator">,</span><span class="string">priority</span><span class="operator">=&gt;</span><span class="number">0</span><span class="operator">,</span><span class="string">auto_call</span><span class="operator">=&gt;</span><span class="number">1</span><span class="operator">);</span>
</code></pre>

<p>&#x52A0;&#x8F7D;&#x63D2;&#x4EF6;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;auto_call&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x81EA;&#x52A8;&#x6267;&#x884C;&#xFF08;&#x9ED8;&#x8BA4;&#x5728;run&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x6267;&#x884C;&#xFF09;&#xFF0C;priority&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x63D2;&#x4EF6;&#x6267;&#x884C;&#x7684;&#x4F18;&#x5148;&#x7EA7;</p>

<p>&#x6570;&#x5B57;&#x8D8A;&#x5927;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#xFF0C;&#x63D2;&#x4EF6;&#x4F1A;&#x88AB;&#x4F18;&#x5148;&#x6267;&#x884C;</p>

<h2 id="call">call</h2>

<p>&#x624B;&#x52A8;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#x3001;&#x9002;&#x5408;auto_call=&gt;0&#x7684;&#x63D2;&#x4EF6;&#x7684;&#x624B;&#x52A8;&#x6267;&#x884C;&#x6A21;&#x5F0F;&#xFF0C;&#x5F53;auto_call=&gt;1&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x6267;&#x884C;call</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">call</span><span class="operator">(</span><span class="string">"plugin"</span><span class="operator">,</span><span class="operator">[</span>å¯éåæ°<span class="operator">]</span><span class="operator">);</span>
</code></pre>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x63D2;&#x4EF6;&#x7BA1;&#x7406;&#x673A;&#x5236;&#xFF0C;&#x63D2;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;call&#x51FD;&#x6570;&#xFF0C;&#x5305;&#x540D;&#x9ED8;&#x8BA4;&#x662F;Mojo:Webqq::Plugin::</p>

<p>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;hello world&#x63D2;&#x4EF6;&#xFF0C;&#x6548;&#x679C;&#x662F;&#x5BF9;&#x63A5;&#x6536;&#x5230;&#x7684;&#x4EFB;&#x610F;&#x6D88;&#x606F;&#x56DE;&#x590D;&#x4E00;&#x4E2A;&quot;hello world&quot;</p>

<p>&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x5305; Mojo:Webqq::Plugin::HelloWorld</p>

<pre><code>    <span class="keyword">package</span> <span class="variable">Mojo</span><span class="operator">:</span><span class="variable">Webqq::Plugin::HelloWorld</span><span class="operator">;</span>
    <span class="keyword">our</span> <span class="variable">$PRIORITY</span> <span class="operator">=</span> <span class="number">10</span><span class="operator">;</span> <span class="comment">#å¯çç¥ï¼é¤äºå¨loadä¸­ä½¿ç¨priorityè®¾ç½®ä¼åçº§ï¼ä¹å¯ä»¥éè¿ååéè®¾ç½®</span>
    <span class="keyword">our</span> <span class="variable">$AUTO_CALL</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span> <span class="comment">#å¯çç¥ï¼éè¿ååéè®¾ç½®æä»¶æ¯å¦é»è®¤å è½½åç«å»æ§è¡</span>
    <span class="keyword">sub</span><span class="variable"> call</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$client</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
        <span class="keyword">my</span> <span class="variable">$data</span>   <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span> <span class="comment">#å¯è½åå«çdataæ°æ®</span>
        <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">on</span><span class="operator">(</span><span class="string">receive_message</span><span class="operator">=&gt;</span><span class="keyword">sub</span><span class="operator">{</span>
            <span class="keyword">my</span><span class="operator">(</span><span class="variable">$client</span><span class="operator">,</span><span class="variable">$msg</span><span class="operator">)=</span><span class="variable">@_</span><span class="operator">;</span>
            <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">reply_message</span><span class="operator">(</span><span class="variable">$msg</span><span class="operator">,</span><span class="string">"hello world"</span><span class="operator">);</span>
        <span class="operator">});</span>
    <span class="operator">}</span>
    <span class="number">1</span><span class="operator">;</span>
</code></pre>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x52A0;&#x8F7D;&#x548C;&#x6267;&#x884C;&#x63D2;&#x4EF6;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p>

<pre><code>    <span class="comment">#å¦æä½ çæä»¶å¹¶éMojo::Webqq::Plugin::ç¸å¯¹å½åè§åï¼åå¯ä»¥å¨åç§°åä½¿ç¨"+"è¡¨ç¤ºæä»¶ç»å¯¹åç§°</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"HelloWorld"</span><span class="operator">);</span> 
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">run</span><span class="operator">();</span>
       
</code></pre>

<p>&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x63D2;&#x4EF6;&#x5C06;&#x4F1A;&#x88AB;&#x52A0;&#x8F7D;&#x5E76;&#x81EA;&#x52A8;&#x6267;&#x884C;&#xFF0C;&#x6536;&#x5230;&#x6D88;&#x606F;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x56DE;&#x590D;hello world</p>

<p>&#x6CE8;&#x610F;&#xFF1A;</p>

<p>&#x5F53;&#x591A;&#x4E2A;&#x6D88;&#x606F;&#x5904;&#x7406;&#x7C7B;&#x7684;&#x63D2;&#x4EF6;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x65F6;&#xFF0C;&#x5F80;&#x5F80;&#x5B58;&#x5728;&#x51B2;&#x7A81;&#x7684;&#x60C5;&#x51B5;</p>

<p>&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#x5BF9;&#x6D88;&#x606F;&#x5904;&#x7406;&#x5B8C;&#x5E76;&#x4E0D;&#x5E0C;&#x671B;&#x5176;&#x4ED6;&#x63D2;&#x4EF6;&#x518D;&#x7EE7;&#x7EED;&#x5904;&#x7406;&#x8BE5;&#x6D88;&#x606F;&#xFF08;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;receive_message&#x4E8B;&#x4EF6;&#x4F1A;&#x5E7F;&#x64AD;&#x7ED9;&#x6240;&#x6709;&#x8BA2;&#x9605;&#x8BE5;&#x4E8B;&#x4EF6;&#x7684;&#x56DE;&#x8C03;&#xFF09;</p>

<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x63D2;&#x4EF6;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4F7F;&#x5F97;&#x4E8B;&#x4EF6;&#x88AB;&#x89E6;&#x53D1;&#x65F6;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x8F83;&#x9AD8;&#x7684;&#x63D2;&#x4EF6;&#x83B7;&#x5F97;&#x4F18;&#x5148;&#x6267;&#x884C;</p>

<p>&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x518D;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;$msg-&gt;allow_plugin(0) &#x6765;&#x7981;&#x6B62;&#x5176;&#x4ED6;&#x63D2;&#x4EF6;&#x7EE7;&#x7EED;&#x5904;&#x7406;&#x8BE5;&#x6D88;&#x606F;&#xFF0C;&#x6BCF;&#x4E2A;&#x6D88;&#x606F;&#x90FD;&#x5E26;&#x6709;&#x4E00;&#x4E2A;allow_plugin&#x7684;&#x5C5E;&#x6027;</p>

<p>&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x5EFA;&#x8BAE;&#x6027;&#x7684;&#x63D2;&#x4EF6;&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x975E;&#x5F3A;&#x5236;&#x9075;&#x5B88;</p>

<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x63D2;&#x4EF6;&#x7684;&#x624B;&#x52A8;&#x6267;&#x884C;&#x6A21;&#x5F0F;&#xFF0C;&#x81EA;&#x5DF1;&#x6839;&#x636E;&#x9700;&#x8981;&#x6765;&#x6267;&#x884C;&#x63D2;&#x4EF6;</p>

<h1 id="6">&#x63D2;&#x4EF6;&#x5217;&#x8868;</h1>

<h2 id="Mojo::Webqq::Plugin::ShowMsg">Mojo::Webqq::Plugin::ShowMsg</h2>

<p>&#x6253;&#x5370;&#x6D88;&#x606F;&#x5230;&#x7EC8;&#x7AEF;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"ShowMsg"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">allow_group</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">]</span><span class="operator">,</span>  <span class="comment">#å¯éï¼åè®¸æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_group</span>   <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"ç§äººç¾¤"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
    <span class="operator">}</span><span class="operator">);</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::StockInfo">Mojo::Webqq::Plugin::StockInfo</h2>

<p>&#x67E5;&#x8BE2;&#x80A1;&#x7968;&#x4FE1;&#x606F;&#xFF0C;&#x804A;&#x5929;&#x5185;&#x5BB9;&#x4E2D;&#x8F93;&#x5165; &quot;gp 000001&quot; &#x6216;&#x8005; &quot;&#x80A1;&#x7968; 000001&quot; &#x89E6;&#x53D1;</p>

<p>&#x76EE;&#x524D;&#x4EC5;&#x652F;&#x6301;&#x4E0A;&#x6D77;&#x548C;&#x6DF1;&#x5733;6&#x4F4D;&#x6570;&#x5B57;&#x80A1;&#x7968;&#x4EE3;&#x7801;</p>

<p>&#x4F5C;&#x8005; shalk <a href="https://github.com/shalk">https://github.com/shalk</a></p>

<h2 id="Mojo::Webqq::Plugin::MsgSync">Mojo::Webqq::Plugin::MsgSync</h2>

<p>&#x5B9E;&#x73B0;QQ&#x7FA4;&#x548C;IRC&#x7684;&#x8054;&#x901A;&#xFF0C;&#x5F7C;&#x6B64;&#x7684;&#x6D88;&#x606F;&#x81EA;&#x52A8;&#x540C;&#x6B65;&#xFF0C;&#x91C7;&#x7528;&#x7684;&#x662F;irc bot&#x8F6C;&#x53D1;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x4F9D;&#x8D56;<a>Mojo::IRC</a>&#x6A21;&#x5757;</p>

<p>&#x8BE5;&#x63D2;&#x4EF6;&#x529F;&#x80FD;&#x4E0D;&#x591F;&#x5F3A;&#x5927;&#xFF0C;&#x4F53;&#x9A8C;&#x4E5F;&#x4E0D;&#x591F;&#x597D;&#xFF0C;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x88AB;&#x63D2;&#x4EF6; Mojo::Webqq::Plugin::IRCShell &#x53D6;&#x4EE3;&#x4E86;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"MsgSync"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">irc</span><span class="operator">=&gt;</span><span class="operator">{</span><span class="string">nick</span><span class="operator">=&gt;</span><span class="string">"xxxx"</span><span class="operator">,</span><span class="string">user</span><span class="operator">=&gt;</span><span class="string">"xxxx"</span><span class="operator">,</span><span class="string">pass</span><span class="operator">=&gt;</span><span class="string">"xxxx"</span><span class="operator">,</span><span class="string">server</span><span class="operator">=&gt;</span><span class="string">"irc.perfi.wang"</span><span class="operator">}</span><span class="operator">,</span>
        <span class="string">pairs</span><span class="operator">=&gt;</span><span class="operator">[</span>
            <span class="operator">[</span><span class="string">"#ChinaPerl"</span><span class="operator">,</span><span class="variable">$m</span><span class="operator">-&gt;</span><span class="variable">search_group</span><span class="operator">(</span><span class="string">gname</span><span class="operator">=&gt;</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">)</span><span class="operator">]</span><span class="operator">,</span>
            <span class="operator">[</span><span class="string">"#Mojolicious"</span><span class="operator">,</span><span class="variable">$m</span><span class="operator">-&gt;</span><span class="variable">search_group</span><span class="operator">(</span><span class="string">gname</span><span class="operator">=&gt;</span><span class="string">"Mojolicious"</span><span class="operator">)</span><span class="operator">]</span><span class="operator">,</span>
        <span class="operator">]</span>
    <span class="operator">}</span><span class="operator">);</span>    
</code></pre>

<h2 id="Mojo::Webqq::Plugin::IRCShell">Mojo::Webqq::Plugin::IRCShell</h2>

<p>&#x5C06;qq&#x534F;&#x8BAE;&#x8F6C;&#x6362;&#x6210;irc&#x534F;&#x8BAE;&#xFF0C;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x7684;irc&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F7F;&#x7528;&#x4EFB;&#x610F;irc&#x5BA2;&#x6237;&#x7AEF;&#xFF08;irc user&#x8BBE;&#x7F6E;&#x4E3A;qq&#x53F7;&#xFF09;&#x8FDE;&#x63A5;&#x540E;&#x5373;&#x53EF;&#x4EE5;&#x6309;&#x7167;irc&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;qq</p>

<p>&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x6A21;&#x5757; <a>Mojo::IRC::Server::Chinese</a></p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"IRCShell"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span><span class="string">listen</span><span class="operator">=&gt;</span><span class="operator">[</span> <span class="operator">{</span><span class="string">host</span><span class="operator">=&gt;</span><span class="string">"127.0.0.1"</span><span class="operator">,</span><span class="string">port</span><span class="operator">=&gt;</span><span class="number">6667</span><span class="operator">}</span> <span class="operator">]</span> <span class="operator">}</span> <span class="operator">);</span><span class="comment">#å¼å¯æ¬å°çirc server</span>
    <span class="comment">#æ¯æçåæ°åæ¬ï¼</span>
    <span class="variable">host</span>                <span class="comment">#é»è®¤0.0.0.0</span>
    <span class="variable">port</span>                <span class="comment">#é»è®¤6667</span>
    <span class="variable">master_irc_user</span>     <span class="comment">#åqqå¹éçirc userå¸å·ï¼é»è®¤æç§åqqå·ç¸åçuseræèå®¢æ·ç«¯ipæ¯æ¬æºå°åä½ä¸ºè¯å«è§å</span>
    <span class="variable">load_friend</span>         <span class="comment">#0|1 é»è®¤æ¯0 æ¯å¦åå§ä¸ºæ¯ä¸ªå¥½åçæircèæå¸å·å¹¶å å¥é¢é #æçå¥½å</span>
    <span class="variable">image_api</span>           <span class="comment">#å¼å®¹elimageå¾åºapiå°åï¼å°qqå¾çè½¬ä¸ºè¿æ¥ï¼æ¹ä¾¿å¨ircä¸æ¥çå¾çï¼é»è®¤æ²¡æå¯ç¨</span>
                        <span class="comment">#æ¨èä¾äºçelimage http://img.vim-cn.com/</span>
</code></pre>

<p>qq&#x597D;&#x53CB;&#x4F1A;&#x9ED8;&#x8BA4;&#x52A0;&#x5165;&#x5230;irc&#x7684; &#39;#&#x6211;&#x7684;&#x597D;&#x53CB;&#39; &#x9891;&#x9053;&#x4E2D;</p>

<p>&#x6BCF;&#x4E2A;qq&#x7FA4;&#x4E5F;&#x4F1A;&#x5728;irc&#x4E0A;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;&#x9891;&#x9053;&#xFF0C;&#x6BD4;&#x5982;qq&#x7FA4;[PERL&#x5B66;&#x4E60;&#x4EA4;&#x6D41;]&#x5BF9;&#x5E94;&#x7684;irc&#x9891;&#x9053;&#x4E3A;&#39;#PERL&#x5B66;&#x4E60;&#x4EA4;&#x6D41;&#39;</p>

<p>&#x4F7F;&#x7528;&#x4EFB;&#x610F;&#x7684;irc&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x5230;&#x670D;&#x52A1;&#x5668;,&#x4F60;&#x4FBF;&#x53EF;&#x4EE5;&#x5728;irc&#x4E0A;&#x5B8C;&#x6210;&#x548C;qq&#x597D;&#x53CB;&#x7684;&#x804A;&#x5929;&#xFF0C;&#x7FA4;&#x804A;&#x7B49;</p>

<p>&#x672C;&#x63D2;&#x4EF6;&#x66F4;&#x9002;&#x5408;&#x60F3;&#x8981;&#x5728;Linux&#x73AF;&#x5883;&#x4E0B;&#x4F7F;&#x7528;qq&#x7684;irc&#x7231;&#x597D;&#x8005;</p>

<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;irc.perfi.wang&#x7684;#PERL&#x5B66;&#x4E60;&#x4EA4;&#x6D41;&#xFF0C;&#x8BE5;&#x9891;&#x9053;&#x5DF2;&#x7ECF;&#x548C;QQ&#x7FA4;[PERL&#x5B66;&#x4E60;&#x4EA4;&#x6D41;]&#x8054;&#x901A;</p>

<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;irc.perfi.wang&#x7684;#Mojolicious&#xFF0C;&#x8BE5;&#x9891;&#x9053;&#x5DF2;&#x7ECF;&#x548C;QQ&#x7FA4;[Mojolicious]&#x8054;&#x901A;</p>

<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;irc.perfi.wang&#x7684;#Mojo-Webqq&#xFF0C;&#x8BE5;&#x9891;&#x9053;&#x5DF2;&#x7ECF;&#x548C;QQ&#x7FA4;[Mojo-Webqq]&#x8054;&#x901A;</p>

<h2 id="Mojo::Webqq::Plugin::Perldoc">Mojo::Webqq::Plugin::Perldoc</h2>

<p>&#x5B9E;&#x73B0;&#x901A;&#x8FC7;QQ&#x6D88;&#x606F;&#x67E5;&#x8BE2;perldoc&#x6587;&#x6863;&#xFF0C;&#x652F;&#x6301;perldoc -f|-v xxx</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"Perldoc"</span><span class="operator">);</span>
    <span class="comment">#ç±äºè¯¥æä»¶å¤çå®çæ¶æ¯ä¸åºè¯¥åç±å¶ä»æä»¶å¤çï¼å æ­¤æä»¶ä¼åçº§åºè¯¥è®¾ç½®ææ¯å¶ä»æä»¶ä¼åçº§æ´é«ï¼æä»¶é»è®¤ä¼åçº§æ¯0</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::Perlcode">Mojo::Webqq::Plugin::Perlcode</h2>

<p>&#x901A;&#x8FC7;QQ&#x6D88;&#x606F;&#x6267;&#x884C;Perl&#x4EE3;&#x7801;&#xFF0C;&#x4EC5;&#x652F;&#x6301;&#x5728;linux&#x7CFB;&#x7EDF;&#x4E0A;&#x4F7F;&#x7528;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"Perlcode"</span><span class="operator">);</span>
    <span class="comment">#ç±äºè¯¥æä»¶å¤çå®çæ¶æ¯ä¸åºè¯¥åç±å¶ä»æä»¶å¤çï¼å æ­¤æä»¶ä¼åçº§åºè¯¥è®¾ç½®ææ¯å¶ä»æä»¶ä¼åçº§æ´é«ï¼æä»¶é»è®¤ä¼åçº§æ¯0</span>
</code></pre>

<p>&#x89E6;&#x53D1;&#x6761;&#x4EF6;&#xFF1A;&#x6D88;&#x606F;&#x4EE5; &gt;&gt;&gt; &#x5F00;&#x5934;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>

<pre><code>    <span class="operator">&gt;&gt;&gt;</span> <span class="keyword">print</span> <span class="string">"hello world"</span><span class="operator">;</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::ProgramCode">Mojo::Webqq::Plugin::ProgramCode</h2>

<p>&#x901A;&#x8FC7;QQ&#x6D88;&#x606F;&#x6267;&#x884C;&#x5404;&#x79CD;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4EE3;&#x7801;&#xFF0C;&#x5F53;&#x524D;&#x652F;&#x6301;26&#x79CD;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;:</p>

<p>ruby/perl/clojure/coffeescript/bash/cpp/c/assembly/java/scala</p>

<p>csharp/d/erlang/go/idris/rust/php/elixir/fsharp/haskell/javascript</p>

<p>julia/lua/nim/ocaml/python</p>

<p>&#x52A0;&#x8F7D;&#x63D2;&#x4EF6;&#x65B9;&#x6CD5;:</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"ProgramCode"</span><span class="operator">);</span>
</code></pre>

<p>&#x89E6;&#x53D1;&#x6761;&#x4EF6;&#xFF1A; &#x6D88;&#x606F;&#x4EE5; code|language&gt;&gt;&gt;&#x5F00;&#x5934;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>

<h3 id="php">php</h3>

<pre><code>        <span class="variable">code</span><span class="operator">|</span><span class="variable">php</span><span class="operator">&gt;&gt;&gt;</span>
        <span class="operator">&lt;?</span><span class="variable">php</span>
        <span class="variable">echo</span> <span class="string">"Hello World\n"</span><span class="operator">;</span>
</code></pre>

<h3 id="c">c</h3>

<pre><code>        <span class="variable">code</span><span class="operator">|</span><span class="variable">c</span><span class="operator">&gt;&gt;&gt;</span>
        <span class="comment">#include &lt;stdio.h&gt;</span>
        <span class="keyword">int</span> <span class="variable">main</span><span class="operator">()</span> <span class="operator">{</span>
            <span class="keyword">printf</span><span class="operator">(</span><span class="string">"Hello World!\n"</span><span class="operator">);</span>
            <span class="keyword">return</span> <span class="number">0</span><span class="operator">;</span>
        <span class="operator">}</span>
</code></pre>

<h3 id="cpp">cpp</h3>

<pre><code>        <span class="variable">code</span><span class="operator">|</span><span class="variable">cpp</span><span class="operator">&gt;&gt;&gt;</span>
        <span class="comment">#include &lt;iostream&gt;</span>
        <span class="variable">using</span> <span class="variable">namespace</span> <span class="variable">std</span><span class="operator">;</span>
        <span class="keyword">int</span> <span class="variable">main</span><span class="operator">()</span> <span class="operator">{</span>
            <span class="variable">cout</span> <span class="operator">&lt;&lt;</span><span class="default"> </span><span class="string">"Hello World!"</span><span class="operator">;</span><span class="string">
            return 0;
        }
        </span>
</code></pre>

<h3 id="java">java</h3>

<pre><code>        <span class="variable">code</span><span class="operator">|</span><span class="variable">java</span><span class="operator">&gt;&gt;&gt;</span>
        <span class="variable">public</span> <span class="variable">class</span> <span class="variable">Main</span> <span class="operator">{</span>
            <span class="variable">public</span> <span class="variable">static</span> <span class="variable">void</span> <span class="variable">main</span><span class="operator">(</span><span class="variable">String</span><span class="operator">[]</span> <span class="variable">args</span><span class="operator">)</span> <span class="operator">{</span>
                <span class="variable">System</span><span class="operator">.</span><span class="variable">out</span><span class="operator">.</span><span class="variable">println</span><span class="operator">(</span><span class="string">"Hello World!"</span><span class="operator">);</span>
            <span class="operator">}</span>
        <span class="operator">}</span>
</code></pre>

<p>&#x4F5C;&#x8005; limengyu1990 <a href="https://github.com/limengyu1990">https://github.com/limengyu1990</a></p>

<h2 id="Mojo::Webqq::Plugin::MobileInfo">Mojo::Webqq::Plugin::MobileInfo</h2>

<p>&#x901A;&#x8FC7;QQ&#x6D88;&#x606F;&#x67E5;&#x8BE2;&#x624B;&#x673A;&#x5F52;&#x5C5E;&#x5730;&#xFF0C;&#x89E6;&#x53D1;&#x6D88;&#x606F;&#x683C;&#x5F0F;&#xFF1A;</p>

<pre><code>    &#x624B;&#x673A; 1888888888</code></pre>

<p>&#x4F5C;&#x8005; limengyu1990 <a href="https://github.com/limengyu1990">https://github.com/limengyu1990</a></p>

<h2 id="Mojo::Webqq::Plugin::KnowledgeBase">Mojo::Webqq::Plugin::KnowledgeBase</h2>

<p>&#x901A;&#x8FC7;QQ&#x6D88;&#x606F;&#x81EA;&#x5B9A;&#x4E49;&#x95EE;&#x7B54;&#x77E5;&#x8BC6;&#x5E93;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"KnowledgeBase"</span><span class="operator">);</span>
</code></pre>

<p>&#x89E6;&#x53D1;&#x6761;&#x4EF6;&#xFF1A; &#x6D88;&#x606F;&#x4EE5;&#x5982;&#x4E0B;&#x683C;&#x5F0F;&#x53D1;&#x9001;&#x53EF;&#x4EE5;&#x8BBE;&#x5B9A;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#xFF0C;&#x5982;&#x679C;&#x95EE;&#x9898;&#x6216;&#x7B54;&#x6848;&#x5305;&#x542B;&#x7A7A;&#x683C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5F15;&#x53F7; &#x6BD4;&#x5982;&#xFF1A;</p>

<pre><code>    learn &#x4ECA;&#x5929;&#x5929;&#x6C14;&#x600E;&#x4E48;&#x6837;  &#x5929;&#x6C14;&#x5F88;&#x597D;
    &#x5B66;&#x4E60;  &quot;&#x4F60;&#x5403;&#x4E86;&#x5417;&quot;      &#x5F53;&#x7136;&#x5403;&#x4E86;
    learn &#39;&#x54C8;&#x54C8; &#x4F60;&#x771F;&#x7B28;&#39;   &quot;&#x5C31;&#x4F60;&#x806A;&#x660E;&quot;

    del   &#x4ECA;&#x5929;&#x5929;&#x6C14;&#x600E;&#x4E48;&#x6837;
    &#x5220;&#x9664;  &#39;&#x54C8;&#x54C8; &#x4F60;&#x771F;&#x7B28;&#39;</code></pre>

<p>&#x5176;&#x4ED6;&#x66F4;&#x591A;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"KnowledgeBase"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">allow_group</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">]</span><span class="operator">,</span>  <span class="comment">#å¯éï¼åè®¸æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_group</span>   <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"ç§äººç¾¤"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">file</span> <span class="operator">=&gt;</span> <span class="string">'./KnowledgeBase.dat'</span><span class="operator">,</span> <span class="comment">#æ°æ®åºä¿å­è·¯å¾</span>
        <span class="string">learn_command</span>  <span class="operator">=&gt;</span> <span class="string">'study'</span><span class="operator">,</span>     <span class="comment">#èªå®ä¹å­¦ä¹ æä»¤å³é®å­</span>
        <span class="string">delete_command</span> <span class="operator">=&gt;</span><span class="string">'clear'</span><span class="operator">,</span>      <span class="comment">#èªå®ä¹å é¤æä»¤å³é®å­</span>
        <span class="string">learn_operator</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="number">12345</span><span class="operator">,</span><span class="number">678910</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#åè®¸å­¦ä¹ æéçæä½äººqqå·</span>
        <span class="string">delete_operator</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="number">12345</span><span class="operator">,</span><span class="number">678910</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#åè®¸å é¤æéçæä½äººqqå·</span>
    <span class="operator">}</span><span class="operator">);</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::FuckDaShen">Mojo::Webqq::Plugin::FuckDaShen</h2>

<p>&#x5BF9;qq&#x6D88;&#x606F;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&quot;&#x5927;&#x795E;&quot;&#x5173;&#x952E;&#x8BCD;&#x8FDB;&#x884C;&#x9119;&#x89C6;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"FuckDaShen"</span><span class="operator">);</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::Translation">Mojo::Webqq::Plugin::Translation</h2>

<p>&#x591A;&#x56FD;&#x8BED;&#x8A00;&#x7FFB;&#x8BD1;&#x529F;&#x80FD;&#xFF0C;&#x81EA;&#x52A8;&#x68C0;&#x6D4B;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8BED;&#x8A00;&#xFF0C;&#x6D88;&#x606F;&#x6307;&#x4EE4;&#x683C;&#x5F0F;&#xFF1A;</p>

<pre><code>    &#x7FFB;&#x8BD1; hello
    &#x7FFB;&#x8BD1; &#x4F60;&#x597D;
    &#x7FFB;&#x8BD1; &#x3053;&#x3093;&#x306B;&#x3061;&#x306F;</code></pre>

<h2 id="Mojo::Webqq::Plugin::Riddle">Mojo::Webqq::Plugin::Riddle</h2>

<p>&#x8F93;&#x5165;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x731C;&#x8C1C;&#xFF0C;&#x4F5C;&#x8005; limengyu1990 <a href="https://github.com/limengyu1990">https://github.com/limengyu1990</a></p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"Riddle"</span><span class="operator">);</span>
    
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"Riddle"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">allow_group</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">]</span><span class="operator">,</span>  <span class="comment">#å¯éï¼åè®¸æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_group</span>   <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"ç§äººç¾¤"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_user</span>    <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"åè"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¨æ·ï¼å¯ä»¥æ¯ç¨æ·çæ¾ç¤ºåç§°æqqå·ç </span>
        <span class="string">command</span>     <span class="operator">=&gt;</span> <span class="string">"çè°"</span><span class="operator">,</span>   <span class="comment">#å¯éï¼è§¦åå³é®å­</span>
        <span class="string">apikey</span>      <span class="operator">=&gt;</span> <span class="string">"xxxx"</span><span class="operator">,</span>   <span class="comment">#å¯éï¼åè§ http://apistore.baidu.com/apiworks/servicedetail/440.html?qq-pf-to=pcqq.c2c</span>
        <span class="string">timeout</span>     <span class="operator">=&gt;</span> <span class="number">30</span><span class="operator">,</span> <span class="comment">#ç­å¾ç­æ¡çè¶æ¶æ¶é´ï¼è¶æ¶åä¼èªå¨å¬å¸ç­æ¡</span>
    <span class="operator">}</span><span class="operator">);</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::ShowQRcode">Mojo::Webqq::Plugin::ShowQRcode</h2>

<p>&#x8C03;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x56FE;&#x7247;&#x67E5;&#x770B;&#x7A0B;&#x5E8F;&#x6765;&#x5C55;&#x793A;&#x4E8C;&#x7EF4;&#x7801;&#x56FE;&#x7247;&#xFF0C;&#x65B9;&#x4FBF;&#x626B;&#x63CF;&#xFF0C;&#x4F5C;&#x8005; autodataming <a href="https://github.com/autodataming">https://github.com/autodataming</a></p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"ShowQRcode"</span><span class="operator">);</span><span class="comment">#å½åä»æ¯æwin</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::GasPrice">Mojo::Webqq::Plugin::GasPrice</h2>

<p>&#x8F93;&#x5165;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x731C;&#x8C1C;&#xFF0C;&#x4F5C;&#x8005; hyvinlam <a href="https://github.com/hyvinlam">https://github.com/hyvinlam</a></p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"GasPrice"</span><span class="operator">);</span>
    
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"GasPrice"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">allow_group</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">]</span><span class="operator">,</span>  <span class="comment">#å¯éï¼åè®¸æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_group</span>   <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"ç§äººç¾¤"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">command</span>     <span class="operator">=&gt;</span> <span class="string">"æ²¹ä»·"</span><span class="operator">,</span>   <span class="comment">#å¯éï¼è§¦åå³é®å­</span>
        <span class="string">apikey</span>      <span class="operator">=&gt;</span> <span class="string">"xxxx"</span><span class="operator">,</span>   <span class="comment">#å¯éï¼åè§ http://apistore.baidu.com/apiworks/servicedetail/710.html</span>
        <span class="string">msg_tail</span>    <span class="operator">=&gt;</span> <span class="string">"æ¶æ¯å°¾å·´"</span><span class="operator">,</span> <span class="comment">#å¯é</span>
        <span class="string">is_need_at</span>  <span class="operator">=&gt;</span> <span class="number">0</span><span class="operator">,</span> <span class="comment">#æ¯å¦éè¦è¾ç¹,é»è®¤å¼ä¸º0</span>
    <span class="operator">}</span><span class="operator">);</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::GroupManage">Mojo::Webqq::Plugin::GroupManage</h2>

<p>&#x5E38;&#x7528;&#x7FA4;&#x7BA1;&#x7406;&#x529F;&#x80FD;&#xFF0C;&#x5305;&#x62EC; &#x65B0;&#x4EBA;&#x5165;&#x7FA4;&#x6B22;&#x8FCE;&#x3001;&#x6210;&#x5458;&#x79BB;&#x5F00;&#x63D0;&#x9192;&#x3001;&#x9650;&#x5236;&#x53D1;&#x8A00;&#x9891;&#x7387;&#x3001;&#x9650;&#x5236;&#x53D1;&#x56FE;&#x9891;&#x7387;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"GroupManage"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span> 
        <span class="string">allow_group</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">]</span><span class="operator">,</span>  <span class="comment">#å¯éï¼åè®¸æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_group</span>   <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"ç§äººç¾¤"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">new_group_member</span> <span class="operator">=&gt;</span> <span class="string">'æ¬¢è¿æ°æå @%s å¥ç¾¤[é¼æ][é¼æ][é¼æ]'</span><span class="operator">,</span> <span class="comment">#æ°æåå¥ç¾¤æ¬¢è¿è¯­ï¼%sä¼è¢«æ¿æ¢æç¾¤æååç§°</span>
        <span class="string">lose_group_member</span> <span class="operator">=&gt;</span> <span class="string">'å¾éæ¾ @%s ç¦»å¼äºæ¬ç¾¤[æµæ³ª][æµæ³ª][æµæ³ª]'</span><span class="operator">,</span> <span class="comment">#æåç¦»ç¾¤æé</span>
        <span class="string">speak_limit</span> <span class="operator">=&gt;</span> <span class="operator">{</span><span class="comment">#åéæ¶æ¯é¢çéå¶</span>
            <span class="string">period</span>          <span class="operator">=&gt;</span> <span class="number">10</span><span class="operator">,</span> <span class="comment">#ç»è®¡å¨æï¼åä½æ¯ç§</span>
            <span class="string">warn_limit</span>      <span class="operator">=&gt;</span> <span class="number">8</span><span class="operator">,</span> <span class="comment">#ç»è®¡å¨æåè¾¾å°è¯¥æ¬¡æ°ï¼åéè­¦åä¿¡æ¯</span>
            <span class="string">warn_message</span>    <span class="operator">=&gt;</span> <span class="string">'@%s è­¦å, æ¨åè¨è¿äºé¢ç¹ï¼å¯è½ä¼è¢«ç¦è¨æè¸¢åºæ¬ç¾¤'</span><span class="operator">,</span> <span class="comment">#è­¦ååå®¹</span>
            <span class="string">shutup_limit</span>    <span class="operator">=&gt;</span> <span class="number">10</span><span class="operator">,</span> <span class="comment">#ç»è®¡å¨æåè¾¾å°è¯¥æ¬¡æ°ï¼æåä¼è¢«ç¦è¨</span>
            <span class="string">shutup_time</span>     <span class="operator">=&gt;</span> <span class="number">600</span><span class="operator">,</span> <span class="comment">#ç¦è¨æ¶é¿</span>
            <span class="comment">#kick_limit      =&gt; 15,   #ç»è®¡å¨æåè¾¾å°è¯¥æ¬¡æ°ï¼æåä¼è¢«è¸¢åºæ¬ç¾¤</span>
        <span class="operator">}</span><span class="operator">,</span>
        <span class="string">pic_limit</span> <span class="operator">=&gt;</span> <span class="operator">{</span><span class="comment">#åå¾é¢çéå¶</span>
            <span class="string">period</span>          <span class="operator">=&gt;</span> <span class="number">600</span><span class="operator">,</span>
            <span class="string">warn_limit</span>      <span class="operator">=&gt;</span> <span class="number">6</span><span class="operator">,</span>
            <span class="string">warn_message</span>   <span class="operator">=&gt;</span> <span class="string">'@%s è­¦å, æ¨åå¾è¿å¤ï¼å¯è½ä¼è¢«ç¦è¨æè¸¢åºæ¬ç¾¤'</span><span class="operator">,</span>
            <span class="string">shutup_limit</span>    <span class="operator">=&gt;</span> <span class="number">8</span><span class="operator">,</span>
            <span class="string">kick_limit</span>      <span class="operator">=&gt;</span> <span class="number">10</span><span class="operator">,</span>
        <span class="operator">}</span><span class="operator">,</span>
        <span class="string">keyword_limit</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
            <span class="string">period</span><span class="operator">=&gt;</span> <span class="number">600</span><span class="operator">,</span>
            <span class="string">keyword</span><span class="operator">=&gt;</span><span class="operator">[</span><span class="string">qw(fuck å»é¼ ä½ å¦¹ æ»)</span><span class="operator">]</span><span class="operator">,</span>
            <span class="string">warn_limit</span><span class="operator">=&gt;</span><span class="number">3</span><span class="operator">,</span>
            <span class="string">shutup_limit</span><span class="operator">=&gt;</span><span class="number">5</span><span class="operator">,</span>
            <span class="comment">#kick_limit=&gt;undef,</span>
        <span class="operator">}</span><span class="operator">,</span>
    <span class="operator">}</span><span class="operator">);</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::PostQRcode">Mojo::Webqq::Plugin::PostQRcode</h2>

<p>&#x767B;&#x5F55;&#x8FC7;&#x7A0B;&#x5982;&#x679C;&#x9700;&#x8981;&#x624B;&#x673A;&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;&#xFF0C;&#x4F1A;&#x5C06;&#x4E8C;&#x7EF4;&#x7801;&#x4EE5;&#x90AE;&#x4EF6;&#x9644;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#x53D1;&#x9001;&#x5230;&#x6307;&#x5B9A;&#x90AE;&#x7BB1;&#xFF0C;&#x518D;&#x901A;&#x8FC7;&#x624B;&#x673A;QQ&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;</p>

<p>&#x6CE8;&#x610F;&#xFF1A; &#x7531;&#x4E8E;&#x9700;&#x8981;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x9644;&#x4EF6;&#xFF0C;&#x4F9D;&#x8D56;&#x6A21;&#x5757; <a>Mojo::SMTP::Client</a> <a>MIME::Lite</a>&#xFF0C;&#x9700;&#x8981;&#x5355;&#x72EC;&#x5B89;&#x88C5;</p>

<pre><code>    <span class="comment">#æä»¶éè¦ä½¿ç¨å°login()æ¹æ³æ§è¡è¿ç¨ä¸­è§¦åçinput_qrcodeäºä»¶ï¼å æ­¤éè¦å¨login()æ§è¡ä¹åå è½½</span>
    <span class="comment">#æä»¶èªèº«è®¾ç½®äºcall_on_load=&gt;1ï¼å æ­¤ä¼å¨å è½½åé©¬ä¸æ§è¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"PostQRcode"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">smtp</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#é®ç®±çsmtpå°å  </span>
        <span class="string">port</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#smtpæå¡å¨ç«¯å£ï¼é»è®¤25</span>
        <span class="string">from</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#åä»¶äºº</span>
        <span class="string">to</span>      <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#æ¶ä»¶äºº</span>
        <span class="string">user</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#smtpç»å½å¸å·</span>
        <span class="string">pass</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#smtpç»å½å¯ç </span>
    <span class="operator">}</span><span class="operator">);</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">login</span><span class="operator">();</span>
    <span class="operator">...;</span>
    
    æ¶å°çé®ä»¶åå®¹å¦ä¸ï¼
    
    ä¸»é¢ï¼<span class="variable">QQ</span>å¸å· <span class="variable">xxxx</span> æ«æäºç»´ç 
    éä»¶ï¼<span class="variable">webqq_qrcode_xxxx</span><span class="operator">.</span><span class="variable">png</span>
    æ­£æï¼è¯·ä½¿ç¨ææº<span class="variable">QQ</span>æ«æéä»¶ä¸­çäºç»´ç 
</code></pre>

<h2 id="Mojo::Webqq::Plugin::PostImgVerifycode">Mojo::Webqq::Plugin::PostImgVerifycode</h2>

<p>&#x767B;&#x5F55;&#x8FC7;&#x7A0B;&#x5982;&#x679C;&#x9700;&#x8981;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x4F1A;&#x53D1;&#x90AE;&#x4EF6;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x90AE;&#x7BB1;&#xFF0C;&#x901A;&#x8FC7;&#x70B9;&#x51FB;&#x90AE;&#x4EF6;&#x4E2D;&#x7684;&#x94FE;&#x63A5;&#x8FDC;&#x7A0B;&#x63D0;&#x4EA4;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x9002;&#x5408;&#x914D;&#x5408;&#x624B;&#x673A;&#x4F7F;&#x7528;</p>

<p>&#x6CE8;&#x610F;&#xFF1A; &#x7531;&#x4E8E;&#x9700;&#x8981;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x9644;&#x4EF6;&#xFF0C;&#x4F9D;&#x8D56;&#x6A21;&#x5757; <a>Mojo::SMTP::Client</a> <a>MIME::Lite</a>&#xFF0C;&#x9700;&#x8981;&#x5355;&#x72EC;&#x5B89;&#x88C5;</p>

<pre><code>    <span class="comment">#æä»¶éè¦ä½¿ç¨å°login()æ¹æ³æ§è¡è¿ç¨ä¸­è§¦åçinput_img_verifycodeäºä»¶ï¼å æ­¤éè¦å¨login()æ§è¡ä¹åå è½½</span>
    <span class="comment">#æä»¶èªèº«è®¾ç½®äºcall_on_load=&gt;1ï¼å æ­¤ä¼å¨å è½½åé©¬ä¸æ§è¡</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"PostImgVerifycode"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">smtp</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#é®ç®±çsmtpå°å  </span>
        <span class="string">port</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#smtpæå¡å¨ç«¯å£ï¼é»è®¤25</span>
        <span class="string">from</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#åä»¶äºº</span>
        <span class="string">to</span>      <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#æ¶ä»¶äºº</span>
        <span class="string">user</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#smtpç»å½å¸å·</span>
        <span class="string">pass</span>    <span class="operator">=&gt;</span>  <span class="string">'xxxx'</span><span class="operator">,</span> <span class="comment">#smtpç»å½å¯ç </span>
        <span class="string">post_host</span> <span class="operator">=&gt;</span> <span class="string">'xxx.xxx.xxx.xxx'</span> <span class="operator">,</span> <span class="comment">#æ¬æºå¬ç½IPå°åï¼éè¦è¿ç¨è®¿é®</span>
        <span class="string">post_port</span> <span class="operator">=&gt;</span> <span class="string">'xxxx'</span>            <span class="operator">,</span> <span class="comment">#æäº¤éªè¯ç çé¾æ¥å°åä¸­ä½¿ç¨çç«¯å£ï¼é»è®¤1987</span>
    <span class="operator">}</span><span class="operator">);</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">login</span><span class="operator">();</span>
    <span class="operator">...;</span>
    
    æ¶å°çé®ä»¶åå®¹å¦ä¸ï¼
    
    ä¸»é¢ï¼<span class="variable">QQ</span>å¸å· <span class="variable">xxxx</span> ç»å½éªè¯ç 
    éä»¶ï¼<span class="variable">webqq_img_verfiy_xxxx</span><span class="operator">.</span><span class="variable">jpg</span>
    æ­£æï¼è¯·ç¹å»ä»¥ä¸é¾æ¥æäº¤éªè¯ç ï¼<span class="variable">http</span><span class="operator">:</span><span class="regex">//xxx</span><span class="operator">.</span><span class="variable">xxx</span><span class="operator">.</span><span class="variable">xxx</span><span class="operator">.</span><span class="variable">xxx</span><span class="operator">:</span><span class="variable">xxxx</span><span class="operator">/</span><span class="variable">check_code</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::SmartReply">Mojo::Webqq::Plugin::SmartReply</h2>

<p>&#x5B9E;&#x73B0;&#x673A;&#x5668;&#x4EBA;&#x7684;&#x667A;&#x80FD;&#x56DE;&#x590D;&#xFF0C;&#x652F;&#x6301;&#x597D;&#x53CB;&#x6D88;&#x606F;&#x3001;&#x7FA4;&#x6D88;&#x606F;&#x3001;&#x7FA4;&#x4E34;&#x65F6;&#x6D88;&#x606F;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E34;&#x65F6;&#x6D88;&#x606F;&#x7684;&#x81EA;&#x52A8;&#x56DE;&#x590D;</p>

<p>&#x4E3A;&#x907F;&#x514D;&#x5BF9;&#x7FA4;&#x5185;&#x6210;&#x5458;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#xFF0C;&#x9ED8;&#x8BA4;&#x7FA4;&#x5185;&#x9700;&#x8981;&#x4F7F;&#x7528; @&#x5E10;&#x53F7;&#x6635;&#x79F0; &#x6765;&#x89E6;&#x53D1;</p>

<pre><code>    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"SmartReply"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">allow_group</span>     <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">]</span><span class="operator">,</span>  <span class="comment">#å¯éï¼åè®¸æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_group</span>       <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"ç§äººç¾¤"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¾¤ï¼å¯ä»¥æ¯ç¾¤åç§°æç¾¤å·ç </span>
        <span class="string">ban_user</span>        <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"åè"</span><span class="operator">,</span><span class="number">123456</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼ç¦ç¨è¯¥æä»¶çç¨æ·ï¼å¯ä»¥æ¯ç¨æ·çæ¾ç¤ºåç§°æqqå·ç </span>
        <span class="string">notice_reply</span>    <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">"å¯¹ä¸èµ·ï¼è¯·ä¸è¦è¿ä¹é¢ç¹çè¾ç¹æ"</span><span class="operator">,</span><span class="string">"å¯¹ä¸èµ·ï¼æ¨çè¾ç¹æ¬¡æ°å¤ªå¤"</span><span class="operator">]</span><span class="operator">,</span> <span class="comment">#å¯éï¼æéæ¶ç¨è¯­</span>
        <span class="string">notice_limit</span>    <span class="operator">=&gt;</span> <span class="number">8</span> <span class="operator">,</span>  <span class="comment">#å¯éï¼è¾¾å°è¯¥æ¬¡æ°æéå¯¹è¯æ¬¡æ°å¤ªå¤ï¼æéè¯­æ¥èªé»è®¤æ notice_reply</span>
        <span class="string">warn_limit</span>      <span class="operator">=&gt;</span> <span class="number">10</span><span class="operator">,</span>  <span class="comment">#å¯é,è¾¾å°è¯¥æ¬¡æ°ï¼ä¼è¢«è­¦å</span>
        <span class="string">ban_limit</span>       <span class="operator">=&gt;</span> <span class="number">12</span><span class="operator">,</span>  <span class="comment">#å¯é,è¾¾å°è¯¥æ¬¡æ°ä¼è¢«åå¥é»åå¤§ä¸åè¿è¡åå¤</span>
        <span class="string">period</span>          <span class="operator">=&gt;</span> <span class="number">600</span><span class="operator">,</span> <span class="comment">#å¯éï¼éå¶å¨æï¼åä½ ç§</span>
        <span class="string">is_need_at</span>       <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>  <span class="comment">#é»è®¤æ¯1 æ¯å¦éè¦è¾ç¹æè§¦ååå¤</span>
    <span class="operator">}</span><span class="operator">);</span>
</code></pre>

<h2 id="Mojo::Webqq::Plugin::Openqq">Mojo::Webqq::Plugin::Openqq</h2>

<p>&#x63D0;&#x4F9B;HTTP API&#x63A5;&#x53E3;&#xFF0C;&#x65B9;&#x4FBF;&#x83B7;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x5E10;&#x53F7;&#x3001;&#x597D;&#x53CB;&#x3001;&#x7FA4;&#x3001;&#x8BA8;&#x8BBA;&#x7EC4;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x53CA;&#x901A;&#x8FC7;&#x63A5;&#x53E3;&#x53D1;&#x9001;&#x548C;&#x63A5;&#x6536;&#x597D;&#x53CB;&#x6D88;&#x606F;&#x3001;&#x7FA4;&#x6D88;&#x606F;&#x3001;&#x7FA4;&#x4E34;&#x65F6;&#x6D88;&#x606F;&#x548C;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E34;&#x65F6;&#x6D88;&#x606F;</p>

<pre><code>    <span class="comment">#å¼å®¹èçæ¬ï¼dataæ¯ä¸ä¸ªARRAYå¼ç¨,å¯ä»¥è®¾ç½®å¤ä¸ªçå¬çå°ååç«¯å£</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"Openqq"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">[</span> <span class="operator">{</span><span class="string">host</span><span class="operator">=&gt;</span><span class="string">"127.0.0.1"</span><span class="operator">,</span><span class="string">port</span><span class="operator">=&gt;</span><span class="number">5000</span><span class="operator">}</span><span class="operator">,</span> <span class="operator">]</span><span class="operator">);</span> 
    
    <span class="comment">#æ°çæ¬ï¼dataå¯ä»¥æ¯ä¸ä¸ªHASHå¼ç¨</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"Openqq"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>                                                 
        <span class="string">listen</span> <span class="operator">=&gt;</span> <span class="operator">[</span> <span class="operator">{</span><span class="string">host</span><span class="operator">=&gt;</span><span class="string">"127.0.0.1"</span><span class="operator">,</span><span class="string">port</span><span class="operator">=&gt;</span><span class="number">5000</span><span class="operator">}</span><span class="operator">,</span> <span class="operator">]</span> <span class="operator">,</span> <span class="comment">#çå¬çå°ååç«¯å£ï¼æ¯æå¤ä¸ª</span>
        <span class="string">auth</span>   <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span><span class="keyword">my</span><span class="operator">(</span><span class="variable">$param</span><span class="operator">,</span><span class="variable">$controller</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">},</span>    <span class="comment">#å¯éï¼è®¤è¯åè°å½æ°ï¼ç¨äºè¿è¡è¯·æ±é´æ</span>
        <span class="string">post_api</span> <span class="operator">=&gt;</span> <span class="string">'http://xxxx'</span><span class="operator">,</span>                      <span class="comment">#å¯éï¼èªå®ä¹çæ¥æ¶æ¶æ¯ä¸æ¥æ¥å£,å¹¶å¯ä»¥æ ¹æ®æ¥å£è¿ååå®¹åå¤æ¶æ¯</span>
    <span class="operator">}</span><span class="operator">);</span>
    
    <span class="comment">#è¥dataä¸­è®¾ç½®äºauthå½æ°å¼ç¨ï¼åè¡¨ç¤ºapiæ¥å£å¼å¯è®¤è¯</span>
    <span class="comment">#è®¤è¯å½æ°è¿åå¼ä¸ºçï¼è®¤è¯éè¿ï¼å½æ°è¿åå¼ä¸ºåï¼è®¤è¯å¤±è´¥ï¼æ¥å£è¿å403</span>
    
    <span class="comment">#è®¤è¯åè°å½æ°çç¬¬ä¸ä¸ªåæ°æ¯ä¸ä¸ªHASHå¼ç¨ï¼åå«getæpostæäº¤çåæ°ä¿¡æ¯</span>
    <span class="comment">#ç¬¬äºä¸ªåæ°æ¯ä¸ä¸ªMojoliciousçcontrollerå¯¹è±¡ï¼éåå¯¹Mojoliciousæ¯è¾çæçæåµä¸ï¼å©ç¨controllerè¿è¡é«çº§çè®¤è¯æ§å¶</span>
    
    <span class="comment">#authå½æ°ç¤ºä¾ï¼</span>
    
    <span class="comment">#ç®åçæ¶é´æ³è¿æé²çé¾ </span>
    <span class="comment">#http://127.0.0.1/openqq/send_message?id=xxxx&amp;content=xxxx&amp;key=xxxx&amp;exp=xxxx</span>
    <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$param</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
        <span class="keyword">my</span> <span class="variable">$secret</span> <span class="operator">=</span> <span class="string">'this is your secret key'</span><span class="operator">;</span>
        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> <span class="keyword">time</span><span class="operator">()</span> <span class="operator">&gt;=</span> <span class="variable">$param</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">exp</span><span class="operator">}</span><span class="operator">;</span> <span class="comment">#åæ°å¼çexpä¸ºè¿ææ¶é´ï¼è¶è¿è¿ææ¶é´é¾æ¥å·²å¤±æ</span>
        <span class="keyword">if</span><span class="operator">(</span><span class="variable">$param</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">key</span><span class="operator">}</span> <span class="keyword">eq</span> <span class="variable">md5_sum</span><span class="operator">(</span><span class="variable">$secret</span> <span class="operator">.</span> <span class="keyword">join</span> <span class="string">""</span><span class="operator">,</span><span class="variable">@$param</span><span class="operator">{</span><span class="string">qw(id gid did content exp)</span><span class="operator">}</span> <span class="operator">)){</span>
            <span class="keyword">return</span> <span class="number">1</span><span class="operator">;</span> <span class="comment">#secretåç¸å³åæ°å¼æ¼æ¥æä¸ä¸ªå­ç¬¦ä¸²åè®¡ç®md5 åååæ°keyçå¼è¿è¡æ¯è¾</span>
        <span class="operator">}</span>
        <span class="keyword">else</span><span class="operator">{</span>
            <span class="keyword">return</span> <span class="number">0</span><span class="operator">;</span> 
        <span class="operator">}</span>
    <span class="operator">}</span>
    
    <span class="comment">#å©ç¨controlleråè®¸æå®çIPå¯ä»¥è®¿é®ï¼æ´å¤å³äºcontrollerçèµæï¼å¯ä»¥åè Mojolicious::Controller</span>
    <span class="keyword">sub</span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$param</span><span class="operator">,</span><span class="variable">$controller</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="keyword">if</span><span class="operator">(</span><span class="variable">$controller</span><span class="operator">-&gt;</span><span class="variable">tx</span><span class="operator">-&gt;</span><span class="variable">remote_address</span> <span class="keyword">eq</span> <span class="string">"127.0.0.1"</span><span class="operator">){</span>
            <span class="keyword">return</span> <span class="number">1</span><span class="operator">;</span>
        <span class="operator">}</span>
        <span class="keyword">return</span> <span class="number">0</span><span class="operator">;</span>
    <span class="operator">}</span>
    
    <span class="comment">#æ¥æ¶æ¶æ¯ä¸æ¥æ¥å£ç¤ºä¾ï¼</span>
    <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="string">"Openqq"</span><span class="operator">,</span><span class="string">data</span><span class="operator">=&gt;</span><span class="operator">{</span>
        <span class="string">listen</span> <span class="operator">=&gt;</span> <span class="operator">[{</span><span class="string">host</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">,</span><span class="string">port</span><span class="operator">=&gt;</span><span class="variable">xxx</span><span class="operator">}]</span><span class="operator">,</span>
        <span class="string">post_api</span><span class="operator">=&gt;</span> <span class="string">'http://127.0.0.1:3000/post_api'</span><span class="operator">,</span>
    <span class="operator">}</span><span class="operator">);</span>
    
    <span class="comment">#æ¥æ¶å°æ¶æ¯åï¼æä»¶ä¼éè¿HTTP POSTè¯·æ±çæ¹å¼å°jsonæ ¼å¼çæ¶æ¯ä¸æ¥å°http://127.0.0.1:3000/post_api</span>
    
    <span class="keyword">connect</span> <span class="variable">to</span> <span class="number">127.0</span><span class="operator">.</span><span class="number">0</span><span class="operator">.</span><span class="number">1</span> <span class="variable">port</span> <span class="number">3000</span>    
    <span class="variable">POST</span> <span class="operator">/</span><span class="variable">post_api</span>
    <span class="variable">Accept</span><span class="operator">:</span> <span class="operator">*</span><span class="regex">/*
    Content-Length: xxx
    Content-Type: application/json</span>
    
    <span class="operator">{</span>   <span class="string">"receiver"</span><span class="operator">:</span><span class="string">"å°ç°"</span><span class="operator">,</span>
        <span class="string">"msg_time"</span><span class="operator">:</span><span class="string">"1442542632"</span><span class="operator">,</span>
        <span class="string">"content"</span><span class="operator">:</span><span class="string">"æµè¯ä¸ä¸"</span><span class="operator">,</span>
        <span class="string">"msg_class"</span><span class="operator">:</span><span class="string">"recv"</span><span class="operator">,</span>
        <span class="string">"sender_id"</span><span class="operator">:</span><span class="string">"2372835507"</span><span class="operator">,</span>
        <span class="string">"receiver_id"</span><span class="operator">:</span><span class="string">"4072574066"</span><span class="operator">,</span>
        <span class="string">"group"</span><span class="operator">:</span><span class="string">"PERLå­¦ä¹ äº¤æµ"</span><span class="operator">,</span>
        <span class="string">"group_id"</span><span class="operator">:</span><span class="string">"2617047292"</span><span class="operator">,</span>
        <span class="string">"sender"</span><span class="operator">:</span><span class="string">"ç°ç°"</span><span class="operator">,</span>
        <span class="string">"msg_id"</span><span class="operator">:</span><span class="string">"10856"</span><span class="operator">,</span>
        <span class="string">"type"</span><span class="operator">:</span><span class="string">"group_message"</span>
    <span class="operator">}</span>
    
    ä¸è¬æåµä¸ï¼<span class="variable">post_api</span>æ¥å£è¿åçååºåå®¹å¯ä»¥æ¯éæï¼ä¼è¢«å¿½ç¥
    <span class="variable">post_api</span>æ¥å£è¿åçæ°æ®ç±»åå¦ææ¯ <span class="variable">text</span><span class="operator">/</span><span class="variable">json</span> æè <span class="variable">application</span><span class="operator">/</span><span class="variable">json</span>ï¼å¹¶ä¸<span class="variable">json</span>æ ¼å¼å½¢å¼å¦ä¸ï¼
    
        <span class="operator">{</span>
            <span class="string">"reply"</span><span class="operator">:</span><span class="string">"xxxxx"</span><span class="operator">,</span>    <span class="comment">#è¦åå¤æ¶æ¯ï¼å¿é¡»åå«replyçå±æ§</span>
            <span class="string">"shutup"</span><span class="operator">:</span> <span class="number">1</span><span class="operator">,</span>        <span class="comment">#å¯éï¼æ¯å¦å¯¹æ¶æ¯åéèç¦è¨</span>
            <span class="string">"shutup_time"</span><span class="operator">:</span> <span class="number">60</span><span class="operator">,</span>  <span class="comment">#å¯éï¼ç¦è¨æ¶é¿ï¼é»è®¤60s</span>
        <span class="operator">}</span> 
    
    åè¡¨ç¤ºå¸æéè¿<span class="variable">post_api</span>ååºçåå®¹æ¥ç´æ¥åå¤è¯¥æ¶æ¯ï¼<span class="variable">post_api</span>çè¿åç»ææ¯å¦
    
    <span class="variable">HTTP</span><span class="operator">/</span><span class="number">1.1</span> <span class="number">200</span> <span class="variable">OK</span>
    <span class="variable">Connection</span><span class="operator">:</span> <span class="keyword">close</span>
    <span class="variable">Content</span><span class="operator">-</span><span class="variable">Type</span><span class="operator">:</span> <span class="variable">application</span><span class="operator">/</span><span class="variable">json</span><span class="operator">;</span><span class="variable">charset</span><span class="operator">=</span><span class="variable">UTF</span><span class="operator">-</span><span class="number">8</span>
    <span class="variable">Date</span><span class="operator">:</span> <span class="variable">Mon</span><span class="operator">,</span> <span class="number">29</span> <span class="variable">Feb</span> <span class="number">2016</span> <span class="number">05</span><span class="operator">:</span><span class="number">53</span><span class="operator">:</span><span class="number">31</span> <span class="variable">GMT</span>
    <span class="variable">Content</span><span class="operator">-</span><span class="variable">Length</span><span class="operator">:</span> <span class="number">27</span>
    <span class="variable">Server</span><span class="operator">:</span> <span class="variable">Mojolicious</span> <span class="operator">(</span><span class="variable">Perl</span><span class="operator">)</span>
    
    <span class="operator">{</span><span class="string">"reply"</span><span class="operator">:</span><span class="string">"ä½ å¥½"</span><span class="operator">,</span><span class="string">"code"</span><span class="operator">:</span><span class="number">0</span><span class="operator">}</span>
    
    åä¼ç´æ¥å¯¹ä¸æ¥çæ¶æ¯è¿è¡åå¤ï¼åå¤çåå®¹ä¸º <span class="string">"ä½ å¥½"</span>
    æ¯æå¥½åæ¶æ¯ãç¾¤æ¶æ¯ãè®¨è®ºç»æ¶æ¯ãä¸´æ¶æ¶æ¯çä¸æ¥
        
</code></pre>

<p>&#x5F53;&#x524D;&#x652F;&#x6301;&#x7684;&#x4FE1;&#x606F;&#x83B7;&#x53D6;&#x548C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;API&#x63A5;&#x53E3;&#xFF08;&#x5747;&#x8FD4;&#x56DE;json&#x683C;&#x5F0F;&#x6570;&#x636E;&#xFF09;&#xFF1A;</p>

<pre><code>    #&#x4FE1;&#x606F;&#x83B7;&#x53D6;
    /openqq/get_user_info           #&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;
    /openqq/get_friend_info         #&#x67E5;&#x8BE2;&#x597D;&#x53CB;&#x4FE1;&#x606F;
    /openqq/get_group_info          #&#x67E5;&#x8BE2;&#x7FA4;&#x4FE1;&#x606F;
    /openqq/get_discuss_info        #&#x67E5;&#x8BE2;&#x8BA8;&#x8BBA;&#x7EC4;&#x4FE1;&#x606F;
    /openqq/get_recent_info         #&#x67E5;&#x8BE2;&#x6700;&#x8FD1;&#x8054;&#x7CFB;&#x4EBA;&#x5217;&#x8868;&#x4FE1;&#x606F;
    
    #&#x6D88;&#x606F;&#x53D1;&#x9001;&#xFF0C;&#x5747;&#x652F;&#x6301;GET&#x548C;POST
    /openqq/send_message            #&#x53D1;&#x9001;&#x597D;&#x53CB;&#x6D88;&#x606F; &#x53C2;&#x6570;id=xxx&amp;content=xxx &#x6216; qq=xxx&amp;content=xxx
    /openqq/send_group_message      #&#x53D1;&#x9001;&#x7FA4;&#x6D88;&#x606F;   &#x53C2;&#x6570;gid=xxx&amp;content=xxx &#x6216; gnumber=xxx&amp;content=xxx
    /openqq/send_discuss_message    #&#x53D1;&#x9001;&#x8BA8;&#x8BBA;&#x7EC4;&#x6D88;&#x606F; &#x53C2;&#x6570;did=xxx&amp;content=xxx &#xFF08;&#x7531;&#x4E8E;&#x817E;&#x8BAF;&#x9650;&#x5236;&#xFF0C;&#x5F53;&#x524D;&#x65E0;&#x6CD5;&#x6210;&#x529F;&#x53D1;&#x9001;&#xFF09;
    /openqq/send_sess_message       #&#x53D1;&#x9001;&#x7FA4;&#x4E34;&#x65F6;&#x6D88;&#x606F;  &#x53C2;&#x6570; gid=xxx&amp;id=xxx&amp;content=xxx &#x6216; gnumber=xxx&amp;qq=xxx&amp;content=xxx
    /openqq/send_sess_message       #&#x53D1;&#x9001;&#x8BA8;&#x8BBA;&#x7EC4;&#x4E34;&#x65F6;&#x6D88;&#x606F; &#x53C2;&#x6570; did=xxx&amp;id=xxx&amp;content=xxx &#x6216; did=xxx&amp;qq=xxx&amp;content=xxx</code></pre>

<p>&#x8C03;&#x7528;&#x793A;&#x4F8B;</p>

<pre><code>    http://127.0.0.1:5000/openqq/get_user_info
    http://127.0.0.1:5000/openqq/send_message?id=xxx&amp;content=hello 
    http://127.0.0.1:5000/openqq/send_message?id=xxx&amp;content=%e4%bd%a0%e5%a5%bd (&#x4E2D;&#x6587;&#x9700;&#x8981;utf8&#x7F16;&#x7801;&#x5E76;&#x8FDB;&#x884C;urlencode)</code></pre>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><a>Weixin::Client</a></p>

<p><a href="https://github.com/sjdy521/Mojo-Webqq">https://github.com/sjdy521/Mojo-Webqq</a></p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>sjdy521, &lt;sjdy521@163.com&gt;</p>

<h1 id="COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</h1>

<p>Copyright (C) 2014 by sjdy521</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.10.1 or, at your option, any later version of Perl 5 you may have available.</p>


</body>

</html>


